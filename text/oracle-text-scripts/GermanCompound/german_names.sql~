drop table emp;

create table emp
  ( id number(4) not null
  , name varchar2(30)
  )
/


insert into emp values (1, 'Hauptbahnhof');

exec ctx_ddl.drop_preference('mylex')

begin
  ctx_ddl.create_preference('mylex', 'BASIC_LEXER');
  ctx_ddl.set_attribute ( 'mylex', 'index_stems', 'GERMAN');
  ctx_ddl.set_attribute ( 'mylex', 'composite', 'GERMAN');
  ctx_ddl.set_attribute ( 'mylex', 'alternate_spelling', 'GERMAN');
end;
/

exec ctx_ddl.drop_preference('myword')

begin 
  ctx_ddl.create_preference('myword', 'BASIC_WORDLIST'); 
  ctx_ddl.set_attribute('myword','FUZZY_MATCH','GERMAN');
end; 
/

create index emp_idx1 on emp(name) 
  indextype is ctxsys.context 
  parameters ('WORDLIST myword DATASTORE ctxsys.default_datastore LEXER mylex STOPLIST ctxsys.empty_stoplist SYNC (on commit)')
/

-- The ? indicates fuzzy matching
SELECT id, name, score(1) as score FROM emp WHERE contains(name, 'strasse', 1) > 0;
