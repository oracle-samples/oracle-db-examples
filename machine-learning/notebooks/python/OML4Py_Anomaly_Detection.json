{"paragraphs":[{"text":"%md\n## Anomaly Detection to Detect Unusual or Rare Occurrences\nOracle Machine Learning supports anomaly detection to identify rare or unusual records (customers, transactions, etc.) in your data using the semi-supervised learning algorithm One-Class Support Vector Machine. In this notebook, you will build a One-Class SVM model and then use it to flag unusual or suspicious records. The data used in this example is from the SH schema. The entire machine learning methodology runs inside Oracle Autonomous Database (ADB).\n\n\nCopyright (c) 2020 Oracle Corporation                             \n###### [The Universal Permissive License (UPL), Version 1.0](https://oss.oracle.com/licenses/upl/)\n---","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:38+0000","config":{"colWidth":9,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":152,"optionOpen":false}}},"editorSetting":{"language":"md","editOnDblClick":false,"completionSupport":false},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h2>Anomaly Detection to Detect Unusual or Rare Occurrences</h2>\n<p>Oracle Machine Learning supports anomaly detection to identify rare or unusual records (customers, transactions, etc.) in your data using the semi-supervised learning algorithm One-Class Support Vector Machine. In this notebook, you will build a One-Class SVM model and then use it to flag unusual or suspicious records. The data used in this example is from the SH schema. The entire machine learning methodology runs inside Oracle Autonomous Database (ADB).</p>\n<p>Copyright (c) 2020 Oracle Corporation</p>\n<h6><a href=\"https://oss.oracle.com/licenses/upl/\">The Universal Permissive License (UPL), Version 1.0</a></h6>\n<hr />\n"}]},"interrupted":false,"jobName":"paragraph_1600195105313_-1174724636","id":"20200915-183825_2054052957","dateCreated":"2020-03-30T14:51:39+0000","dateStarted":"2020-09-15T21:44:38+0000","dateFinished":"2020-09-15T21:44:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:147"},{"text":"%md \r\n<dl>\r\n<img src=\"http://www.oracle.com/technetwork/database/options/advanced-analytics/anomalydetection-5663169.jpg\" alt=\"OML Notebooks\" width=\"250\"/>\r\n</dl>","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:38+0000","config":{"colWidth":3,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":155.016,"optionOpen":false}}},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<dl>\n<img src=\"http://www.oracle.com/technetwork/database/options/advanced-analytics/anomalydetection-5663169.jpg\" alt=\"OML Notebooks\" width=\"250\"/>\n</dl>\n"}]},"interrupted":false,"jobName":"paragraph_1600195105313_1780639132","id":"20200915-183825_173200103","dateCreated":"2020-06-03T17:54:59+0000","dateStarted":"2020-09-15T21:44:39+0000","dateFinished":"2020-09-15T21:44:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:148"},{"title":"For more information...","text":"%md\nOracle ADW Documentation <https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html>\nOML folder on Oracle Github <https://github.com/oracle/oracle-db-examples/tree/master/machine-learning>\nOML web page: <https://www.oracle.com/machine-learning>\nOML Anomaly Detection: <http://www.oracle.com/goto/ml-anomaly-detection>","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:39+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Oracle ADW Documentation <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\">https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html</a>\n<br  />OML folder on Oracle Github <a href=\"https://github.com/oracle/oracle-db-examples/tree/master/machine-learning\">https://github.com/oracle/oracle-db-examples/tree/master/machine-learning</a>\n<br  />OML web page: <a href=\"https://www.oracle.com/machine-learning\">https://www.oracle.com/machine-learning</a>\n<br  />OML Anomaly Detection: <a href=\"http://www.oracle.com/goto/ml-anomaly-detection\">http://www.oracle.com/goto/ml-anomaly-detection</a></p>\n"}]},"interrupted":false,"jobName":"paragraph_1600195105313_-239626398","id":"20200915-183825_843353242","dateCreated":"2020-06-09T21:45:56+0000","dateStarted":"2020-09-15T21:44:39+0000","dateFinished":"2020-09-15T21:44:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:149"},{"title":"Import libraries and set display options","text":"%python\n\nimport pandas as pd\nimport oml\n\npd.set_option('display.max_rows', 500)\npd.set_option('display.max_columns', 500)\npd.set_option('display.width', 1000)","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:39+0000","config":{"colWidth":4,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1600195105313_-1694018777","id":"20200915-183825_1414904342","dateCreated":"2020-04-01T19:47:46+0000","dateStarted":"2020-09-15T21:44:39+0000","dateFinished":"2020-09-15T21:44:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:150"},{"title":"Create OML Data Frames for table CUSTOMERS and SUPPLEMENTARY_DEMOGRAPHICS","text":"%python\n\n\nCUSTOMERS = oml.sync(query = 'SELECT CUST_ID, CUST_GENDER, CUST_MARITAL_STATUS, CUST_YEAR_OF_BIRTH, CUST_INCOME_LEVEL, CUST_CREDIT_LIMIT FROM SH.CUSTOMERS')\nDEMO_DF = oml.sync(query = \"\"\"SELECT CUST_ID, EDUCATION, AFFINITY_CARD, HOUSEHOLD_SIZE, OCCUPATION, YRS_RESIDENCE, Y_BOX_GAMES\n    FROM SH.SUPPLEMENTARY_DEMOGRAPHICS\"\"\")\n  \n","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:48+0000","config":{"colWidth":8,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1600195105313_-1104805381","id":"20200915-183825_1557239925","dateCreated":"2020-04-01T19:10:06+0000","dateStarted":"2020-09-15T21:44:49+0000","dateFinished":"2020-09-15T21:44:49+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:151"},{"title":"Display a few rows from CUSTOMERS","text":"%python\n\nz.show(CUSTOMERS.head())","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:49+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","CUST_GENDER":"string","CUST_MARITAL_STATUS":"string","CUST_YEAR_OF_BIRTH":"string","CUST_INCOME_LEVEL":"string","CUST_CREDIT_LIMIT":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[{"name":"CUST_ID","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"CUST_GENDER","index":1,"aggr":"sum"}]},"helium":{}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"CUST_ID\tCUST_GENDER\tCUST_MARITAL_STATUS\tCUST_YEAR_OF_BIRTH\tCUST_INCOME_LEVEL\tCUST_CREDIT_LIMIT\n49671\tM\tmarried\t1976\tG: 130,000 - 149,999\t1500\n3228\tM\tNone\t1964\tG: 130,000 - 149,999\t7000\n6783\tM\tsingle\t1942\tG: 130,000 - 149,999\t11000\n10338\tM\tmarried\t1977\tG: 130,000 - 149,999\t1500\n13894\tM\tNone\t1949\tG: 130,000 - 149,999\t9000\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_-113512174","id":"20200915-183825_1074310370","dateCreated":"2020-04-01T20:19:49+0000","dateStarted":"2020-09-15T21:44:49+0000","dateFinished":"2020-09-15T21:44:50+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:152"},{"title":"Display a few rows from DEMO_DF","text":"%python\n\nz.show(DEMO_DF.head())","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:50+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","EDUCATION":"string","AFFINITY_CARD":"string","HOUSEHOLD_SIZE":"string","OCCUPATION":"string","YRS_RESIDENCE":"string","Y_BOX_GAMES":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"CUST_ID\tEDUCATION\tAFFINITY_CARD\tHOUSEHOLD_SIZE\tOCCUPATION\tYRS_RESIDENCE\tY_BOX_GAMES\n102547\t10th\t0\t1\tOther\t0\t1\n101050\t10th\t0\t1\tOther\t0\t1\n100040\t11th\t0\t1\tSales\t0\t1\n102117\tHS-grad\t0\t1\tFarming\t0\t1\n101074\t10th\t0\t1\tHandler\t1\t1\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_-1404670320","id":"20200915-183825_1446955045","dateCreated":"2020-04-01T20:20:03+0000","dateStarted":"2020-09-15T21:44:50+0000","dateFinished":"2020-09-15T21:44:50+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:153"},{"title":"Merge (join) CUSTOMERS and DEMO_DF OML data frames on CUST_ID column ","text":"%python\n\nCUST_DF = CUSTOMERS.merge(DEMO_DF, how = \"inner\", on = 'CUST_ID',suffixes = [\"\",\"\"])\n","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:50+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1600195105314_2057083955","id":"20200915-183825_801267198","dateCreated":"2020-04-01T20:19:40+0000","dateStarted":"2020-09-15T21:44:51+0000","dateFinished":"2020-09-15T21:44:51+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:154"},{"title":"Display a few rows of CUST_DF","text":"%python\n\nz.show(CUST_DF.head())","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:51+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","CUST_GENDER":"string","CUST_MARITAL_STATUS":"string","CUST_YEAR_OF_BIRTH":"string","CUST_INCOME_LEVEL":"string","CUST_CREDIT_LIMIT":"string","EDUCATION":"string","AFFINITY_CARD":"string","HOUSEHOLD_SIZE":"string","OCCUPATION":"string","YRS_RESIDENCE":"string","Y_BOX_GAMES":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"CUST_ID\tCUST_GENDER\tCUST_MARITAL_STATUS\tCUST_YEAR_OF_BIRTH\tCUST_INCOME_LEVEL\tCUST_CREDIT_LIMIT\tEDUCATION\tAFFINITY_CARD\tHOUSEHOLD_SIZE\tOCCUPATION\tYRS_RESIDENCE\tY_BOX_GAMES\n100134\tF\tDivorc.\t1965\tL: 300,000 and above\t9000\tAssoc-A\t0\t2\tCleric.\t2\t0\n102828\tF\tNeverM\t1967\tE: 90,000 - 109,999\t10000\tHS-grad\t0\t1\tMachine\t4\t0\n101232\tM\tNeverM\t1979\tJ: 190,000 - 249,999\t9000\t< Bach.\t0\t1\tOther\t2\t1\n100696\tM\tMarried\t1971\tF: 110,000 - 129,999\t7000\tProfsc\t1\t3\tProf.\t3\t0\n103948\tM\tNeverM\t1966\tJ: 190,000 - 249,999\t9000\t< Bach.\t0\t1\tCleric.\t4\t0\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_-304763407","id":"20200915-183825_2139122243","dateCreated":"2020-03-24T19:05:39+0000","dateStarted":"2020-09-15T21:44:51+0000","dateFinished":"2020-09-15T21:44:51+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:155"},{"title":"Visualize the distribution of birth date, marital status and years of residence ","text":"%python\n\nDF = CUST_DF.crosstab(['CUST_YEAR_OF_BIRTH', 'CUST_MARITAL_STATUS'], values = 'YRS_RESIDENCE', aggfunc= oml.DataFrame.sum)\nz.show(DF)\n","user":"OMLUSER","dateUpdated":"2020-09-15T21:45:03+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_YEAR_OF_BIRTH":"string","CUST_MARITAL_STATUS":"string","sum(YRS_RESIDENCE)":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default","stacked":true}},"commonSetting":{},"keys":[{"name":"CUST_YEAR_OF_BIRTH","index":0,"aggr":"sum"}],"groups":[{"name":"CUST_MARITAL_STATUS","index":1,"aggr":"sum"}],"values":[{"name":"sum(YRS_RESIDENCE)","index":2,"aggr":"sum"}]},"helium":{}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"CUST_YEAR_OF_BIRTH\tCUST_MARITAL_STATUS\tsum(YRS_RESIDENCE)\n1913\tNeverM\t23\n1913\tMarried\t29\n1921\tMarried\t8\n1922\tDivorc.\t8\n1922\tWidowed\t4\n1923\tNeverM\t4\n1923\tMarried\t10\n1924\tMabsent\t4\n1924\tMarried\t20\n1925\tMarried\t40\n1925\tWidowed\t10\n1926\tNeverM\t4\n1926\tMabsent\t8\n1926\tMarried\t34\n1926\tWidowed\t8\n1927\tWidowed\t14\n1928\tMar-AF\t2\n1928\tNeverM\t8\n1928\tDivorc.\t8\n1928\tMabsent\t6\n1928\tMarried\t16\n1928\tWidowed\t24\n1929\tDivorc.\t0\n1929\tMarried\t19\n1929\tWidowed\t8\n1930\tMarried\t7\n1930\tWidowed\t14\n1931\tDivorc.\t2\n1931\tMarried\t9\n1931\tWidowed\t22\n1932\tNeverM\t8\n1932\tSepar.\t0\n1932\tMarried\t50\n1932\tWidowed\t2\n1933\tMarried\t53\n1933\tWidowed\t9\n1934\tDivorc.\t14\n1934\tMarried\t96\n1934\tWidowed\t4\n1935\tNeverM\t10\n1935\tMabsent\t10\n1935\tMarried\t69\n1935\tWidowed\t16\n1936\tNeverM\t16\n1936\tDivorc.\t14\n1936\tMarried\t80\n1936\tWidowed\t6\n1937\tMarried\t51\n1937\tWidowed\t27\n1938\tSepar.\t6\n1938\tDivorc.\t23\n1938\tMarried\t92\n1938\tWidowed\t43\n1939\tNeverM\t11\n1939\tSepar.\t6\n1939\tDivorc.\t26\n1939\tMarried\t74\n1939\tWidowed\t14\n1940\tSepar.\t6\n1940\tDivorc.\t6\n1940\tMarried\t113\n1940\tWidowed\t55\n1941\tNeverM\t29\n1941\tDivorc.\t24\n1941\tMarried\t74\n1941\tWidowed\t24\n1942\tDivorc.\t12\n1942\tMarried\t134\n1942\tWidowed\t10\n1943\tNeverM\t12\n1943\tDivorc.\t52\n1943\tMabsent\t3\n1943\tMarried\t168\n1943\tWidowed\t48\n1944\tNeverM\t30\n1944\tSepar.\t21\n1944\tDivorc.\t64\n1944\tMabsent\t12\n1944\tMarried\t158\n1944\tWidowed\t28\n1945\tNeverM\t19\n1945\tDivorc.\t77\n1945\tMarried\t191\n1945\tWidowed\t25\n1946\tSepar.\t12\n1946\tDivorc.\t73\n1946\tMabsent\t12\n1946\tMarried\t166\n1946\tWidowed\t30\n1947\tNeverM\t48\n1947\tSepar.\t20\n1947\tDivorc.\t31\n1947\tMabsent\t8\n1947\tMarried\t177\n1948\tNeverM\t18\n1948\tSepar.\t12\n1948\tDivorc.\t60\n1948\tMabsent\t12\n1948\tMarried\t214\n1948\tWidowed\t20\n1949\tNeverM\t10\n1949\tSepar.\t10\n1949\tDivorc.\t71\n1949\tMabsent\t5\n1949\tMarried\t189\n1949\tWidowed\t5\n1950\tNeverM\t25\n1950\tDivorc.\t92\n1950\tMabsent\t35\n1950\tMarried\t195\n1950\tWidowed\t10\n1951\tNeverM\t26\n1951\tSepar.\t13\n1951\tDivorc.\t13\n1951\tMabsent\t7\n1951\tMarried\t226\n1951\tWidowed\t15\n1952\tNeverM\t16\n1952\tSepar.\t30\n1952\tDivorc.\t109\n1952\tMabsent\t3\n1952\tMarried\t274\n1952\tWidowed\t18\n1953\tSepar.\t10\n1953\tDivorc.\t45\n1953\tMabsent\t21\n1953\tMarried\t263\n1953\tWidowed\t5\n1954\tNeverM\t71\n1954\tSepar.\t71\n1954\tDivorc.\t94\n1954\tMabsent\t23\n1954\tMarried\t249\n1954\tWidowed\t12\n1955\tNeverM\t42\n1955\tSepar.\t2\n1955\tDivorc.\t123\n1955\tMabsent\t13\n1955\tMarried\t327\n1955\tWidowed\t10\n1956\tNeverM\t57\n1956\tSepar.\t40\n1956\tDivorc.\t86\n1956\tMabsent\t9\n1956\tMarried\t338\n1956\tWidowed\t16\n1957\tNeverM\t73\n1957\tSepar.\t44\n1957\tDivorc.\t118\n1957\tMabsent\t25\n1957\tMarried\t375\n1957\tWidowed\t15\n1958\tNeverM\t63\n1958\tSepar.\t15\n1958\tDivorc.\t182\n1958\tMabsent\t23\n1958\tMarried\t283\n1959\tNeverM\t61\n1959\tSepar.\t14\n1959\tDivorc.\t128\n1959\tMarried\t375\n1959\tWidowed\t6\n1960\tNeverM\t34\n1960\tSepar.\t15\n1960\tDivorc.\t88\n1960\tMabsent\t12\n1960\tMarried\t265\n1961\tNeverM\t105\n1961\tDivorc.\t80\n1961\tMarried\t317\n1961\tWidowed\t16\n1962\tNeverM\t104\n1962\tSepar.\t33\n1962\tDivorc.\t79\n1962\tMarried\t233\n1962\tWidowed\t14\n1963\tNeverM\t96\n1963\tDivorc.\t88\n1963\tMarried\t242\n1964\tNeverM\t77\n1964\tSepar.\t2\n1964\tDivorc.\t107\n1964\tMabsent\t6\n1964\tMarried\t256\n1964\tWidowed\t5\n1965\tNeverM\t50\n1965\tSepar.\t10\n1965\tDivorc.\t67\n1965\tMarried\t330\n1966\tNeverM\t114\n1966\tSepar.\t16\n1966\tDivorc.\t67\n1966\tMarried\t317\n1967\tNeverM\t114\n1967\tSepar.\t14\n1967\tDivorc.\t112\n1967\tMarried\t275\n1967\tWidowed\t16\n1968\tMar-AF\t8\n1968\tNeverM\t156\n1968\tSepar.\t4\n1968\tDivorc.\t72\n1968\tMarried\t331\n1969\tNeverM\t103\n1969\tSepar.\t16\n1969\tDivorc.\t74\n1969\tMabsent\t18\n1969\tMarried\t252\n1970\tNeverM\t84\n1970\tSepar.\t3\n1970\tDivorc.\t55\n1970\tMabsent\t12\n1970\tMarried\t230\n1970\tWidowed\t9\n1971\tNeverM\t78\n1971\tSepar.\t16\n1971\tDivorc.\t95\n1971\tMabsent\t6\n1971\tMarried\t206\n1972\tNeverM\t92\n1972\tSepar.\t11\n1972\tDivorc.\t28\n1972\tMabsent\t3\n1972\tMarried\t184\n1973\tNeverM\t116\n1973\tSepar.\t11\n1973\tDivorc.\t27\n1973\tMabsent\t17\n1973\tMarried\t152\n1974\tNeverM\t135\n1974\tSepar.\t6\n1974\tDivorc.\t39\n1974\tMabsent\t8\n1974\tMarried\t164\n1975\tNeverM\t180\n1975\tSepar.\t11\n1975\tDivorc.\t25\n1975\tMabsent\t3\n1975\tMarried\t202\n1976\tNeverM\t212\n1976\tSepar.\t3\n1976\tDivorc.\t46\n1976\tMarried\t85\n1977\tNeverM\t180\n1977\tSepar.\t2\n1977\tDivorc.\t8\n1977\tMarried\t137\n1978\tNeverM\t256\n1978\tSepar.\t15\n1978\tDivorc.\t24\n1978\tMarried\t71\n1979\tNeverM\t177\n1979\tSepar.\t17\n1979\tDivorc.\t10\n1979\tMarried\t54\n1980\tNeverM\t226\n1980\tSepar.\t6\n1980\tDivorc.\t12\n1980\tMarried\t29\n1981\tNeverM\t213\n1981\tDivorc.\t2\n1981\tMabsent\t13\n1981\tMarried\t15\n1982\tNeverM\t156\n1982\tSepar.\t4\n1982\tDivorc.\t4\n1982\tMarried\t6\n1983\tNeverM\t198\n1983\tMarried\t16\n1984\tNeverM\t137\n1985\tNeverM\t73\n1986\tNeverM\t39\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_-1975581458","id":"20200915-183825_2053809901","dateCreated":"2020-03-24T19:05:50+0000","dateStarted":"2020-09-15T21:44:52+0000","dateFinished":"2020-09-15T21:44:52+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:156"},{"title":"Build the Anomaly Detection Model","text":"%md\nAfter dropping any previous model, specify settings: the outlier rate is the proportion of the rows that should be detected as outliers. Then, create the oml.svm python object indicating this is to be an anomaly detection model with the specified settings. Finally, invoke ***fit*** on the data with 'None' specified for the target. We explicitly provide a model name for future reference and the case id to uniquely identify rows. ","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:52+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>After dropping any previous model, specify settings: the outlier rate is the proportion of the rows that should be detected as outliers. Then, create the oml.svm python object indicating this is to be an anomaly detection model with the specified settings. Finally, invoke <strong><em>fit</em></strong> on the data with 'None' specified for the target. We explicitly provide a model name for future reference and the case id to uniquely identify rows.</p>\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_1723394639","id":"20200915-183825_1513436773","dateCreated":"2020-03-30T14:54:57+0000","dateStarted":"2020-09-15T21:44:52+0000","dateFinished":"2020-09-15T21:44:52+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:157"},{"text":"%python\n\ntry:\n    oml.drop(model=\"ANOMALY_DETECTION_MODEL1\")\nexcept:\n    print(\"Model does not exist\")\n\nodm_settings = {'svms_outlier_rate' : 0.01}\n\nsvm_mod = oml.svm(\"anomaly_detection\", **odm_settings)\nsvm_mod.fit(CUST_DF, None, model_name = 'ANOMALY_DETECTION_MODEL1', case_id = 'CUST_ID')","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:53+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Model does not exist\n\nModel Name: ANOMALY_DETECTION_MODEL1\n\nModel Owner: OMLUSER\n\nAlgorithm Name: Support Vector Machine\n\nMining Function: ANOMALY_DETECTION\n\nSettings: \n                   setting name                 setting value\n0                     ALGO_NAME  ALGO_SUPPORT_VECTOR_MACHINES\n1                  ODMS_DETAILS                   ODMS_ENABLE\n2  ODMS_MISSING_VALUE_TREATMENT       ODMS_MISSING_VALUE_AUTO\n3                 ODMS_SAMPLING         ODMS_SAMPLING_DISABLE\n4                     PREP_AUTO                            ON\n5           SVMS_CONV_TOLERANCE                         .0001\n6          SVMS_KERNEL_FUNCTION                   SVMS_LINEAR\n7             SVMS_OUTLIER_RATE                          0.01\n\nComputed Settings: \n             setting name    setting value\n0  SVMS_COMPLEXITY_FACTOR               10\n1     SVMS_NUM_ITERATIONS               30\n2             SVMS_SOLVER  SVMS_SOLVER_IPM\n\nGlobal Statistics: \n  CONVERGED  ITERATIONS  NUM_ROWS\n0       YES        16.0    4500.0\n\nAttributes: \nAFFINITY_CARD\nCUST_CREDIT_LIMIT\nCUST_GENDER\nCUST_INCOME_LEVEL\nCUST_MARITAL_STATUS\nCUST_YEAR_OF_BIRTH\nEDUCATION\nHOUSEHOLD_SIZE\nOCCUPATION\nYRS_RESIDENCE\nY_BOX_GAMES\n\nPartition: NO\n\nCOEFFICIENTS: \n\n    TARGET_VALUE       ATTRIBUTE_NAME ATTRIBUTE_SUBNAME       ATTRIBUTE_VALUE    COEF\n0              1        AFFINITY_CARD              None                  None  0.5645\n1              1    CUST_CREDIT_LIMIT              None                  None  0.9606\n2              1          CUST_GENDER              None                     F  1.0127\n3              1          CUST_GENDER              None                     M  1.1695\n4              1    CUST_INCOME_LEVEL              None       A: Below 30,000  0.0732\n5              1    CUST_INCOME_LEVEL              None    B: 30,000 - 49,999  0.1590\n6              1    CUST_INCOME_LEVEL              None    C: 50,000 - 69,999  0.1067\n7              1    CUST_INCOME_LEVEL              None    D: 70,000 - 89,999  0.0902\n8              1    CUST_INCOME_LEVEL              None   E: 90,000 - 109,999  0.1872\n9              1    CUST_INCOME_LEVEL              None  F: 110,000 - 129,999  0.2213\n10             1    CUST_INCOME_LEVEL              None  G: 130,000 - 149,999  0.1805\n11             1    CUST_INCOME_LEVEL              None  H: 150,000 - 169,999  0.2187\n12             1    CUST_INCOME_LEVEL              None  I: 170,000 - 189,999  0.2434\n13             1    CUST_INCOME_LEVEL              None  J: 190,000 - 249,999  0.3005\n14             1    CUST_INCOME_LEVEL              None  K: 250,000 - 299,999  0.1674\n15             1    CUST_INCOME_LEVEL              None  L: 300,000 and above  0.2339\n16             1  CUST_MARITAL_STATUS              None               Divorc.  0.4683\n17             1  CUST_MARITAL_STATUS              None               Mabsent  0.0607\n18             1  CUST_MARITAL_STATUS              None                Mar-AF  0.0025\n19             1  CUST_MARITAL_STATUS              None               Married  0.7758\n20             1  CUST_MARITAL_STATUS              None                NeverM  0.6492\n21             1  CUST_MARITAL_STATUS              None                Separ.  0.1099\n22             1  CUST_MARITAL_STATUS              None               Widowed  0.1158\n23             1   CUST_YEAR_OF_BIRTH              None                  None  1.5147\n24             1            EDUCATION              None                  10th  0.0861\n25             1            EDUCATION              None                  11th  0.0894\n26             1            EDUCATION              None                  12th  0.0394\n27             1            EDUCATION              None               1st-4th  0.0125\n28             1            EDUCATION              None               5th-6th  0.0293\n29             1            EDUCATION              None               7th-8th  0.0679\n30             1            EDUCATION              None                   9th  0.0598\n31             1            EDUCATION              None               < Bach.  0.4503\n32             1            EDUCATION              None               Assoc-A  0.1148\n33             1            EDUCATION              None               Assoc-V  0.1374\n34             1            EDUCATION              None                 Bach.  0.3364\n35             1            EDUCATION              None               HS-grad  0.5553\n36             1            EDUCATION              None               Masters  0.1206\n37             1            EDUCATION              None                   PhD  0.0291\n38             1            EDUCATION              None               Presch.  0.0025\n39             1            EDUCATION              None                Profsc  0.0515\n40             1       HOUSEHOLD_SIZE              None                     1  0.3351\n41             1       HOUSEHOLD_SIZE              None                     2  0.5915\n42             1       HOUSEHOLD_SIZE              None                     3  0.6005\n43             1       HOUSEHOLD_SIZE              None                   4-5  0.1649\n44             1       HOUSEHOLD_SIZE              None                   6-8  0.0999\n45             1       HOUSEHOLD_SIZE              None                    9+  0.3904\n46             1           OCCUPATION              None                     ?  0.1502\n47             1           OCCUPATION              None               Armed-F  0.0016\n48             1           OCCUPATION              None               Cleric.  0.2684\n49             1           OCCUPATION              None                Crafts  0.2226\n50             1           OCCUPATION              None                 Exec.  0.2402\n51             1           OCCUPATION              None               Farming  0.0761\n52             1           OCCUPATION              None               Handler  0.0896\n53             1           OCCUPATION              None               House-s  0.0152\n54             1           OCCUPATION              None               Machine  0.1431\n55             1           OCCUPATION              None                 Other  0.2398\n56             1           OCCUPATION              None                 Prof.  0.2754\n57             1           OCCUPATION              None               Protec.  0.0420\n58             1           OCCUPATION              None                 Sales  0.2278\n59             1           OCCUPATION              None               TechSup  0.1035\n60             1           OCCUPATION              None               Transp.  0.0866\n61             1        YRS_RESIDENCE              None                  None  0.8047\n62             1          Y_BOX_GAMES              None                  None  0.6311\n63             1                 None              None                  None -1.0000\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_1823149354","id":"20200915-183825_1738915184","dateCreated":"2020-03-24T19:10:45+0000","dateStarted":"2020-09-15T21:44:53+0000","dateFinished":"2020-09-15T21:44:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:158"},{"title":"Invoke predict() to score data for anomalies","text":"%python\n\nRES_DF = svm_mod.predict(CUST_DF, supplemental_cols = CUST_DF, proba = True)","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:55+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","CUST_GENDER":"string","CUST_MARITAL_STATUS":"string","CUST_YEAR_OF_BIRTH":"string","CUST_INCOME_LEVEL":"string","CUST_CREDIT_LIMIT":"string","EDUCATION":"string","AFFINITY_CARD":"string","HOUSEHOLD_SIZE":"string","OCCUPATION":"string","YRS_RESIDENCE":"string","Y_BOX_GAMES":"string","PREDICTION":"string","PROBABILITY":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1600195105314_2045069799","id":"20200915-183825_462094773","dateCreated":"2020-03-24T19:46:17+0000","dateStarted":"2020-09-15T21:44:56+0000","dateFinished":"2020-09-15T21:44:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:159"},{"title":"Anomalies are indicated by  PREDICTION = 0, display a few rows flagged as anomalies","text":"%python\n\nz.show(RES_DF[RES_DF['PREDICTION']==0][[\"PREDICTION\",\"PROBABILITY\"] + CUST_DF.columns].head())","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:56+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{"columns":[{"name":"CUST_ID","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"PREDICTION","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"PROBABILITY","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CUST_GENDER","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CUST_MARITAL_STATUS","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CUST_YEAR_OF_BIRTH","visible":true,"width":196,"sort":{},"filters":[{}],"pinned":""},{"name":"CUST_INCOME_LEVEL","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CUST_CREDIT_LIMIT","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"EDUCATION","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"AFFINITY_CARD","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"HOUSEHOLD_SIZE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"OCCUPATION","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"YRS_RESIDENCE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"Y_BOX_GAMES","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""}],"scrollFocus":{},"selection":[],"grouping":{"grouping":[],"aggregations":[],"rowExpandedStates":{}},"treeView":{},"pagination":{"paginationCurrentPage":1,"paginationPageSize":250}},"tableColumnTypeState":{"names":{"CUST_ID":"string","CUST_GENDER":"string","CUST_MARITAL_STATUS":"string","CUST_YEAR_OF_BIRTH":"string","CUST_INCOME_LEVEL":"string","CUST_CREDIT_LIMIT":"string","EDUCATION":"string","AFFINITY_CARD":"string","HOUSEHOLD_SIZE":"string","OCCUPATION":"string","YRS_RESIDENCE":"string","Y_BOX_GAMES":"string","PREDICTION":"string","PROBABILITY":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"PREDICTION\tPROBABILITY\tCUST_ID\tCUST_GENDER\tCUST_MARITAL_STATUS\tCUST_YEAR_OF_BIRTH\tCUST_INCOME_LEVEL\tCUST_CREDIT_LIMIT\tEDUCATION\tAFFINITY_CARD\tHOUSEHOLD_SIZE\tOCCUPATION\tYRS_RESIDENCE\tY_BOX_GAMES\n0\t0.6142721320960557\t103702\tM\tDivorc.\t1944\tC: 50,000 - 69,999\t1500\t12th\t0\t6-8\tTransp.\t6\t0\n0\t0.5714219157764225\t102329\tF\tWidowed\t1929\tB: 30,000 - 49,999\t1500\t< Bach.\t0\t2\tTransp.\t4\t0\n0\t0.626763628112712\t100646\tF\tWidowed\t1941\tG: 130,000 - 149,999\t1500\tBach.\t0\t9+\tTechSup\t2\t0\n0\t0.632541496163044\t100170\tF\tWidowed\t1943\tF: 110,000 - 129,999\t3000\t7th-8th\t0\t9+\t?\t3\t0\n0\t0.5684290397474061\t101539\tF\tWidowed\t1934\tI: 170,000 - 189,999\t5000\tAssoc-A\t0\t2\t?\t2\t0\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_1686479768","id":"20200915-183825_888771047","dateCreated":"2020-03-24T19:58:22+0000","dateStarted":"2020-09-15T21:44:56+0000","dateFinished":"2020-09-15T21:44:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:160"},{"title":"Plot the probability distribution to be an anomaly against marital status","text":"%python\n\nRES_DF = RES_DF.concat(RES_DF['PROBABILITY'].cut(10))\nDF = RES_DF.crosstab(['Bin(PROBABILITY)', \"CUST_MARITAL_STATUS\"])\nz.show(DF.sort_values('Bin(PROBABILITY)'))","user":"OMLUSER","dateUpdated":"2020-09-15T21:45:03+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"Bin(PROBABILITY)":"string","CUST_MARITAL_STATUS":"string","count":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default","stacked":true}},"commonSetting":{},"keys":[{"name":"Bin(PROBABILITY)","index":0,"aggr":"sum"}],"groups":[{"name":"CUST_MARITAL_STATUS","index":1,"aggr":"sum"}],"values":[{"name":"count","index":2,"aggr":"sum"}]},"helium":{}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"Bin(PROBABILITY)\tCUST_MARITAL_STATUS\tcount\n(0.5, 0.546]\tDivorc.\t7\n(0.5, 0.546]\tMabsent\t4\n(0.5, 0.546]\tMar-AF\t1\n(0.5, 0.546]\tMarried\t3\n(0.5, 0.546]\tNeverM\t2\n(0.5, 0.546]\tSepar.\t6\n(0.5, 0.546]\tWidowed\t20\n(0.546, 0.592]\tDivorc.\t7\n(0.546, 0.592]\tMabsent\t11\n(0.546, 0.592]\tMar-AF\t2\n(0.546, 0.592]\tMarried\t3\n(0.546, 0.592]\tNeverM\t1\n(0.546, 0.592]\tSepar.\t18\n(0.546, 0.592]\tWidowed\t23\n(0.592, 0.637]\tDivorc.\t21\n(0.592, 0.637]\tMabsent\t8\n(0.592, 0.637]\tMarried\t3\n(0.592, 0.637]\tNeverM\t3\n(0.592, 0.637]\tSepar.\t13\n(0.592, 0.637]\tWidowed\t24\n(0.637, 0.683]\tDivorc.\t27\n(0.637, 0.683]\tMabsent\t11\n(0.637, 0.683]\tMarried\t13\n(0.637, 0.683]\tNeverM\t10\n(0.637, 0.683]\tSepar.\t11\n(0.637, 0.683]\tWidowed\t21\n(0.683, 0.728]\tDivorc.\t48\n(0.683, 0.728]\tMabsent\t12\n(0.683, 0.728]\tMarried\t30\n(0.683, 0.728]\tNeverM\t23\n(0.683, 0.728]\tSepar.\t13\n(0.683, 0.728]\tWidowed\t17\n(0.728, 0.774]\tDivorc.\t81\n(0.728, 0.774]\tMabsent\t10\n(0.728, 0.774]\tMarried\t66\n(0.728, 0.774]\tNeverM\t65\n(0.728, 0.774]\tSepar.\t34\n(0.728, 0.774]\tWidowed\t24\n(0.774, 0.819]\tDivorc.\t148\n(0.774, 0.819]\tMabsent\t13\n(0.774, 0.819]\tMarried\t168\n(0.774, 0.819]\tNeverM\t151\n(0.774, 0.819]\tSepar.\t21\n(0.774, 0.819]\tWidowed\t6\n(0.819, 0.865]\tDivorc.\t185\n(0.819, 0.865]\tMabsent\t3\n(0.819, 0.865]\tMarried\t412\n(0.819, 0.865]\tNeverM\t390\n(0.819, 0.865]\tSepar.\t18\n(0.819, 0.865]\tWidowed\t1\n(0.865, 0.911]\tDivorc.\t83\n(0.865, 0.911]\tMabsent\t3\n(0.865, 0.911]\tMarried\t771\n(0.865, 0.911]\tNeverM\t590\n(0.911, 0.956]\tDivorc.\t8\n(0.911, 0.956]\tMarried\t565\n(0.911, 0.956]\tNeverM\t268\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_-2114427369","id":"20200915-183825_1200361219","dateCreated":"2020-03-24T21:46:56+0000","dateStarted":"2020-09-15T21:44:57+0000","dateFinished":"2020-09-15T21:44:57+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:161"},{"title":"Display the top 5 most anomalous cases","text":"%python\n\nz.show(RES_DF[RES_DF['PREDICTION']==0][[\"PREDICTION\",\"PROBABILITY\", \"Bin(PROBABILITY)\"] + RES_DF.columns].sort_values('PROBABILITY').head(5).pull())","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:57+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"PREDICTION":"string","PROBABILITY":"string","CUST_ID":"string","CUST_GENDER":"string","CUST_MARITAL_STATUS":"string","CUST_YEAR_OF_BIRTH":"string","CUST_INCOME_LEVEL":"string","CUST_CREDIT_LIMIT":"string","EDUCATION":"string","AFFINITY_CARD":"string","HOUSEHOLD_SIZE":"string","OCCUPATION":"string","YRS_RESIDENCE":"string","Y_BOX_GAMES":"string","Bin(PROBABILITY)":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[{"name":"PREDICTION","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"PROBABILITY","index":1,"aggr":"sum"}]},"helium":{}}},"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"PREDICTION\tPROBABILITY\tBin(PROBABILITY)\tCUST_ID\tCUST_GENDER\tCUST_MARITAL_STATUS\tCUST_YEAR_OF_BIRTH\tCUST_INCOME_LEVEL\tCUST_CREDIT_LIMIT\tEDUCATION\tAFFINITY_CARD\tHOUSEHOLD_SIZE\tOCCUPATION\tYRS_RESIDENCE\tY_BOX_GAMES\tPREDICTION\tPROBABILITY\tBin(PROBABILITY)\n0\t0.5005020290150333\t(0.5, 0.546]\t104286\tF\tMarried\t1948\tI: 170,000 - 189,999\t1500\t9th\t0\t4-5\tTechSup\t3\t0\t0\t0.5005020290150333\t(0.5, 0.546]\n0\t0.5011664028977354\t(0.5, 0.546]\t103417\tF\tDivorc.\t1963\tE: 90,000 - 109,999\t3000\t11th\t0\t6-8\tOther\t2\t0\t0\t0.5011664028977354\t(0.5, 0.546]\n0\t0.508077356916588\t(0.5, 0.546]\t100566\tF\tDivorc.\t1943\tH: 150,000 - 169,999\t1500\t7th-8th\t0\t9+\tMachine\t6\t0\t0\t0.508077356916588\t(0.5, 0.546]\n0\t0.5092776683623905\t(0.5, 0.546]\t102802\tF\tNeverM\t1939\tI: 170,000 - 189,999\t1500\tAssoc-A\t0\t6-8\tProf.\t5\t0\t0\t0.5092776683623905\t(0.5, 0.546]\n0\t0.5138891469024314\t(0.5, 0.546]\t100969\tF\tMabsent\t1957\tJ: 190,000 - 249,999\t9000\t7th-8th\t0\t9+\tHouse-s\t2\t0\t0\t0.5138891469024314\t(0.5, 0.546]\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_-1212075464","id":"20200915-183825_218653887","dateCreated":"2020-03-24T21:47:02+0000","dateStarted":"2020-09-15T21:44:57+0000","dateFinished":"2020-09-15T21:44:58+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:162"},{"title":"Materialize CUST_DF data frame into table CUSTOMER360_TAB","text":"%python\n\ntry:\n    oml.drop(table = 'CUSTOMERS360_TAB')\nexcept:\n    print(\"Table does not exists\")\n_ = CUST_DF.materialize(table = 'CUSTOMERS360_TAB')\n","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:58+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Table does not exists\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_1979951148","id":"20200915-183825_1322076674","dateCreated":"2020-04-08T14:32:50+0000","dateStarted":"2020-09-15T21:44:58+0000","dateFinished":"2020-09-15T21:44:59+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:163"},{"title":"View PREDICTION_DETAILS in SQL of top 3 attributes that explain factors leading to prediction","text":"%sql\n\nSELECT CUST_ID, \n       RTRIM(TRIM(SUBSTR(OUTPRED.\"Attribute1\",17,100)),'rank=\"1\"/>') FIRST_ATTRIBUTE,\n       RTRIM(TRIM(SUBSTR(OUTPRED.\"Attribute2\",17,100)),'rank=\"2\"/>') SECOND_ATTRIBUTE,\n       RTRIM(TRIM(SUBSTR(OUTPRED.\"Attribute3\",17,100)),'rank=\"3\"/>') THIRD_ATTRIBUTE\n       FROM (SELECT CUST_ID, PREDICTION_DETAILS(ANOMALY_DETECTION_MODEL1, '0' USING *) PREDICTION_DETAILS FROM CUSTOMERS360_TAB\n           WHERE PREDICTION_PROBABILITY(ANOMALY_DETECTION_MODEL1, '0' USING *) > 0.50\n           AND OCCUPATION = 'TechSup'\n           ORDER BY CUST_ID) OUT,\n           XMLTABLE('/Details'\n                PASSING OUT.PREDICTION_DETAILS\n                COLUMNS \n                   \"Attribute1\" XMLType PATH 'Attribute[1]',\n                   \"Attribute2\" XMLType PATH 'Attribute[2]',\n                   \"Attribute3\" XMLType PATH 'Attribute[3]') \n       OUTPRED","user":"OMLUSER","dateUpdated":"2020-09-15T21:44:59+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","FIRST_ATTRIBUTE":"string","SECOND_ATTRIBUTE":"string","THIRD_ATTRIBUTE":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/osql","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"CUST_ID\tFIRST_ATTRIBUTE\tSECOND_ATTRIBUTE\tTHIRD_ATTRIBUTE\n100646\t\"CUST_MARITAL_STATUS\" actualValue=\"Widowed\" weight=\".226\" \t\"CUST_YEAR_OF_BIRTH\" actualValue=\"1941\" weight=\".118\" \t\"CUST_CREDIT_LIMIT\" actualValue=\"1500\" weight=\".115\" \n102922\t\"CUST_MARITAL_STATUS\" actualValue=\"Widowed\" weight=\".222\" \t\"CUST_YEAR_OF_BIRTH\" actualValue=\"1931\" weight=\".169\" \t\"CUST_CREDIT_LIMIT\" actualValue=\"1500\" weight=\".115\" \n103441\t\"CUST_MARITAL_STATUS\" actualValue=\"Widowed\" weight=\".222\" \t\"CUST_YEAR_OF_BIRTH\" actualValue=\"1941\" weight=\".117\" \t\"EDUCATION\" actualValue=\"Bach.\" weight=\".076\" \n104286\t\"EDUCATION\" actualValue=\"9th\" weight=\".165\" \t\"HOUSEHOLD_SIZE\" actualValue=\"4-5\" weight=\".146\" \t\"CUST_CREDIT_LIMIT\" actualValue=\"1500\" weight=\".112\" \n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_1681422723","id":"20200915-183825_910400661","dateCreated":"2020-04-07T18:19:00+0000","dateStarted":"2020-09-15T21:44:59+0000","dateFinished":"2020-09-15T21:45:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:164"},{"text":"%md\n# End of script\n","user":"OMLUSER","dateUpdated":"2020-09-15T21:45:02+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>End of script</h1>\n"}]},"interrupted":false,"jobName":"paragraph_1600195105314_730972079","id":"20200915-183825_286288201","dateCreated":"2020-04-07T18:34:32+0000","dateStarted":"2020-09-15T21:45:02+0000","dateFinished":"2020-09-15T21:45:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:165"}],"name":"OML4Py Anomaly Detection","id":"467991","noteParams":{},"noteForms":{},"angularObjects":{"MDW381939C745:shared_process":[],"ORACE04E7522F:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}