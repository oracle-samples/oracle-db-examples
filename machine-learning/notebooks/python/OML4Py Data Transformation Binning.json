{
  "paragraphs": [
    {
      "text": "%md\n## OML4Py Data Transformation: Binning\nIn this notebook, we demonstrate how to bin numerical columns using OML4Py. Equi-width and quantile binning are shown. \n\nWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\n\nWe show how to bin a numerical column and visualize the distribution.\n\nThe dataset `CUSTOMER_INSURANCE_LTV` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.\n\n---\n\n##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -\u003e Examples and is a pre-requisite to the current notebook.\n\n---\n\n\n**Note**: If the user plans to use the in-database Naive Bayes algorithm later, Automatic Data Preparation (ADP) performs supervised binning. Supervised binning uses decision trees to create optimal bin boundaries. More details can be found in \u003ca href\u003d\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/naive-bayes.html#GUID-FD929CF9-6513-42DE-B04D-FD57310C3A0\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/naive-bayes.html#GUID-FD929CF9-6513-42DE-B04D-FD57310C3A0\u0027);\"\u003eNaive Bayes\u003c/a\u003e  \n\nCopyright (c) 2022 Oracle Corporation \n###### \u003ca href\u003d\"https://oss.oracle.com/licenses/upl/\" onclick\u003d\"return ! window.open(\u0027https://oss.oracle.com/licenses/upl/\u0027);\"\u003eThe Universal Permissive License (UPL), Version 1.0\u003c/a\u003e\n---",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:56:49+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch2\u003eOML4Py Data Transformation: Binning\u003c/h2\u003e\n\u003cp\u003eIn this notebook, we demonstrate how to bin numerical columns using OML4Py. Equi-width and quantile binning are shown.\u003c/p\u003e\n\u003cp\u003eWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\u003c/p\u003e\n\u003cp\u003eWe show how to bin a numerical column and visualize the distribution.\u003c/p\u003e\n\u003cp\u003eThe dataset \u003ccode\u003eCUSTOMER_INSURANCE_LTV\u003c/code\u003e is generated by the \u003ccode\u003e\"OML Run-me-first\"\u003c/code\u003e notebook, which \u003ccode\u003eMUST\u003c/code\u003e be run before this notebook.\u003c/p\u003e\n\u003chr /\u003e\n\u003ch5\u003e\u003ccode\u003eIMPORTANT\u003c/code\u003e: The \u003ccode\u003e\"OML Run-me-first\"\u003c/code\u003e notebook is available under the menu Templates -\u003e Examples and is a pre-requisite to the current notebook.\u003c/h5\u003e\n\u003chr /\u003e\n\u003cp\u003e\u003cstrong\u003eNote\u003c/strong\u003e: If the user plans to use the in-database Naive Bayes algorithm later, Automatic Data Preparation (ADP) performs supervised binning. Supervised binning uses decision trees to create optimal bin boundaries. More details can be found in \u003ca href\u003d\"https: //docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/naive-bayes.html#GUID-FD929CF9-6513-42DE-B04D-FD57310C3A0\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/naive-bayes.html#GUID-FD929CF9-6513-42DE-B04D-FD57310C3A0\u0027);\"\u003eNaive Bayes\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eCopyright (c) 2022 Oracle Corporation\u003c/p\u003e\n\u003ch6\u003e\u003ca href\u003d\"https: //oss.oracle.com/licenses/upl/\" onclick\u003d\"return ! window.open(\u0027https://oss.oracle.com/licenses/upl/\u0027);\"\u003eThe Universal Permissive License (UPL), Version 1.0\u003c/a\u003e\u003c/h6\u003e\n\u003chr /\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262001_1160262932",
      "id": "20220124-201422_869560838",
      "dateCreated": "2020-12-15T19:07:35+0000",
      "dateStarted": "2022-03-10T16:56:49+0000",
      "dateFinished": "2022-03-10T16:56:51+0000",
      "status": "FINISHED"
    },
    {
      "title": "For more information ...",
      "text": "%md\n\nOML4Py documentation on Data Summarization: \u003ca href\u003d\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/summarize-data.html\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/summarize-data.html\u0027);\"\u003e https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/summarize-data.html \u003c/a\u003e ",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:56:51+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cp\u003eOML4Py documentation on Data Summarization: \u003ca href\u003d\"https: //docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/summarize-data.html\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/summarize-data.html\u0027);\"\u003e https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/summarize-data.html \u003c/a\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262001_150251735",
      "id": "20220124-201422_745820527",
      "dateCreated": "2020-12-17T18:55:41+0000",
      "dateStarted": "2022-03-10T16:56:51+0000",
      "dateFinished": "2022-03-10T16:56:51+0000",
      "status": "FINISHED"
    },
    {
      "title": "Import python libraries and set display options",
      "text": "%python\n\nimport warnings\nwarnings.filterwarnings(\u0027ignore\u0027)\n\nimport pandas as pd\nimport oml\nfrom oml import automl\n\npd.set_option(\u0027display.max_rows\u0027, 500)\npd.set_option(\u0027display.max_columns\u0027, 500)\npd.set_option(\u0027display.width\u0027, 1000)",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:56:51+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262001_632647794",
      "id": "20220124-201422_198006517",
      "dateCreated": "2020-11-29T03:39:14+0000",
      "dateStarted": "2022-03-10T16:56:52+0000",
      "dateFinished": "2022-03-10T16:57:02+0000",
      "status": "FINISHED"
    },
    {
      "title": "Get a proxy object to CUSTOMER_INSURANCE_LTV",
      "text": "%python\n\nCUST_DF \u003d oml.sync(table \u003d \u0027CUSTOMER_INSURANCE_LTV\u0027)",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:02+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262001_1373404089",
      "id": "20220124-201422_1024842384",
      "dateCreated": "2020-11-29T03:39:54+0000",
      "dateStarted": "2022-03-10T16:57:02+0000",
      "dateFinished": "2022-03-10T16:57:02+0000",
      "status": "FINISHED"
    },
    {
      "title": "Data overview",
      "text": "%python\n\nz.show(CUST_DF.head())",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:02+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "MARITAL_STATUS": "string",
                      "STATE": "string",
                      "CREDIT_BALANCE": "string",
                      "CUSTOMER_TENURE": "string",
                      "MORTGAGE_AMOUNT": "string",
                      "BANK_FUNDS": "string",
                      "NUM_DEPENDENTS": "string",
                      "HAS_CHILDREN": "string",
                      "INCOME": "string",
                      "CUSTOMER_ID": "string",
                      "GENDER": "string",
                      "PROFESSION": "string",
                      "CREDIT_CARD_LIMITS": "string",
                      "REGION": "string",
                      "HOME_OWNERSHIP": "string",
                      "NUM_ONLINE_TRANS": "string",
                      "BUY_INSURANCE": "string",
                      "MONTHLY_CHECKS": "string",
                      "NUM_TRANS_KIOSK": "string",
                      "AGE": "string",
                      "MONEY_MONTLY_OVERDRAWN": "string",
                      "LTV": "string",
                      "TOTAL_AUTOM_PAYMENTS": "string",
                      "NUM_TRANS_TELLER": "string",
                      "CHECKING_BALANCE": "string",
                      "NUM_TRANS_ATM": "string",
                      "LTV_BIN": "string",
                      "FIRST_NAME": "string",
                      "NUM_MORTGAGES": "string",
                      "CAR_OWNERSHIP": "string",
                      "LAST_NAME": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "MARITAL_STATUS\tSTATE\tCREDIT_BALANCE\tCUSTOMER_TENURE\tMORTGAGE_AMOUNT\tBANK_FUNDS\tNUM_DEPENDENTS\tHAS_CHILDREN\tINCOME\tCUSTOMER_ID\tGENDER\tPROFESSION\tCREDIT_CARD_LIMITS\tREGION\tHOME_OWNERSHIP\tNUM_ONLINE_TRANS\tBUY_INSURANCE\tMONTHLY_CHECKS\tNUM_TRANS_KIOSK\tAGE\tMONEY_MONTLY_OVERDRAWN\tLTV\tTOTAL_AUTOM_PAYMENTS\tNUM_TRANS_TELLER\tCHECKING_BALANCE\tNUM_TRANS_ATM\tLTV_BIN\tFIRST_NAME\tNUM_MORTGAGES\tCAR_OWNERSHIP\tLAST_NAME\nSINGLE\tCA                        \t0\t3\t0\t0\t3\t0\t65871\tCU15154                   \tM                         \tNurse\t1000\tWest\t0\t0\tNo\t0\t1\t24\t53.06\t14367.75\t0\t0\t25\t0\tMEDIUM\tGAYLE\t0\t0\tDURANT\nSINGLE\tNY                        \t0\t4\t0\t290\t4\t0\t68747\tCU15155                   \tM                         \tProgrammer/Developer\t700\tNorthEast\t0\t0\tYes\t1\t1\t35\t53.84\t14686.75\t287\t2\t25\t4\tMEDIUM\tQUINTON\t0\t1\tMASSEY\nMARRIED\tMI                        \t0\t3\t1000\t550\t3\t0\t68684\tCU15157                   \tM                         \tProgrammer/Developer\t1000\tMidwest\t1\t1000\tYes\t14\t1\t26\t53.48\t25271.0\t132\t2\t25\t4\tHIGH\tANIBAL\t1\t1\tJIMENEZ\nMARRIED\tUT                        \t0\t5\t1200\t1000\t5\t0\t59354\tCU15286                   \tF                         \tFireman\t2500\tSouthwest\t1\t1200\tNo\t4\t5\t24\t53.08\t19738.5\t628\t3\t619\t1\tMEDIUM\tJUNITA\t1\t1\tROBERTSON\nMARRIED\tUT                        \t0\t4\t1800\t0\t3\t0\t84801\tCU15287                   \tF                         \tPROF-26\t2500\tSouthwest\t1\t1800\tNo\t0\t5\t47\t53.06\t31900.25\t0\t0\t25\t0\tVERY HIGH\tCHASITY\t1\t1\tELLIS\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262001_715432713",
      "id": "20220124-201422_767679350",
      "dateCreated": "2020-11-29T03:40:15+0000",
      "dateStarted": "2022-03-10T16:57:03+0000",
      "dateFinished": "2022-03-10T16:57:03+0000",
      "status": "FINISHED"
    },
    {
      "title": "Bin the INCOME column into 10 segments",
      "text": "%python\n\nCUST_BIN_DF \u003d CUST_DF.concat(CUST_DF[\u0027INCOME\u0027].cut(bins \u003d 10))",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:03+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 6.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262002_-1720446212",
      "id": "20220124-201422_590354568",
      "dateCreated": "2020-11-29T03:40:26+0000",
      "dateStarted": "2022-03-10T16:57:04+0000",
      "dateFinished": "2022-03-10T16:57:04+0000",
      "status": "FINISHED"
    },
    {
      "title": "Sample view of the binned column",
      "text": "%python\n\nz.show(CUST_BIN_DF[[\u0027INCOME\u0027, \u0027Bin(INCOME)\u0027]].head())",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:04+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 6.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 204.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "INCOME": "string",
                      "Bin(INCOME)": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "INCOME\tBin(INCOME)\n65871\t(59456.4, 66906.2]\n68747\t(66906.2, 74356.0]\n68684\t(66906.2, 74356.0]\n59354\t(52006.6, 59456.4]\n84801\t(81805.8, 89255.6]\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262002_1988983272",
      "id": "20220124-201422_1118537957",
      "dateCreated": "2020-11-29T03:41:14+0000",
      "dateStarted": "2022-03-10T16:57:05+0000",
      "dateFinished": "2022-03-10T16:57:05+0000",
      "status": "FINISHED"
    },
    {
      "title": "Plot the distribution of binned INCOME",
      "text": "%python\n\nINCOME_MEAN \u003d CUST_BIN_DF.crosstab(\u0027Bin(INCOME)\u0027, values \u003d \u0027INCOME\u0027, aggfunc \u003d oml.DataFrame.mean).sort_values(\u0027mean(INCOME)\u0027)\nOUTPUT \u003d CUST_BIN_DF.crosstab(\u0027Bin(INCOME)\u0027).merge(INCOME_MEAN, on \u003d \u0027Bin(INCOME)\u0027).sort_values(\u0027mean(INCOME)_r\u0027)\nz.show(OUTPUT)",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:05+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "multiBarChart",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "Bin(INCOME)": "string",
                      "mean(INCOME)": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                },
                "multiBarChart": {
                  "rotate": {
                    "degree": "-45"
                  },
                  "xLabelStatus": "default"
                }
              },
              "commonSetting": {},
              "keys": [
                {
                  "name": "Bin(INCOME)",
                  "index": 0.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "values": [
                {
                  "name": "count_l",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ]
            },
            "helium": {}
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "Bin(INCOME)\tcount_l\tmean(INCOME)_r\n(37032.502, 44556.8]\t23\t41487.217391304344\n(44556.8, 52006.6]\t134\t48909.5\n(52006.6, 59456.4]\t2070\t57577.33381642512\n(59456.4, 66906.2]\t7053\t63166.39472564866\n(66906.2, 74356.0]\t3651\t69725.86469460421\n(74356.0, 81805.8]\t636\t76719.74056603774\n(81805.8, 89255.6]\t179\t84790.54189944133\n(89255.6, 96705.4]\t84\t92527.70238095238\n(96705.4, 104155.2]\t32\t100052.25\n(104155.2, 111605.0]\t18\t108535.5\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262002_-101314515",
      "id": "20220124-201422_1375279994",
      "dateCreated": "2020-11-29T03:43:25+0000",
      "dateStarted": "2022-03-10T16:57:06+0000",
      "dateFinished": "2022-03-10T16:57:07+0000",
      "status": "FINISHED"
    },
    {
      "title": "Get quantiles for INCOME column",
      "text": "%python\n\nCUST_DF[\u0027INCOME\u0027].describe()[-5:]\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:07+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 5.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "min     37107.0\n25%     68482.0\n50%     60719.0\n75%     64425.5\nmax    111605.0\nName: INCOME, dtype: float64\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262002_11492161",
      "id": "20220124-201422_1916825688",
      "dateCreated": "2020-12-16T20:57:14+0000",
      "dateStarted": "2022-03-10T16:57:07+0000",
      "dateFinished": "2022-03-10T16:57:08+0000",
      "status": "FINISHED"
    },
    {
      "title": "Use quantiles for bin boundaries",
      "text": "%python\n\npct \u003d CUST_DF[\u0027INCOME\u0027].describe(percentiles \u003d [0.25, 0.5, 0.75])[-5:]\n\npct_list \u003d list(pct)\npct_list.sort()\nCUST_SET_DF \u003d CUST_DF.concat(CUST_DF[\u0027INCOME\u0027].cut(bins \u003d pct_list))\n\nOUTPUT \u003d CUST_SET_DF.crosstab(\u0027Bin(INCOME)\u0027)\nz.show(OUTPUT[OUTPUT[\u0027Bin(INCOME)\u0027].isnull() \u003d\u003d False])",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:08+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 7.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "editorHide": true,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "multiBarChart",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "Bin(INCOME)": "string",
                      "count": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                },
                "multiBarChart": {
                  "rotate": {
                    "degree": "-45"
                  },
                  "xLabelStatus": "default"
                }
              },
              "commonSetting": {},
              "keys": [
                {
                  "name": "Bin(INCOME)",
                  "index": 0.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "values": [
                {
                  "name": "count",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ]
            },
            "helium": {}
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "Bin(INCOME)\tcount\n(60719.0, 64425.5]\t3470\n(68482.0, 111605.0]\t3468\n(37107.0, 60719.0]\t3469\n(64425.5, 68482.0]\t3472\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262002_-1099636399",
      "id": "20220124-201422_1368904384",
      "dateCreated": "2020-12-17T03:02:11+0000",
      "dateStarted": "2022-03-10T16:57:08+0000",
      "dateFinished": "2022-03-10T16:57:09+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n\n# End of Script\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:09+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false,
          "completionSupport": true
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch1\u003eEnd of Script\u003c/h1\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262002_-388399762",
      "id": "20220124-201422_1332057271",
      "dateCreated": "2020-11-29T03:48:15+0000",
      "dateStarted": "2022-03-10T16:57:10+0000",
      "dateFinished": "2022-03-10T16:57:10+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:10+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055262002_1161286682",
      "id": "20220124-201422_1449030890",
      "dateCreated": "2020-12-16T01:01:02+0000",
      "dateStarted": "2022-03-10T16:57:10+0000",
      "dateFinished": "2022-03-10T16:57:10+0000",
      "status": "FINISHED"
    }
  ],
  "name": "OML4Py Data Transformation Binning",
  "id": "101030",
  "defaultInterpreterGroup": "spark",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {
    "MDW381939C745:shared_process": [],
    "ORA7A60DC9B32:shared_process": []
  },
  "config": {
    "isZeppelinNotebookCronEnable": false,
    "looknfeel": "default",
    "personalizedMode": "false"
  },
  "info": {
    "isRunning": false
  }
}