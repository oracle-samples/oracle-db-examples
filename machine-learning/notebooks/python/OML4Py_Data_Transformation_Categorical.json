{"paragraphs":[{"text":"%md\r\n## OML4Py Data Transformation: convert categorical variables to numeric variables\r\n\r\nIn this notebook, we demonstrate how to convert categorical variables to numeric variables using OML4Py.\r\n\r\nWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\r\n\r\nWe show how to convert a categorical variable with each distinct level/value coded to an integer data type. \r\n\r\nThe dataset `CUSTOMER_INSURANCE_LTV` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.\r\n\r\n---\r\n\r\n##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.\r\n\r\n---\r\n\r\n\r\nCopyright (c) 2021 Oracle Corporation \r\n###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a>\r\n---","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h2>OML4Py Data Transformation: convert categorical variables to numeric variables</h2>\n<p>In this notebook, we demonstrate how to convert categorical variables to numeric variables using OML4Py.</p>\n<p>We use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.</p>\n<p>We show how to convert a categorical variable with each distinct level/value coded to an integer data type.</p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV</code> is generated by the <code>\"OML Run-me-first\"</code> notebook, which <code>MUST</code> be run before this notebook.</p>\n<hr />\n<h5><code>IMPORTANT</code>: The <code>\"OML Run-me-first\"</code> notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.</h5>\n<hr />\n<p>Copyright (c) 2021 Oracle Corporation</p>\n<h6><a href=\"https: //oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a></h6>\n<hr />\n"}]},"interrupted":false,"jobName":"paragraph_1627066206796_-680814250","id":"20210723-185006_1290326836","dateCreated":"2020-12-16T18:13:00+0000","dateStarted":"2021-08-25T03:23:22+0000","dateFinished":"2021-08-25T03:23:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:40"},{"title":"For more information ...","text":"%md\n\nOML4Py documentation on Data Preparation: <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html');\"> https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html </a>","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>OML4Py documentation on Data Preparation: <a href=\"https: //docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html');\"> https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html </a></p>\n"}]},"interrupted":false,"jobName":"paragraph_1627066206796_83725612","id":"20210723-185006_1925187650","dateCreated":"2020-12-17T18:37:51+0000","dateStarted":"2021-08-25T03:23:23+0000","dateFinished":"2021-08-25T03:23:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:41"},{"title":"Import python libraries and set display options","text":"%python\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\nimport pandas as pd\nimport oml\nfrom oml import automl\n\npd.set_option('display.max_rows', 500)\npd.set_option('display.max_columns', 500)\npd.set_option('display.width', 1000)","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:23+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/undefined","fontSize":9,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1627066206796_-1688446996","id":"20210723-185006_1109199411","dateCreated":"2020-12-15T20:35:15+0000","dateStarted":"2021-08-25T03:23:23+0000","dateFinished":"2021-08-25T03:23:29+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:42"},{"title":"Overview of the data","text":"%python\n\nCUST_DF = oml.sync(table = 'CUSTOMER_INSURANCE_LTV')\nz.show(CUST_DF.head())","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:29+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"MARITAL_STATUS":"string","STATE":"string","CREDIT_BALANCE":"string","CUSTOMER_TENURE":"string","MORTGAGE_AMOUNT":"string","BANK_FUNDS":"string","NUM_DEPENDENTS":"string","HAS_CHILDREN":"string","INCOME":"string","CUSTOMER_ID":"string","GENDER":"string","PROFESSION":"string","CREDIT_CARD_LIMITS":"string","REGION":"string","HOME_OWNERSHIP":"string","NUM_ONLINE_TRANS":"string","BUY_INSURANCE":"string","MONTHLY_CHECKS":"string","NUM_TRANS_KIOSK":"string","AGE":"string","MONEY_MONTLY_OVERDRAWN":"string","LTV":"string","TOTAL_AUTOM_PAYMENTS":"string","NUM_TRANS_TELLER":"string","CHECKING_BALANCE":"string","NUM_TRANS_ATM":"string","LTV_BIN":"string","FIRST_NAME":"string","NUM_MORTGAGES":"string","CAR_OWNERSHIP":"string","LAST_NAME":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MARITAL_STATUS\tSTATE\tCREDIT_BALANCE\tCUSTOMER_TENURE\tMORTGAGE_AMOUNT\tBANK_FUNDS\tNUM_DEPENDENTS\tHAS_CHILDREN\tINCOME\tCUSTOMER_ID\tGENDER\tPROFESSION\tCREDIT_CARD_LIMITS\tREGION\tHOME_OWNERSHIP\tNUM_ONLINE_TRANS\tBUY_INSURANCE\tMONTHLY_CHECKS\tNUM_TRANS_KIOSK\tAGE\tMONEY_MONTLY_OVERDRAWN\tLTV\tTOTAL_AUTOM_PAYMENTS\tNUM_TRANS_TELLER\tCHECKING_BALANCE\tNUM_TRANS_ATM\tLTV_BIN\tFIRST_NAME\tNUM_MORTGAGES\tCAR_OWNERSHIP\tLAST_NAME\nSINGLE\tCA                        \t0\t3\t0\t0\t3\t0\t65871\tCU15154                   \tM                         \tNurse\t1000\tWest\t0\t0\tNo\t0\t1\t24\t53.06\t14367.75\t0\t0\t25\t0\tMEDIUM\tGAYLE\t0\t0\tDURANT\nSINGLE\tNY                        \t0\t4\t0\t290\t4\t0\t68747\tCU15155                   \tM                         \tProgrammer/Developer\t700\tNorthEast\t0\t0\tYes\t1\t1\t35\t53.84\t14686.75\t287\t2\t25\t4\tMEDIUM\tQUINTON\t0\t1\tMASSEY\nMARRIED\tMI                        \t0\t3\t1000\t550\t3\t0\t68684\tCU15157                   \tM                         \tProgrammer/Developer\t1000\tMidwest\t1\t1000\tYes\t14\t1\t26\t53.48\t25271.0\t132\t2\t25\t4\tHIGH\tANIBAL\t1\t1\tJIMENEZ\nMARRIED\tUT                        \t0\t5\t1200\t1000\t5\t0\t59354\tCU15286                   \tF                         \tFireman\t2500\tSouthwest\t1\t1200\tNo\t4\t5\t24\t53.08\t19738.5\t628\t3\t619\t1\tMEDIUM\tJUNITA\t1\t1\tROBERTSON\nMARRIED\tUT                        \t0\t4\t1800\t0\t3\t0\t84801\tCU15287                   \tF                         \tPROF-26\t2500\tSouthwest\t1\t1800\tNo\t0\t5\t47\t53.06\t31900.25\t0\t0\t25\t0\tVERY HIGH\tCHASITY\t1\t1\tELLIS\n"}]},"interrupted":false,"jobName":"paragraph_1627066206796_1762505585","id":"20210723-185006_818333345","dateCreated":"2020-12-15T20:36:09+0000","dateStarted":"2021-08-25T03:23:29+0000","dateFinished":"2021-08-25T03:23:29+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:43"},{"title":"Check the unique states","text":"%python\n\nz.show(CUST_DF.crosstab(['STATE']).sort_values('count'))","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:29+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"STATE":"string","count":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"STATE\tcount\nAZ                        \t11\nAK                        \t18\nLA                        \t40\nAL                        \t46\nOK                        \t48\nNM                        \t49\nMO                        \t51\nTX                        \t85\nCO                        \t108\nOH                        \t132\nWI                        \t148\nWA                        \t154\nMS                        \t165\nOR                        \t233\nIL                        \t237\nNC                        \t238\nUT                        \t304\nDC                        \t413\nMN                        \t453\nNV                        \t488\nFL                        \t558\nMI                        \t2402\nCA                        \t2964\nNY                        \t4535\n"}]},"interrupted":false,"jobName":"paragraph_1627066206796_-538316234","id":"20210723-185006_985518846","dateCreated":"2020-12-16T01:04:34+0000","dateStarted":"2021-08-25T03:23:30+0000","dateFinished":"2021-08-25T03:23:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:44"},{"title":"Replace the state names with integers","text":"%python\n\nstate_names = CUST_DF['STATE'].drop_duplicates().pull()\n\nstate_ids = [0]*len(state_names)\n\nfor i in range(len(state_names)):\n    state_ids[i] = float(i)\n    \nCUST_DF = CUST_DF.replace(old = state_names, new = state_ids, default = 0.0, columns = ['STATE'])","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:30+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1627066206796_541719380","id":"20210723-185006_1221418995","dateCreated":"2020-12-15T20:36:42+0000","dateStarted":"2021-08-25T03:23:31+0000","dateFinished":"2021-08-25T03:23:31+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:45"},{"title":"Check the unique states, now encoded to integers","text":"%python\n\nz.show(CUST_DF.crosstab(['STATE']).sort_values('count'))","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:31+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"STATE":"string","count":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"STATE\tcount\n5\t11\n6\t18\n15\t40\n21\t46\n4\t48\n19\t49\n12\t51\n1\t85\n13\t108\n10\t132\n16\t148\n2\t154\n22\t165\n20\t233\n11\t237\n23\t238\n8\t304\n3\t413\n17\t453\n14\t488\n0\t558\n7\t2402\n9\t2964\n18\t4535\n"}]},"interrupted":false,"jobName":"paragraph_1627066206796_-1095525599","id":"20210723-185006_1655408715","dateCreated":"2020-12-15T20:41:47+0000","dateStarted":"2021-08-25T03:23:32+0000","dateFinished":"2021-08-25T03:23:33+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:46"},{"text":"%md\n\n# End of Script\n","user":"OMLUSER","dateUpdated":"2021-08-25T03:23:33+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>End of Script</h1>\n"}]},"interrupted":false,"jobName":"paragraph_1627066206796_-620500615","id":"20210723-185006_1692318065","dateCreated":"2020-12-15T22:00:23+0000","dateStarted":"2021-08-25T03:23:33+0000","dateFinished":"2021-08-25T03:23:33+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:47"},{"text":"%md\n","user":"OMLUSER","dateUpdated":"2021-08-23T21:24:05+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1627066206796_-425782115","id":"20210723-185006_815836470","dateCreated":"2020-12-16T18:12:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:48"}],"name":"OML4Py Data Transformation Categorical","id":"68810","noteParams":{},"noteForms":{},"angularObjects":{"MDW381939C745:shared_process":[],"ORA7A60DC9B32:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}