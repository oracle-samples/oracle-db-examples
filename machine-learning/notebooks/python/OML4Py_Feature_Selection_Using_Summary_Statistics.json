{"paragraphs":[{"text":"%md\r\n## OML4Py Feature Selection: Summary Statistics\r\n\r\nIn this notebook, we demonstrate how to perform feature selection using summary statistics via OML4Py.\r\n\r\nWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\r\n\r\nWe show how to use OML4Py to select features based on number of distinct values, null values, proportion of constant values. \r\n\r\nThe dataset `CUSTOMER_INSURANCE_LTV_PY` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.\r\n\r\n---\r\n\r\n##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.\r\n\r\n---\r\n\r\nCopyright (c) 2021 Oracle Corporation \r\n###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a>\r\n---\r\n","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:17+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h2>OML4Py Feature Selection: Summary Statistics</h2>\n<p>In this notebook, we demonstrate how to perform feature selection using summary statistics via OML4Py.</p>\n<p>We use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.</p>\n<p>We show how to use OML4Py to select features based on number of distinct values, null values, proportion of constant values.</p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV_PY</code> is generated by the <code>\"OML Run-me-first\"</code> notebook, which <code>MUST</code> be run before this notebook.</p>\n<hr />\n<h5><code>IMPORTANT</code>: The <code>\"OML Run-me-first\"</code> notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.</h5>\n<hr />\n<p>Copyright (c) 2021 Oracle Corporation</p>\n<h6><a href=\"https: //oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a></h6>\n<hr />\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_1749979351","id":"20210723-185024_1875531720","dateCreated":"2020-12-15T19:09:37+0000","dateStarted":"2021-08-25T03:53:17+0000","dateFinished":"2021-08-25T03:53:17+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:40"},{"title":"For more information ...","text":"%md\n\nOML4Py documentation on Data Preparation: <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html');\"> https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html </a>","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:18+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>OML4Py documentation on Data Preparation: <a href=\"https: //docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html');\"> https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html </a></p>\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_694335940","id":"20210723-185024_1208186800","dateCreated":"2020-12-17T18:47:23+0000","dateStarted":"2021-08-25T03:53:18+0000","dateFinished":"2021-08-25T03:53:18+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:41"},{"title":"Import libraries and set display options","text":"%python\n\nimport warnings\nwarnings.filterwarnings('ignore')\n\nimport pandas as pd\nimport oml\nfrom oml import automl\n\npd.set_option('display.max_rows', 500)\npd.set_option('display.max_columns', 500)\npd.set_option('display.width', 1000)","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:18+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1627066224248_-698504121","id":"20210723-185024_858096329","dateCreated":"2020-11-17T00:37:19+0000","dateStarted":"2021-08-25T03:53:19+0000","dateFinished":"2021-08-25T03:53:25+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:42"},{"title":"Get proxy object for CUSTOMER_INSURANCE_LTV_PY table","text":"%python\n\nCUST_DF = oml.sync(table = 'CUSTOMER_INSURANCE_LTV_PY')","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:25+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1627066224248_-1025790230","id":"20210723-185024_206883562","dateCreated":"2020-11-17T00:43:34+0000","dateStarted":"2021-08-25T03:53:25+0000","dateFinished":"2021-08-25T03:53:25+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:43"},{"title":"Display a few rows from the table","text":"%python\n\nz.show(CUST_DF.head())","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:25+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"MARITAL_STATUS":"string","STATE":"string","CREDIT_BALANCE":"string","CUSTOMER_TENURE":"string","MORTGAGE_AMOUNT":"string","BANK_FUNDS":"string","NUM_DEPENDENTS":"string","HAS_CHILDREN":"string","INCOME":"string","CUSTOMER_ID":"string","GENDER":"string","PROFESSION":"string","CREDIT_CARD_LIMITS":"string","REGION":"string","HOME_OWNERSHIP":"string","NUM_ONLINE_TRANS":"string","BUY_INSURANCE":"string","MONTHLY_CHECKS":"string","NUM_TRANS_KIOSK":"string","AGE":"string","MONEY_MONTLY_OVERDRAWN":"string","LTV":"string","TOTAL_AUTOM_PAYMENTS":"string","NUM_TRANS_TELLER":"string","CHECKING_BALANCE":"string","NUM_TRANS_ATM":"string","LTV_BIN":"string","FIRST_NAME":"string","NUM_MORTGAGES":"string","CAR_OWNERSHIP":"string","LAST_NAME":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MARITAL_STATUS\tSTATE\tCREDIT_BALANCE\tCUSTOMER_TENURE\tMORTGAGE_AMOUNT\tBANK_FUNDS\tNUM_DEPENDENTS\tHAS_CHILDREN\tINCOME\tCUSTOMER_ID\tGENDER\tPROFESSION\tCREDIT_CARD_LIMITS\tREGION\tHOME_OWNERSHIP\tNUM_ONLINE_TRANS\tBUY_INSURANCE\tMONTHLY_CHECKS\tNUM_TRANS_KIOSK\tAGE\tMONEY_MONTLY_OVERDRAWN\tLTV\tTOTAL_AUTOM_PAYMENTS\tNUM_TRANS_TELLER\tCHECKING_BALANCE\tNUM_TRANS_ATM\tLTV_BIN\tFIRST_NAME\tNUM_MORTGAGES\tCAR_OWNERSHIP\tLAST_NAME\nSINGLE\tCA                        \t0\t3\t400\t590\t3\t1\t61384\tCU8720                    \tM                         \tWaiter/Waitress\t1000\tWest\t1\t400\tYes\t2\t1\t23\t53.98\t18146.0\t208\t2\t25\t5\tMEDIUM\tKENNETH\t1\t1\tNADEAU\nDIVORCED\tWA                        \t0\t3\t2050\t650\t3\t1\t63525\tCU8721                    \tM                         \tSoftware Engineer\t1000\tWest\t1\t2050\tYes\t13\t3\t22\t54.35\t18581.25\t242\t2\t25\t5\tMEDIUM\tJARVIS\t1\t1\tCLARKE\nDIVORCED\tNY                        \t0\t4\t2500\t700\t1\t0\t71504\tCU8722                    \tF                         \tIT Staff\t1000\tNorthEast\t1\t2500\tNo\t1\t1\t42\t53.79\t32076.0\t393\t3\t118\t4\tVERY HIGH\tSTACEY\t1\t1\tHENSON\nMARRIED\tMI                        \t0\t1\t8320\t11050\t1\t1\t72308\tCU8665                    \tF                         \tDentist\t4000\tMidwest\t1\t1700\tYes\t14\t1\t33\t53.97\t24877.0\t650\t4\t25\t5\tHIGH\tMARGRET\t1\t1\tRYAN\nMARRIED\tMI                        \t0\t1\t1000\t0\t1\t1\t64710\tCU8666                    \tM                         \tIT Staff\t700\tMidwest\t1\t1000\tNo\t4\t1\t38\t53.17\t23477.5\t383\t0\t374\t2\tHIGH\tJOAN\t1\t1\tBAUER\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_643094028","id":"20210723-185024_832415935","dateCreated":"2020-11-17T00:43:43+0000","dateStarted":"2021-08-25T03:53:26+0000","dateFinished":"2021-08-25T03:53:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:44"},{"title":"Identify categorical columns","text":"%python\n\ncat_cols = CUST_DF.select_types([oml.core.string.String]).columns\nprint(cat_cols)","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:26+0000","config":{"colWidth":6,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"['MARITAL_STATUS', 'STATE', 'CUSTOMER_ID', 'GENDER', 'PROFESSION', 'REGION', 'BUY_INSURANCE', 'LTV_BIN', 'FIRST_NAME', 'LAST_NAME']\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_-821272940","id":"20210723-185024_1659959243","dateCreated":"2020-11-17T04:20:24+0000","dateStarted":"2021-08-25T03:53:27+0000","dateFinished":"2021-08-25T03:53:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:45"},{"title":"Identify numeric columns","text":"%python\n\nnum_cols = CUST_DF.select_types([oml.core.string.Float]).columns\nprint(num_cols)\n","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:27+0000","config":{"colWidth":6,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"['CREDIT_BALANCE', 'CUSTOMER_TENURE', 'MORTGAGE_AMOUNT', 'BANK_FUNDS', 'NUM_DEPENDENTS', 'HAS_CHILDREN', 'INCOME', 'CREDIT_CARD_LIMITS', 'HOME_OWNERSHIP', 'NUM_ONLINE_TRANS', 'MONTHLY_CHECKS', 'NUM_TRANS_KIOSK', 'AGE', 'MONEY_MONTLY_OVERDRAWN', 'LTV', 'TOTAL_AUTOM_PAYMENTS', 'NUM_TRANS_TELLER', 'CHECKING_BALANCE', 'NUM_TRANS_ATM', 'NUM_MORTGAGES', 'CAR_OWNERSHIP']\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_521829046","id":"20210723-185024_2111570582","dateCreated":"2020-11-17T00:50:00+0000","dateStarted":"2021-08-25T03:53:28+0000","dateFinished":"2021-08-25T03:53:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:46"},{"title":"Check the unique values in each column","text":"%python\n\nunique_counts = CUST_DF.nunique()\nunique_df = pd.DataFrame(unique_counts)\nunique_df = unique_df.reset_index()\nunique_df.columns = ['FEATURE', 'CNT']\nz.show(unique_df)","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:28+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"FEATURE":"string","CNT":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"FEATURE\tCNT\nMARITAL_STATUS\t7\nSTATE\t24\nCREDIT_BALANCE\t963\nCUSTOMER_TENURE\t5\nMORTGAGE_AMOUNT\t1763\nBANK_FUNDS\t1178\nNUM_DEPENDENTS\t7\nHAS_CHILDREN\t2\nINCOME\t6374\nCUSTOMER_ID\t13880\nGENDER\t2\nPROFESSION\t100\nCREDIT_CARD_LIMITS\t33\nREGION\t5\nHOME_OWNERSHIP\t3\nNUM_ONLINE_TRANS\t1504\nBUY_INSURANCE\t2\nMONTHLY_CHECKS\t19\nNUM_TRANS_KIOSK\t11\nAGE\t69\nMONEY_MONTLY_OVERDRAWN\t870\nLTV\t12453\nTOTAL_AUTOM_PAYMENTS\t5071\nNUM_TRANS_TELLER\t10\nCHECKING_BALANCE\t2798\nNUM_TRANS_ATM\t9\nLTV_BIN\t4\nFIRST_NAME\t3740\nNUM_MORTGAGES\t3\nCAR_OWNERSHIP\t2\nLAST_NAME\t1348\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_309408970","id":"20210723-185024_1467323485","dateCreated":"2020-11-17T00:43:51+0000","dateStarted":"2021-08-25T03:53:28+0000","dateFinished":"2021-08-25T03:53:29+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:47"},{"title":"Filter categorical 'identifier' columns - filter out columns with > 95% unique values","text":"%python\n\nselected_cat_cols = []\ntotal = CUST_DF.shape[0]\nratio = 0.95\nfor col in cat_cols:\n    cnt = unique_df[unique_df['FEATURE'] == col]['CNT'].values[0]\n    if cnt > 1 and cnt < ratio*total:\n        selected_cat_cols.append(col)\nprint(selected_cat_cols)\nprint(len(selected_cat_cols))","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:29+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"['MARITAL_STATUS', 'STATE', 'CUSTOMER_ID', 'GENDER', 'PROFESSION', 'REGION', 'BUY_INSURANCE', 'LTV_BIN', 'FIRST_NAME', 'LAST_NAME']\n10\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_1066920600","id":"20210723-185024_200345180","dateCreated":"2020-11-17T00:44:51+0000","dateStarted":"2021-08-25T03:53:30+0000","dateFinished":"2021-08-25T03:53:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:48"},{"title":"To confirm selected column is not an 'identifier',  use crosstab function to display unique values","text":"%python\n\ncol = 'MARITAL_STATUS'\nCUST_DF.crosstab([col])","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:30+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"  MARITAL_STATUS  count\n0          OTHER     96\n1         SINGLE   2530\n2            DIV    337\n3       DIVORCED   2063\n4           None   6627\n5        WIDOWED    475\n6              M    359\n7        MARRIED   2393\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_-870585830","id":"20210723-185024_1851455046","dateCreated":"2020-11-19T14:13:12+0000","dateStarted":"2021-08-25T03:53:30+0000","dateFinished":"2021-08-25T03:53:31+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:49"},{"title":"Create an OML dataframe with selected features only","text":"%python\n\nSELECTED_CAT_DF = CUST_DF[selected_cat_cols]\nz.show(SELECTED_CAT_DF.head())","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:31+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"MARITAL_STATUS":"string","STATE":"string","CUSTOMER_ID":"string","GENDER":"string","PROFESSION":"string","REGION":"string","BUY_INSURANCE":"string","LTV_BIN":"string","FIRST_NAME":"string","LAST_NAME":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MARITAL_STATUS\tSTATE\tCUSTOMER_ID\tGENDER\tPROFESSION\tREGION\tBUY_INSURANCE\tLTV_BIN\tFIRST_NAME\tLAST_NAME\nSINGLE\tCA                        \tCU8720                    \tM                         \tWaiter/Waitress\tWest\tYes\tMEDIUM\tKENNETH\tNADEAU\nDIVORCED\tWA                        \tCU8721                    \tM                         \tSoftware Engineer\tWest\tYes\tMEDIUM\tJARVIS\tCLARKE\nDIVORCED\tNY                        \tCU8722                    \tF                         \tIT Staff\tNorthEast\tNo\tVERY HIGH\tSTACEY\tHENSON\nMARRIED\tMI                        \tCU8665                    \tF                         \tDentist\tMidwest\tYes\tHIGH\tMARGRET\tRYAN\nMARRIED\tMI                        \tCU8666                    \tM                         \tIT Staff\tMidwest\tNo\tHIGH\tJOAN\tBAUER\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_-929145379","id":"20210723-185024_1930396073","dateCreated":"2021-01-21T01:42:23+0000","dateStarted":"2021-08-25T03:53:31+0000","dateFinished":"2021-08-25T03:53:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:50"},{"title":"For all columns, identify columns with > 40% missing values","text":"%python\n\nmany_missing_cols = []\nratio = 0.4\ntotal = CUST_DF.shape[0]\nthreshold = total*ratio\nfor col in CUST_DF.columns:\n    grp = CUST_DF.crosstab([col])\n    if grp[ grp[col].isnull()]:\n        if grp[ grp[col].isnull()].pull()['count'][0] > threshold:\n            many_missing_cols.append(col)\nprint(many_missing_cols)    \n\n","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:32+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"['MARITAL_STATUS', 'CREDIT_BALANCE', 'BANK_FUNDS', 'INCOME']\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_277621643","id":"20210723-185024_144913641","dateCreated":"2020-11-17T01:18:39+0000","dateStarted":"2021-08-25T03:53:32+0000","dateFinished":"2021-08-25T03:53:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:51"},{"title":"Filter 'constant' columns - those with > 90% same values","text":"%python\n\ntotal = CUST_DF.shape[0]\n\nratio = 0.90\n\nmajor_constant_cols = []\nfor col in CUST_DF.columns:\n    GROUP = CUST_DF.crosstab([col])\n    \n    if GROUP[GROUP['count'] > total*ratio]:\n        print(GROUP[GROUP['count'] > total*ratio])\n        major_constant_cols.append(col)\n\nprint(major_constant_cols)","user":"OMLUSER","dateUpdated":"2021-08-25T03:54:51+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"text","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"   CAR_OWNERSHIP  count\n0              1  13859\n['CAR_OWNERSHIP']\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_1269041317","id":"20210723-185024_191037511","dateCreated":"2020-11-17T01:50:44+0000","dateStarted":"2021-08-25T03:54:29+0000","dateFinished":"2021-08-25T03:54:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:52"},{"title":"Create an OML dataframe with 'constant' columns filtered out","text":"%python\n\nselected_cols = [ col for col in CUST_DF.columns if col not in major_constant_cols ]\nSELECTED_DF = CUST_DF[selected_cat_cols]\nz.show(SELECTED_DF.head())","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:54+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"MARITAL_STATUS":"string","STATE":"string","CUSTOMER_ID":"string","GENDER":"string","PROFESSION":"string","REGION":"string","BUY_INSURANCE":"string","LTV_BIN":"string","FIRST_NAME":"string","LAST_NAME":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MARITAL_STATUS\tSTATE\tCUSTOMER_ID\tGENDER\tPROFESSION\tREGION\tBUY_INSURANCE\tLTV_BIN\tFIRST_NAME\tLAST_NAME\nSINGLE\tCA                        \tCU8720                    \tM                         \tWaiter/Waitress\tWest\tYes\tMEDIUM\tKENNETH\tNADEAU\nDIVORCED\tWA                        \tCU8721                    \tM                         \tSoftware Engineer\tWest\tYes\tMEDIUM\tJARVIS\tCLARKE\nDIVORCED\tNY                        \tCU8722                    \tF                         \tIT Staff\tNorthEast\tNo\tVERY HIGH\tSTACEY\tHENSON\nMARRIED\tMI                        \tCU8665                    \tF                         \tDentist\tMidwest\tYes\tHIGH\tMARGRET\tRYAN\nMARRIED\tMI                        \tCU8666                    \tM                         \tIT Staff\tMidwest\tNo\tHIGH\tJOAN\tBAUER\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_1521739530","id":"20210723-185024_842153899","dateCreated":"2021-01-21T01:43:48+0000","dateStarted":"2021-08-25T03:53:55+0000","dateFinished":"2021-08-25T03:53:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:53"},{"text":"%md\n\n# End of Script\n","user":"OMLUSER","dateUpdated":"2021-08-25T03:53:55+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>End of Script</h1>\n"}]},"interrupted":false,"jobName":"paragraph_1627066224248_1962006902","id":"20210723-185024_1035989645","dateCreated":"2020-11-17T01:20:28+0000","dateStarted":"2021-08-25T03:53:56+0000","dateFinished":"2021-08-25T03:53:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:54"},{"text":"%md\n","user":"OMLUSER","dateUpdated":"2021-07-27T15:21:33+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1627066224248_1971162563","id":"20210723-185024_740990383","dateCreated":"2020-12-15T19:09:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:55"}],"name":"OML4Py Feature Selection Using Summary Statistics","id":"68826","noteParams":{},"noteForms":{},"angularObjects":{"MDW381939C745:shared_process":[],"ORA7A60DC9B32:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}