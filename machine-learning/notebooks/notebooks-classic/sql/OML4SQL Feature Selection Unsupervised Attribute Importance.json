{
  "paragraphs": [
    {
      "text": "%md\n\n## OML4SQL Feature Selection: Unsupervised Attribute Importance\nIn this notebook, we demonstrate how to perform feature selection using the in-database unsupervised algorithm Expectation Maximization (EM).\n\nWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\n\nThis example illustrates using the CREATE_MODEL function, which leverages the settings table (in contrast to the CREATE_MODEL2 function used in other notebooks).\n\nThe dataset `CUSTOMER_INSURANCE_LTV_SQL` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.\n\n---\n\n##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -\u003e Examples and is a pre-requisite to the current notebook.\n\n---\n\nCopyright (c) 2023 Oracle Corporation \n###### \u003ca href\u003d\"https://oss.oracle.com/licenses/upl/\" onclick\u003d\"return ! window.open(\u0027https://oss.oracle.com/licenses/upl/\u0027);\"\u003eThe Universal Permissive License (UPL), Version 1.0\u003c/a\u003e\n---",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch2\u003eOML4SQL Feature Selection: Unsupervised Attribute Importance\u003c/h2\u003e\n\u003cp\u003eIn this notebook, we demonstrate how to perform feature selection using the in-database unsupervised algorithm Expectation Maximization (EM).\u003c/p\u003e\n\u003cp\u003eWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\u003c/p\u003e\n\u003cp\u003eThis example illustrates using the CREATE_MODEL function, which leverages the settings table (in contrast to the CREATE_MODEL2 function used in other notebooks).\u003c/p\u003e\n\u003cp\u003eThe dataset \u003ccode\u003eCUSTOMER_INSURANCE_LTV_SQL\u003c/code\u003e is generated by the \u003ccode\u003e\"OML Run-me-first\"\u003c/code\u003e notebook, which \u003ccode\u003eMUST\u003c/code\u003e be run before this notebook.\u003c/p\u003e\n\u003chr /\u003e\n\u003ch5\u003e\u003ccode\u003eIMPORTANT\u003c/code\u003e: The \u003ccode\u003e\"OML Run-me-first\"\u003c/code\u003e notebook is available under the menu Templates -\u003e Examples and is a pre-requisite to the current notebook.\u003c/h5\u003e\n\u003chr /\u003e\n\u003cp\u003eCopyright (c) 2023 Oracle Corporation\u003c/p\u003e\n\u003ch6\u003e\u003ca href\u003d\"https: //oss.oracle.com/licenses/upl/\" onclick\u003d\"return ! window.open(\u0027https://oss.oracle.com/licenses/upl/\u0027);\"\u003eThe Universal Permissive License (UPL), Version 1.0\u003c/a\u003e\u003c/h6\u003e\n\u003chr /\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_252906028",
      "id": "20220124-201424_848250170",
      "dateCreated": "2020-12-16T19:45:18+0000",
      "dateStarted": "2023-02-17T01:31:32+0000",
      "dateFinished": "2023-02-17T01:31:32+0000",
      "status": "FINISHED"
    },
    {
      "title": "For more information ...",
      "text": "%md\n\nOracle ADW Documentation \u003ca href\u003d\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\u0027);\"\u003ehttps://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\u003c/a\u003e\nOML folder on Oracle Github : \u003ca href\u003d\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" onclick\u003d\"return ! window.open(\u0027https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\u0027);\"\u003ehttps://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\u003c/a\u003e\nOML web page: \u003ca href\u003d\"https://www.oracle.com/machine-learning\" onclick\u003d\"return ! window.open(\u0027https://www.oracle.com/machine-learning\u0027);\"\u003ehttps://www.oracle.com/machine-learning\u003c/a\u003e\nOML Expectation Maximization: \u003ca href\u003d\"https://oracle.com/goto/ml-expectation-maximization\" onclick\u003d\"return ! window.open(\u0027https://oracle.com/goto/ml-expectation-maximization\u0027);\"\u003ehttps://oracle.com/goto/ml-expectation-maximization\u003c/a\u003e",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cp\u003eOracle ADW Documentation \u003ca href\u003d\"https: //docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\u0027);\"\u003ehttps://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\u003c/a\u003e\n\u003cbr  /\u003eOML folder on Oracle Github : \u003ca href\u003d\"https: //github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" onclick\u003d\"return ! window.open(\u0027https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\u0027);\"\u003ehttps://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\u003c/a\u003e\n\u003cbr  /\u003eOML web page: \u003ca href\u003d\"https: //www.oracle.com/machine-learning\" onclick\u003d\"return ! window.open(\u0027https://www.oracle.com/machine-learning\u0027);\"\u003ehttps://www.oracle.com/machine-learning\u003c/a\u003e\n\u003cbr  /\u003eOML Expectation Maximization: \u003ca href\u003d\"https: //oracle.com/goto/ml-expectation-maximization\" onclick\u003d\"return ! window.open(\u0027https://oracle.com/goto/ml-expectation-maximization\u0027);\"\u003ehttps://oracle.com/goto/ml-expectation-maximization\u003c/a\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_-1974579461",
      "id": "20220124-201424_371382814",
      "dateCreated": "2020-12-17T03:57:02+0000",
      "dateStarted": "2023-02-17T01:31:32+0000",
      "dateFinished": "2023-02-17T01:31:32+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n\n### Examples of possible setting overrides for Expectation-Maximization clustering\n\nIf the user does not override the default settings, then relevant settings are determined by the algorithm.\n\nA complete list of settings can be found in the Documentation link:\n\n-- Algorithm Settings: \u003ca href\u003d\"https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8\u0027);\"\u003e Expectation-Maximization clustering\u003c/a\u003e\n\n-- Shared Settings: \u003ca href\u003d\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B\u0027);\"\u003eAll algorithms\u003c/a\u003e\n\n-- Machine Learning Settings: \u003ca href\u003d\"https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12\u0027);\"\u003e ML settings \u003c/a\u003e\n\n-- Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is `ODMS_MISSING_VALUE_AUTO`.  The option `ODMS_MISSING_VALUE_MEAN_MODE` replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option `ODMS_MISSING_VALUE_AUTO` performs different strategies for different algorithms.  When `ODMS_MISSING_VALUE_TREATMENT` is set to `ODMS_MISSING_VALUE_DELETE_ROW`, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.\n    v_setlst(\u0027ODMS_MISSING_VALUE_TREATMENT\u0027) :\u003d \u0027ODMS_MISSING_VALUE_AUTO\u0027;\n    \n--  Specify the maximum number of leaf clusters generated by a clustering algorithm. \n  The algorithm may return fewer clusters, depending on the data. Expectation maximization (EM) may return fewer clusters than the number specified by CLUS_NUM_CLUSTERS depending on the data. The number of clusters returned by EM cannot be greater than the number of components, which is governed by algorithm-specific settings (see Expectation Maximization Settings for Learning table).  Depending on these settings, there may be fewer clusters than components. If component clustering is disabled, the number of clusters equals the number of components.  \n  For EM, the default value of CLUS_NUM_CLUSTERS is system-determined. For k-Means and O-Cluster, the default is 10. \n     v_setlst(\u0027CLUS_NUM_CLUSTERS\u0027)       :\u003d \u00275\u0027;\n\n#### Expectation Maximization Settings for Learning     \n-- Specify this setting to enable model search in EM where different model sizes are explored and a best size is selected.\n  It requires `EMCS_MODEL_SEARCH_ENABLE` or `EMCS_MODEL_SEARCH_DISABLE`.  The default is `EMCS_MODEL_SEARCH_DISABLE`.      \n     v_setlst(\u0027EMCS_MODEL_SEARCH\u0027)       :\u003d \u0027EMCS_MODEL_SEARCH_ENABLE\u0027;\n\n-- Specify the maximum number of iterations in the EM algorithm.\n  It requires a number larger than 1.  The default is 100. \n    v_setlst(\u0027EMCS_NUM_ITERATIONS\u0027)     :\u003d \u002720\u0027;\n\n     \n#### Expectation Maximization Settings for Cluster Statistics\n--  Specify whether to enable or disable the gathering of descriptive statistics for clusters (centroids, histograms, and rules).  When statistics are disabled, model size is reduced, and `GET_MODEL_DETAILS_EM` only returns taxonomy (hierarchy) and cluster counts.\n  It requires either `EMCS_CLUS_STATS_ENABLE` or `EMCS_CLUS_STATS_DISABLE`.  Default is `EMCS_CLUS_STATS_ENABLE`.     \n     v_setlst(\u0027EMCS_CLUSTER_STATISTICS\u0027) :\u003d \u0027EMCS_CLUS_STATS_ENABLE\u0027;\n     \n#### Expectation Maximization Settings for Data Preparation and Analysis\n-- Specify the number of quantile bins that will be used for modeling numeric columns with multivalued Bernoulli distributions.\n  It requires a number larger than 1 and up to 255 (inclusive).  The default is system-determined.\n     v_setlst(\u0027EMCS_NUM_QUANTILE_BINS\u0027)  :\u003d \u002710\u0027;\n\n---",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch3\u003eExamples of possible setting overrides for Expectation-Maximization clustering\u003c/h3\u003e\n\u003cp\u003eIf the user does not override the default settings, then relevant settings are determined by the algorithm.\u003c/p\u003e\n\u003cp\u003eA complete list of settings can be found in the Documentation link:\u003c/p\u003e\n\u003cp\u003e\u0026ndash; Algorithm Settings: \u003ca href\u003d\"https: //docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8\u0027);\"\u003e Expectation-Maximization clustering\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u0026ndash; Shared Settings: \u003ca href\u003d\"https: //docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B\u0027);\"\u003eAll algorithms\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u0026ndash; Machine Learning Settings: \u003ca href\u003d\"https: //docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12\u0027);\"\u003e ML settings \u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u0026ndash; Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is \u003ccode\u003eODMS_MISSING_VALUE_AUTO\u003c/code\u003e.  The option \u003ccode\u003eODMS_MISSING_VALUE_MEAN_MODE\u003c/code\u003e replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option \u003ccode\u003eODMS_MISSING_VALUE_AUTO\u003c/code\u003e performs different strategies for different algorithms.  When \u003ccode\u003eODMS_MISSING_VALUE_TREATMENT\u003c/code\u003e is set to \u003ccode\u003eODMS_MISSING_VALUE_DELETE_ROW\u003c/code\u003e, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ev_setlst(\u0027ODMS_MISSING_VALUE_TREATMENT\u0027) :\u003d \u0027ODMS_MISSING_VALUE_AUTO\u0027;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u0026ndash;  Specify the maximum number of leaf clusters generated by a clustering algorithm.\n\u003cbr  /\u003eThe algorithm may return fewer clusters, depending on the data. Expectation maximization (EM) may return fewer clusters than the number specified by CLUS_NUM_CLUSTERS depending on the data. The number of clusters returned by EM cannot be greater than the number of components, which is governed by algorithm-specific settings (see Expectation Maximization Settings for Learning table).  Depending on these settings, there may be fewer clusters than components. If component clustering is disabled, the number of clusters equals the number of components.\n\u003cbr  /\u003eFor EM, the default value of CLUS_NUM_CLUSTERS is system-determined. For k-Means and O-Cluster, the default is 10.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e v_setlst(\u0027CLUS_NUM_CLUSTERS\u0027)       :\u003d \u00275\u0027;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4\u003eExpectation Maximization Settings for Learning\u003c/h4\u003e\n\u003cp\u003e\u0026ndash; Specify this setting to enable model search in EM where different model sizes are explored and a best size is selected.\n\u003cbr  /\u003eIt requires \u003ccode\u003eEMCS_MODEL_SEARCH_ENABLE\u003c/code\u003e or \u003ccode\u003eEMCS_MODEL_SEARCH_DISABLE\u003c/code\u003e.  The default is \u003ccode\u003eEMCS_MODEL_SEARCH_DISABLE\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e v_setlst(\u0027EMCS_MODEL_SEARCH\u0027)       :\u003d \u0027EMCS_MODEL_SEARCH_ENABLE\u0027;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u0026ndash; Specify the maximum number of iterations in the EM algorithm.\n\u003cbr  /\u003eIt requires a number larger than 1.  The default is 100.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ev_setlst(\u0027EMCS_NUM_ITERATIONS\u0027)     :\u003d \u002720\u0027;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4\u003eExpectation Maximization Settings for Cluster Statistics\u003c/h4\u003e\n\u003cp\u003e\u0026ndash;  Specify whether to enable or disable the gathering of descriptive statistics for clusters (centroids, histograms, and rules).  When statistics are disabled, model size is reduced, and \u003ccode\u003eGET_MODEL_DETAILS_EM\u003c/code\u003e only returns taxonomy (hierarchy) and cluster counts.\n\u003cbr  /\u003eIt requires either \u003ccode\u003eEMCS_CLUS_STATS_ENABLE\u003c/code\u003e or \u003ccode\u003eEMCS_CLUS_STATS_DISABLE\u003c/code\u003e.  Default is \u003ccode\u003eEMCS_CLUS_STATS_ENABLE\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e v_setlst(\u0027EMCS_CLUSTER_STATISTICS\u0027) :\u003d \u0027EMCS_CLUS_STATS_ENABLE\u0027;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4\u003eExpectation Maximization Settings for Data Preparation and Analysis\u003c/h4\u003e\n\u003cp\u003e\u0026ndash; Specify the number of quantile bins that will be used for modeling numeric columns with multivalued Bernoulli distributions.\n\u003cbr  /\u003eIt requires a number larger than 1 and up to 255 (inclusive).  The default is system-determined.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e v_setlst(\u0027EMCS_NUM_QUANTILE_BINS\u0027)  :\u003d \u002710\u0027;\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr /\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1676596505545_1873860566",
      "id": "paragraph_1676596505545_1873860566",
      "dateCreated": "2023-02-17T01:15:05+0000",
      "dateStarted": "2023-02-17T01:31:33+0000",
      "dateFinished": "2023-02-17T01:31:33+0000",
      "status": "FINISHED"
    },
    {
      "title": "Build the EM Clustering model with explicit settings of 1 cluster (for Feature Selection)",
      "text": "%script\n\n-- Note that additional settings are available in the documentation\n\nBEGIN DBMS_DATA_MINING.DROP_MODEL(\u0027EM_FEAT_SELECTION\u0027);\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\nDECLARE\n    V_SETLST DBMS_DATA_MINING.SETTING_LIST;\nBEGIN\n    V_SETLST(\u0027ALGO_NAME\u0027)               :\u003d \u0027ALGO_EXPECTATION_MAXIMIZATION\u0027;\n    V_SETLST(\u0027PREP_AUTO\u0027)               :\u003d \u0027ON\u0027;\n    V_SETLST(\u0027CLUS_NUM_CLUSTERS\u0027)       :\u003d \u00271\u0027;\n    V_SETLST(\u0027EMCS_MODEL_SEARCH\u0027)       :\u003d \u0027EMCS_MODEL_SEARCH_ENABLE\u0027;\n    V_SETLST(\u0027EMCS_CLUSTER_STATISTICS\u0027) :\u003d \u0027EMCS_CLUS_STATS_ENABLE\u0027;\n    V_SETLST(\u0027EMCS_NUM_ITERATIONS\u0027)     :\u003d \u002720\u0027;\n    V_SETLST(\u0027EMCS_NUM_QUANTILE_BINS\u0027)  :\u003d \u002710\u0027;\n    V_SETLST(\u0027EMCS_RANDOM_SEED\u0027)        :\u003d \u0027123456\u0027;\n\n    DBMS_DATA_MINING.CREATE_MODEL2(\n        MODEL_NAME          \u003d\u003e \u0027EM_FEAT_SELECTION\u0027,\n        MINING_FUNCTION     \u003d\u003e \u0027CLUSTERING\u0027,\n        DATA_QUERY          \u003d\u003e \u0027SELECT * FROM CUSTOMER_INSURANCE_LTV\u0027,\n        SET_LIST            \u003d\u003e V_SETLST,\n        CASE_ID_COLUMN_NAME \u003d\u003e \u0027CUSTOMER_ID\u0027);\nEND;\n",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "plsql",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/plsql",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1676596558977_665152976",
      "id": "paragraph_1676596558977_665152976",
      "dateCreated": "2023-02-17T01:15:58+0000",
      "dateStarted": "2023-02-17T01:31:33+0000",
      "dateFinished": "2023-02-17T01:31:41+0000",
      "status": "FINISHED"
    },
    {
      "title": " Check the attribute ranks in the model view",
      "text": "%sql\n\nSELECT   ATTRIBUTE_RANK,\n         ATTRIBUTE_NAME, \n         ROUND(ATTRIBUTE_IMPORTANCE_VALUE, 4) IMPORTANCE_VALUE \nFROM     DM$VIEM_FEAT_SELECTION\nORDER BY ATTRIBUTE_RANK;",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false
        },
        "colWidth": 6.0,
        "editorMode": "ace/mode/osql",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "ATTRIBUTE_NAME": "string",
                      "IMPORTANCE_VALUE": "number",
                      "ATTRIBUTE_RANK": "number"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "ATTRIBUTE_RANK\tATTRIBUTE_NAME\tIMPORTANCE_VALUE\n1\tHOME_OWNERSHIP\t0.3408\n2\tNUM_MORTGAGES\t0.3406\n3\tMORTGAGE_AMOUNT\t0.3359\n4\tCUSTOMER_TENURE\t0.2928\n5\tLTV\t0.2893\n6\tLTV_BIN\t0.2876\n7\tNUM_DEPENDENTS\t0.2874\n8\tMARITAL_STATUS\t0.2725\n9\tNUM_ONLINE_TRANS\t0.2476\n10\tNUM_TRANS_ATM\t0.2422\n11\tSTATE\t0.2358\n12\tMONEY_MONTLY_OVERDRAWN\t0.2328\n13\tREGION\t0.2307\n14\tGENDER\t0.208\n15\tBANK_FUNDS\t0.1897\n16\tNUM_TRANS_TELLER\t0.1573\n17\tTOTAL_AUTOM_PAYMENTS\t0.1238\n18\tCAR_OWNERSHIP\t0.1161\n19\tBUY_INSURANCE\t0.1045\n20\tHAS_CHILDREN\t0.1027\n21\tPROFESSION\t0.0999\n22\tAGE\t0.0826\n23\tMONTHLY_CHECKS\t0.0811\n24\tCREDIT_CARD_LIMITS\t0.0675\n25\tCHECKING_BALANCE\t0.062\n26\tNUM_TRANS_KIOSK\t0.0406\n27\tINCOME\t0.0342\n28\tCREDIT_BALANCE\t0.027\n29\tFIRST_NAME\t0.0062\n30\tLAST_NAME\t0.0044\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1676596741893_1693070149",
      "id": "paragraph_1676596741893_1693070149",
      "dateCreated": "2023-02-17T01:19:01+0000",
      "dateStarted": "2023-02-17T01:31:41+0000",
      "dateFinished": "2023-02-17T01:31:41+0000",
      "status": "FINISHED"
    },
    {
      "title": " Check the top 10 attributes by importance",
      "text": "%sql\n\nSELECT   ATTRIBUTE_RANK,\n         ATTRIBUTE_NAME, \n         ROUND(ATTRIBUTE_IMPORTANCE_VALUE, 4) IMPORTANCE_VALUE \nFROM     DM$VIEM_FEAT_SELECTION\nORDER BY ATTRIBUTE_RANK\nFETCH FIRST 10 ROWS ONLY",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false
        },
        "colWidth": 6.0,
        "editorMode": "ace/mode/osql",
        "fontSize": 9.0,
        "editorHide": false,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "multiBarChart",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "ATTRIBUTE_NAME": "string",
                      "IMPORTANCE_VALUE": "number",
                      "ATTRIBUTE_RANK": "number"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                },
                "multiBarChart": {
                  "rotate": {
                    "degree": "-45"
                  },
                  "xLabelStatus": "rotate"
                }
              },
              "commonSetting": {},
              "keys": [
                {
                  "name": "ATTRIBUTE_NAME",
                  "index": 1.0,
                  "aggr": "sum"
                }
              ],
              "groups": [],
              "values": [
                {
                  "name": "IMPORTANCE_VALUE",
                  "index": 2.0,
                  "aggr": "sum"
                }
              ]
            },
            "helium": {}
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "ATTRIBUTE_RANK\tATTRIBUTE_NAME\tIMPORTANCE_VALUE\n1\tHOME_OWNERSHIP\t0.3408\n2\tNUM_MORTGAGES\t0.3406\n3\tMORTGAGE_AMOUNT\t0.3359\n4\tCUSTOMER_TENURE\t0.2928\n5\tLTV\t0.2893\n6\tLTV_BIN\t0.2876\n7\tNUM_DEPENDENTS\t0.2874\n8\tMARITAL_STATUS\t0.2725\n9\tNUM_ONLINE_TRANS\t0.2476\n10\tNUM_TRANS_ATM\t0.2422\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1676596853619_1031623870",
      "id": "paragraph_1676596853619_1031623870",
      "dateCreated": "2023-02-17T01:20:53+0000",
      "dateStarted": "2023-02-17T01:31:41+0000",
      "dateFinished": "2023-02-17T01:31:41+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n\n## Alternative approach to creating en Expectation Maximization clustering model using a settings table\n\nThe settings table is an alternative way to specify algorithm settings to build the model. We first drop the table, create it, and then populate it with settings before building the model. \n\n---\n",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch2\u003eAlternative approach to creating en Expectation Maximization clustering model using a settings table\u003c/h2\u003e\n\u003cp\u003eThe settings table is an alternative way to specify algorithm settings to build the model. We first drop the table, create it, and then populate it with settings before building the model.\u003c/p\u003e\n\u003chr /\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1676597151600_2037008748",
      "id": "paragraph_1676597151600_2037008748",
      "dateCreated": "2023-02-17T01:25:51+0000",
      "dateStarted": "2023-02-17T01:31:41+0000",
      "dateFinished": "2023-02-17T01:31:41+0000",
      "status": "FINISHED"
    },
    {
      "title": "Create setting table",
      "text": "%script\n\nBEGIN EXECUTE IMMEDIATE \u0027DROP TABLE EM_LTV_SAMPLE_SETTINGS\u0027;\nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\nCREATE TABLE EM_LTV_SAMPLE_SETTINGS (\n   SETTING_NAME  VARCHAR2(30),\n   SETTING_VALUE VARCHAR2(4000));",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "plsql",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/plsql",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nTable EM_LTV_SAMPLE_SETTINGS created.\n\n\n---------------------------\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_-208519026",
      "id": "20220124-201424_1785716583",
      "dateCreated": "2020-12-23T18:32:37+0000",
      "dateStarted": "2023-02-17T01:31:41+0000",
      "dateFinished": "2023-02-17T01:31:41+0000",
      "status": "FINISHED"
    },
    {
      "title": "Add settings, set the number of maximum clusters to be 1",
      "text": "%script\n\nBEGIN       \n   INSERT INTO EM_LTV_SAMPLE_SETTINGS (SETTING_NAME, SETTING_VALUE) VALUES (DBMS_DATA_MINING.ALGO_NAME, DBMS_DATA_MINING.ALGO_EXPECTATION_MAXIMIZATION);\n   INSERT INTO EM_LTV_SAMPLE_SETTINGS (SETTING_NAME, SETTING_VALUE) VALUES (DBMS_DATA_MINING.PREP_AUTO, DBMS_DATA_MINING.PREP_AUTO_ON);\n   INSERT INTO EM_LTV_SAMPLE_SETTINGS (SETTING_NAME, SETTING_VALUE) VALUES (DBMS_DATA_MINING.CLUS_NUM_CLUSTERS,1);\nEND;\n/",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "plsql",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/plsql",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_1287030431",
      "id": "20220124-201424_578937221",
      "dateCreated": "2020-12-23T18:32:25+0000",
      "dateStarted": "2023-02-17T01:31:42+0000",
      "dateFinished": "2023-02-17T01:31:42+0000",
      "status": "FINISHED"
    },
    {
      "title": "Create EM model",
      "text": "%script\n\nBEGIN DBMS_DATA_MINING.DROP_MODEL(\u0027EM_LTV_CLUS_SAMPLE\u0027);\nEXCEPTION WHEN OTHERS THEN NULL; END;\n\nBEGIN\n  DBMS_DATA_MINING.CREATE_MODEL(\n    MODEL_NAME          \u003d\u003e \u0027EM_LTV_CLUS_SAMPLE\u0027,\n    MINING_FUNCTION     \u003d\u003e DBMS_DATA_MINING.CLUSTERING,\n    DATA_TABLE_NAME     \u003d\u003e \u0027CUSTOMER_INSURANCE_LTV_SQL\u0027,\n    CASE_ID_COLUMN_NAME \u003d\u003e \u0027CUSTOMER_ID\u0027,\n    SETTINGS_TABLE_NAME \u003d\u003e \u0027EM_LTV_SAMPLE_SETTINGS\u0027);\nEND;\n/",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "plsql",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/plsql",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_452351850",
      "id": "20220124-201424_577977825",
      "dateCreated": "2020-11-22T00:53:04+0000",
      "dateStarted": "2023-02-17T01:31:42+0000",
      "dateFinished": "2023-02-17T01:31:51+0000",
      "status": "FINISHED"
    },
    {
      "title": " The attribute ranks can be found in the model view",
      "text": "%sql\n \nSELECT   ATTRIBUTE_NAME, ROUND(ATTRIBUTE_IMPORTANCE_VALUE, 4) IMPORTANCE_VALUE, ATTRIBUTE_RANK\nFROM     DM$VIEM_LTV_CLUS_SAMPLE \nORDER BY ATTRIBUTE_RANK;",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "sql",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/osql",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "ATTRIBUTE_NAME": "string",
                      "IMPORTANCE_VALUE": "number",
                      "ATTRIBUTE_RANK": "number"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "ATTRIBUTE_NAME\tIMPORTANCE_VALUE\tATTRIBUTE_RANK\nHOME_OWNERSHIP\t0.3372\t1\nNUM_MORTGAGES\t0.3369\t2\nMORTGAGE_AMOUNT\t0.3007\t3\nLTV\t0.2985\t4\nLTV_BIN\t0.2966\t5\nCUSTOMER_TENURE\t0.2919\t6\nNUM_DEPENDENTS\t0.2863\t7\nNUM_TRANS_ATM\t0.2372\t8\nNUM_ONLINE_TRANS\t0.2366\t9\nSTATE\t0.2365\t10\nREGION\t0.2314\t11\nMONEY_MONTLY_OVERDRAWN\t0.2277\t12\nMARITAL_STATUS\t0.2261\t13\nBANK_FUNDS\t0.2061\t14\nGENDER\t0.2004\t15\nCREDIT_BALANCE\t0.1633\t16\nINCOME\t0.1618\t17\nTOTAL_AUTOM_PAYMENTS\t0.1185\t18\nCAR_OWNERSHIP\t0.1126\t19\nNUM_TRANS_TELLER\t0.1092\t20\nHAS_CHILDREN\t0.1018\t21\nPROFESSION\t0.0945\t22\nBUY_INSURANCE\t0.087\t23\nAGE\t0.0782\t24\nMONTHLY_CHECKS\t0.0773\t25\nCREDIT_CARD_LIMITS\t0.0738\t26\nCHECKING_BALANCE\t0.0622\t27\nNUM_TRANS_KIOSK\t0.0468\t28\nLAST_NAME\t0.0279\t29\nFIRST_NAME\t0.0071\t30\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_-181594878",
      "id": "20220124-201424_1638303602",
      "dateCreated": "2020-11-22T00:56:45+0000",
      "dateStarted": "2023-02-17T01:31:51+0000",
      "dateFinished": "2023-02-17T01:31:52+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n\n# End of Script\n",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch1\u003eEnd of Script\u003c/h1\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_1974468169",
      "id": "20220124-201424_1965484230",
      "dateCreated": "2020-11-22T00:56:04+0000",
      "dateStarted": "2023-02-17T01:31:52+0000",
      "dateFinished": "2023-02-17T01:31:52+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n",
      "user": "OMLUSER",
      "dateUpdated": "2023-02-17T01:31:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055264210_-485696615",
      "id": "20220124-201424_1485222446",
      "dateCreated": "2020-12-23T18:34:47+0000",
      "dateStarted": "2023-02-17T01:31:52+0000",
      "dateFinished": "2023-02-17T01:31:52+0000",
      "status": "FINISHED"
    }
  ],
  "name": "OML4SQL Feature Selection Unsupervised Attribute Importance",
  "id": "101050",
  "defaultInterpreterGroup": "spark",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {
    "ORA7A60DC9B32:OMLUSER-101050": [],
    "MDW381939C745:shared_process": []
  },
  "config": {
    "looknfeel": "default",
    "personalizedMode": "false"
  },
  "info": {
    "isRunning": false
  }
}