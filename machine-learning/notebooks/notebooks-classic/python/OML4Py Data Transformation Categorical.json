{
  "paragraphs": [
    {
      "text": "%md\r\n## OML4Py Data Transformation: convert categorical variables to numeric variables\r\n\r\nIn this notebook, we demonstrate how to convert categorical variables to numeric variables using OML4Py.\r\n\r\nWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\r\n\r\nWe show how to convert a categorical variable with each distinct level/value coded to an integer data type. \r\n\r\nThe dataset `CUSTOMER_INSURANCE_LTV` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.\r\n\r\n---\r\n\r\n##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -\u003e Examples and is a pre-requisite to the current notebook.\r\n\r\n---\r\n\r\n\r\nCopyright (c) 2022 Oracle Corporation \r\n###### \u003ca href\u003d\"https://oss.oracle.com/licenses/upl/\" onclick\u003d\"return ! window.open(\u0027https://oss.oracle.com/licenses/upl/\u0027);\"\u003eThe Universal Permissive License (UPL), Version 1.0\u003c/a\u003e\r\n---",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:35+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch2\u003eOML4Py Data Transformation: convert categorical variables to numeric variables\u003c/h2\u003e\n\u003cp\u003eIn this notebook, we demonstrate how to convert categorical variables to numeric variables using OML4Py.\u003c/p\u003e\n\u003cp\u003eWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\u003c/p\u003e\n\u003cp\u003eWe show how to convert a categorical variable with each distinct level/value coded to an integer data type.\u003c/p\u003e\n\u003cp\u003eThe dataset \u003ccode\u003eCUSTOMER_INSURANCE_LTV\u003c/code\u003e is generated by the \u003ccode\u003e\"OML Run-me-first\"\u003c/code\u003e notebook, which \u003ccode\u003eMUST\u003c/code\u003e be run before this notebook.\u003c/p\u003e\n\u003chr /\u003e\n\u003ch5\u003e\u003ccode\u003eIMPORTANT\u003c/code\u003e: The \u003ccode\u003e\"OML Run-me-first\"\u003c/code\u003e notebook is available under the menu Templates -\u003e Examples and is a pre-requisite to the current notebook.\u003c/h5\u003e\n\u003chr /\u003e\n\u003cp\u003eCopyright (c) 2022 Oracle Corporation\u003c/p\u003e\n\u003ch6\u003e\u003ca href\u003d\"https: //oss.oracle.com/licenses/upl/\" onclick\u003d\"return ! window.open(\u0027https://oss.oracle.com/licenses/upl/\u0027);\"\u003eThe Universal Permissive License (UPL), Version 1.0\u003c/a\u003e\u003c/h6\u003e\n\u003chr /\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_-1243404927",
      "id": "20220124-201421_960606510",
      "dateCreated": "2020-12-16T18:13:00+0000",
      "dateStarted": "2022-03-10T16:57:36+0000",
      "dateFinished": "2022-03-10T16:57:37+0000",
      "status": "FINISHED"
    },
    {
      "title": "For more information ...",
      "text": "%md\n\nOML4Py documentation on Data Preparation: \u003ca href\u003d\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\u0027);\"\u003e https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html \u003c/a\u003e",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:37+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": false,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003cp\u003eOML4Py documentation on Data Preparation: \u003ca href\u003d\"https: //docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\" onclick\u003d\"return ! window.open(\u0027https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html\u0027);\"\u003e https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/about-preparing-data.html \u003c/a\u003e\u003c/p\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_1176033730",
      "id": "20220124-201421_1805993101",
      "dateCreated": "2020-12-17T18:37:51+0000",
      "dateStarted": "2022-03-10T16:57:38+0000",
      "dateFinished": "2022-03-10T16:57:38+0000",
      "status": "FINISHED"
    },
    {
      "title": "Import python libraries and set display options",
      "text": "%python\n\nimport warnings\nwarnings.filterwarnings(\u0027ignore\u0027)\n\nimport pandas as pd\nimport oml\nfrom oml import automl\n\npd.set_option(\u0027display.max_rows\u0027, 500)\npd.set_option(\u0027display.max_columns\u0027, 500)\npd.set_option(\u0027display.width\u0027, 1000)",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:38+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_-1479239198",
      "id": "20220124-201421_1928161577",
      "dateCreated": "2020-12-15T20:35:15+0000",
      "dateStarted": "2022-03-10T16:57:39+0000",
      "dateFinished": "2022-03-10T16:57:48+0000",
      "status": "FINISHED"
    },
    {
      "title": "Overview of the data",
      "text": "%python\n\nCUST_DF \u003d oml.sync(table \u003d \u0027CUSTOMER_INSURANCE_LTV\u0027)\nz.show(CUST_DF.head())",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:48+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "MARITAL_STATUS": "string",
                      "STATE": "string",
                      "CREDIT_BALANCE": "string",
                      "CUSTOMER_TENURE": "string",
                      "MORTGAGE_AMOUNT": "string",
                      "BANK_FUNDS": "string",
                      "NUM_DEPENDENTS": "string",
                      "HAS_CHILDREN": "string",
                      "INCOME": "string",
                      "CUSTOMER_ID": "string",
                      "GENDER": "string",
                      "PROFESSION": "string",
                      "CREDIT_CARD_LIMITS": "string",
                      "REGION": "string",
                      "HOME_OWNERSHIP": "string",
                      "NUM_ONLINE_TRANS": "string",
                      "BUY_INSURANCE": "string",
                      "MONTHLY_CHECKS": "string",
                      "NUM_TRANS_KIOSK": "string",
                      "AGE": "string",
                      "MONEY_MONTLY_OVERDRAWN": "string",
                      "LTV": "string",
                      "TOTAL_AUTOM_PAYMENTS": "string",
                      "NUM_TRANS_TELLER": "string",
                      "CHECKING_BALANCE": "string",
                      "NUM_TRANS_ATM": "string",
                      "LTV_BIN": "string",
                      "FIRST_NAME": "string",
                      "NUM_MORTGAGES": "string",
                      "CAR_OWNERSHIP": "string",
                      "LAST_NAME": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "MARITAL_STATUS\tSTATE\tCREDIT_BALANCE\tCUSTOMER_TENURE\tMORTGAGE_AMOUNT\tBANK_FUNDS\tNUM_DEPENDENTS\tHAS_CHILDREN\tINCOME\tCUSTOMER_ID\tGENDER\tPROFESSION\tCREDIT_CARD_LIMITS\tREGION\tHOME_OWNERSHIP\tNUM_ONLINE_TRANS\tBUY_INSURANCE\tMONTHLY_CHECKS\tNUM_TRANS_KIOSK\tAGE\tMONEY_MONTLY_OVERDRAWN\tLTV\tTOTAL_AUTOM_PAYMENTS\tNUM_TRANS_TELLER\tCHECKING_BALANCE\tNUM_TRANS_ATM\tLTV_BIN\tFIRST_NAME\tNUM_MORTGAGES\tCAR_OWNERSHIP\tLAST_NAME\nSINGLE\tCA                        \t0\t3\t0\t0\t3\t0\t65871\tCU15154                   \tM                         \tNurse\t1000\tWest\t0\t0\tNo\t0\t1\t24\t53.06\t14367.75\t0\t0\t25\t0\tMEDIUM\tGAYLE\t0\t0\tDURANT\nSINGLE\tNY                        \t0\t4\t0\t290\t4\t0\t68747\tCU15155                   \tM                         \tProgrammer/Developer\t700\tNorthEast\t0\t0\tYes\t1\t1\t35\t53.84\t14686.75\t287\t2\t25\t4\tMEDIUM\tQUINTON\t0\t1\tMASSEY\nMARRIED\tMI                        \t0\t3\t1000\t550\t3\t0\t68684\tCU15157                   \tM                         \tProgrammer/Developer\t1000\tMidwest\t1\t1000\tYes\t14\t1\t26\t53.48\t25271.0\t132\t2\t25\t4\tHIGH\tANIBAL\t1\t1\tJIMENEZ\nMARRIED\tUT                        \t0\t5\t1200\t1000\t5\t0\t59354\tCU15286                   \tF                         \tFireman\t2500\tSouthwest\t1\t1200\tNo\t4\t5\t24\t53.08\t19738.5\t628\t3\t619\t1\tMEDIUM\tJUNITA\t1\t1\tROBERTSON\nMARRIED\tUT                        \t0\t4\t1800\t0\t3\t0\t84801\tCU15287                   \tF                         \tPROF-26\t2500\tSouthwest\t1\t1800\tNo\t0\t5\t47\t53.06\t31900.25\t0\t0\t25\t0\tVERY HIGH\tCHASITY\t1\t1\tELLIS\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_1014748507",
      "id": "20220124-201421_1514715869",
      "dateCreated": "2020-12-15T20:36:09+0000",
      "dateStarted": "2022-03-10T16:57:49+0000",
      "dateFinished": "2022-03-10T16:57:49+0000",
      "status": "FINISHED"
    },
    {
      "title": "Check the unique states",
      "text": "%python\n\nz.show(CUST_DF.crosstab([\u0027STATE\u0027]).sort_values(\u0027count\u0027))",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:49+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "STATE": "string",
                      "count": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "STATE\tcount\nAZ                        \t11\nAK                        \t18\nLA                        \t40\nAL                        \t46\nOK                        \t48\nNM                        \t49\nMO                        \t51\nTX                        \t85\nCO                        \t108\nOH                        \t132\nWI                        \t148\nWA                        \t154\nMS                        \t165\nOR                        \t233\nIL                        \t237\nNC                        \t238\nUT                        \t304\nDC                        \t413\nMN                        \t453\nNV                        \t488\nFL                        \t558\nMI                        \t2402\nCA                        \t2964\nNY                        \t4535\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_661408061",
      "id": "20220124-201421_1857337467",
      "dateCreated": "2020-12-16T01:04:34+0000",
      "dateStarted": "2022-03-10T16:57:50+0000",
      "dateFinished": "2022-03-10T16:57:50+0000",
      "status": "FINISHED"
    },
    {
      "title": "Replace the state names with integers",
      "text": "%python\n\nstate_names \u003d CUST_DF[\u0027STATE\u0027].drop_duplicates().pull()\n\nstate_ids \u003d [0]*len(state_names)\n\nfor i in range(len(state_names)):\n    state_ids[i] \u003d float(i)\n    \nCUST_DF \u003d CUST_DF.replace(old \u003d state_names, new \u003d state_ids, default \u003d 0.0, columns \u003d [\u0027STATE\u0027])",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:50+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_423296644",
      "id": "20220124-201421_804526092",
      "dateCreated": "2020-12-15T20:36:42+0000",
      "dateStarted": "2022-03-10T16:57:51+0000",
      "dateFinished": "2022-03-10T16:57:52+0000",
      "status": "FINISHED"
    },
    {
      "title": "Check the unique states, now encoded to integers",
      "text": "%python\n\nz.show(CUST_DF.crosstab([\u0027STATE\u0027]).sort_values(\u0027count\u0027))",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:52+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9.0,
        "title": true,
        "results": {
          "0": {
            "graph": {
              "mode": "table",
              "height": 300.0,
              "optionOpen": false,
              "setting": {
                "table": {
                  "tableGridState": {},
                  "tableColumnTypeState": {
                    "names": {
                      "STATE": "string",
                      "count": "string"
                    },
                    "updated": false
                  },
                  "tableOptionSpecHash": "[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]",
                  "tableOptionValue": {
                    "useFilter": false,
                    "showPagination": false,
                    "showAggregationFooter": false
                  },
                  "updated": false,
                  "initialized": false
                }
              },
              "commonSetting": {}
            }
          }
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TABLE",
            "data": "STATE\tcount\n22\t11\n13\t18\n21\t40\n11\t46\n9\t48\n10\t49\n6\t51\n19\t85\n7\t108\n4\t132\n0\t148\n5\t154\n12\t165\n3\t233\n18\t237\n15\t238\n23\t304\n8\t413\n1\t453\n20\t488\n17\t558\n14\t2402\n16\t2964\n2\t4535\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_1027984307",
      "id": "20220124-201421_910788858",
      "dateCreated": "2020-12-15T20:41:47+0000",
      "dateStarted": "2022-03-10T16:57:52+0000",
      "dateFinished": "2022-03-10T16:57:53+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n\n# End of Script\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:53+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "\u003ch1\u003eEnd of Script\u003c/h1\u003e\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_-1799434154",
      "id": "20220124-201421_700994236",
      "dateCreated": "2020-12-15T22:00:23+0000",
      "dateStarted": "2022-03-10T16:57:54+0000",
      "dateFinished": "2022-03-10T16:57:54+0000",
      "status": "FINISHED"
    },
    {
      "text": "%md\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-03-10T16:57:54+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12.0,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9.0,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1643055261679_-1902140887",
      "id": "20220124-201421_1651789982",
      "dateCreated": "2020-12-16T18:12:21+0000",
      "dateStarted": "2022-03-10T16:57:54+0000",
      "dateFinished": "2022-03-10T16:57:54+0000",
      "status": "FINISHED"
    }
  ],
  "name": "OML4Py Data Transformation Categorical",
  "id": "101027",
  "defaultInterpreterGroup": "spark",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {
    "MDW381939C745:shared_process": [],
    "ORA7A60DC9B32:shared_process": []
  },
  "config": {
    "looknfeel": "default",
    "personalizedMode": "false"
  },
  "info": {
    "isRunning": false
  }
}