{
  "paragraphs": [
    {
      "text": "%md\r\n## Oracle Machine Learning for R - Data Cleaning - Duplicates Removal\r\nOracle Machine Learning for R (OML4R) makes the open source R scripting language and environment ready for the enterprise and big data. Designed for problems involving both large and small data volumes, OML4R integrates R with Oracle Autonomous Database, allowing users to run R commands and scripts for statistical, machine learning, and visualization analyses on database tables and views using R syntax. Many familiar R functions are overloaded that translate R behavior into SQL for running in-database.\r\n\r\nIn this notebook, we demonstrate how to remove duplicate records using OML4R.\r\nWe use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\r\nThe dataset CUSTOMER_INSURANCE_LTV is generated by the \"OML Run-me-first\" notebook, which MUST be run before this notebook.\r\n\r\n---\r\n##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.\r\n---\r\nCopyright (c) 2022 Oracle Corporation \r\n###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a>\r\n---\r\n\r\nImport R libraries and obtain a proxy object for the data table to perform duplicate removal in the database.\r\nNote that users can get online help using R's help function and specifying the function of interest.",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:13+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9,
        "editorHide": true,
        "results": {},
        "graph": {
          "mode": "table",
          "height": 300,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "<h2>Oracle Machine Learning for R - Data Cleaning - Duplicates Removal</h2>\n<p>Oracle Machine Learning for R (OML4R) makes the open source R scripting language and environment ready for the enterprise and big data. Designed for problems involving both large and small data volumes, OML4R integrates R with Oracle Autonomous Database, allowing users to run R commands and scripts for statistical, machine learning, and visualization analyses on database tables and views using R syntax. Many familiar R functions are overloaded that translate R behavior into SQL for running in-database.</p>\n<p>In this notebook, we demonstrate how to remove duplicate records using OML4R.\n<br  />We use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\n<br  />The dataset CUSTOMER_INSURANCE_LTV is generated by the &ldquo;OML Run-me-first&rdquo; notebook, which MUST be run before this notebook.</p>\n<hr />\n<h5><code>IMPORTANT</code>: The <code>\"OML Run-me-first\"</code> notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.</h5>\n<hr />\n<p>Copyright (c) 2022 Oracle Corporation</p>\n<h6><a href=\"https: //oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a></h6>\n<hr />\n<p>Import R libraries and obtain a proxy object for the data table to perform duplicate removal in the database.\n<br  />Note that users can get online help using R's help function and specifying the function of interest.</p>\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_-1586208400",
      "id": "20220624-204559_1672350253",
      "dateCreated": "2022-05-16T18:14:41+0000",
      "dateStarted": "2022-07-29T17:01:13+0000",
      "dateFinished": "2022-07-29T17:01:14+0000",
      "status": "FINISHED",
      "focus": true,
      "$$hashKey": "object:41"
    },
    {
      "title": "Import libraries",
      "text": "%r\n\nlibrary(ORE)\nlibrary(OREdplyr)\noptions(ore.warn.order=FALSE)\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:14+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "TEXT",
            "data": "\nAttaching package: ‘OREdplyr’\n\n\nThe following objects are masked from ‘package:dplyr’:\n\n    arrange, arrange_, count, count_, cume_dist, dense_rank, desc,\n    distinct, distinct_, filter, filter_, first, full_join, group_by,\n    group_by_, group_size, groups, inner_join, last, left_join,\n    min_rank, mutate, mutate_, n, n_distinct, n_groups, nth, ntile,\n    percent_rank, rename, rename_, right_join, row_number, sample_frac,\n    sample_n, select, select_, slice, slice_, summarise, summarise_,\n    tally, top_n, transmute, transmute_, ungroup\n\n\nThe following object is masked from ‘package:stats’:\n\n    filter\n\n\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_-873315769",
      "id": "20220624-204559_1241672867",
      "dateCreated": "2022-05-16T18:18:48+0000",
      "dateStarted": "2022-07-29T17:01:15+0000",
      "dateFinished": "2022-07-29T17:01:29+0000",
      "status": "FINISHED",
      "$$hashKey": "object:42"
    },
    {
      "title": "Get proxy object for CUSTOMER_INSURANCE_LTV table",
      "text": "%r\n\nore.sync(table = 'CUSTOMER_INSURANCE_LTV_R', use.keys= FALSE)\nore.attach()\n\nCUST_DF <- CUSTOMER_INSURANCE_LTV_R",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:29+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": []
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_1607730118",
      "id": "20220624-204559_1980538535",
      "dateCreated": "2022-05-16T18:19:56+0000",
      "dateStarted": "2022-07-29T17:01:29+0000",
      "dateFinished": "2022-07-29T17:01:30+0000",
      "status": "FINISHED",
      "$$hashKey": "object:43"
    },
    {
      "title": "Get the distinct rows from the dataset",
      "text": "%r\n\nn_distinct(CUST_DF$CUSTOMER_ID)\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:30+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "13880"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_1814751534",
      "id": "20220624-204559_1740403257",
      "dateCreated": "2022-05-16T18:21:39+0000",
      "dateStarted": "2022-07-29T17:01:30+0000",
      "dateFinished": "2022-07-29T17:01:30+0000",
      "status": "FINISHED",
      "$$hashKey": "object:44"
    },
    {
      "title": "Show table dimensions - note there are more rows than customer IDs",
      "text": "%r\n\ndim(CUST_DF)\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:30+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "<style>\n.list-inline {list-style: none; margin:0; padding: 0}\n.list-inline>li {display: inline-block}\n.list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n</style>\n<ol class=list-inline><li>14880</li><li>31</li></ol>\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_460261901",
      "id": "20220624-204559_1959846785",
      "dateCreated": "2022-05-16T18:22:44+0000",
      "dateStarted": "2022-07-29T17:01:30+0000",
      "dateFinished": "2022-07-29T17:01:31+0000",
      "status": "FINISHED",
      "$$hashKey": "object:45"
    },
    {
      "title": "Remove duplicate rows and check the number of unique customer IDs",
      "text": "%r\n\nCUST_DF2 <- distinct(CUST_DF)\n\nnrow(CUST_DF2)\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:31+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "13880"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_-976380907",
      "id": "20220624-204559_770633420",
      "dateCreated": "2022-05-16T18:22:39+0000",
      "dateStarted": "2022-07-29T17:01:31+0000",
      "dateFinished": "2022-07-29T17:01:31+0000",
      "status": "FINISHED",
      "$$hashKey": "object:46"
    },
    {
      "title": "Check dimensions of the OML dataframe - duplicate rows removed",
      "text": "%r\n\ndim(CUST_DF2)\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:31+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "text",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/undefined",
        "fontSize": 9,
        "title": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "<style>\n.list-inline {list-style: none; margin:0; padding: 0}\n.list-inline>li {display: inline-block}\n.list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n</style>\n<ol class=list-inline><li>13880</li><li>31</li></ol>\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_-495682858",
      "id": "20220624-204559_1001137171",
      "dateCreated": "2022-05-16T18:31:23+0000",
      "dateStarted": "2022-07-29T17:01:31+0000",
      "dateFinished": "2022-07-29T17:01:32+0000",
      "status": "FINISHED",
      "$$hashKey": "object:47"
    },
    {
      "text": "%md\n# End of script\n",
      "user": "OMLUSER",
      "dateUpdated": "2022-07-29T17:01:32+0000",
      "progress": 0,
      "config": {
        "editorSetting": {
          "language": "md",
          "editOnDblClick": false
        },
        "colWidth": 12,
        "editorMode": "ace/mode/markdown",
        "fontSize": 9,
        "editorHide": true,
        "results": {},
        "enabled": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "results": {
        "code": "SUCCESS",
        "msg": [
          {
            "type": "HTML",
            "data": "<h1>End of script</h1>\n"
          }
        ]
      },
      "apps": [],
      "interrupted": false,
      "runtimeInfos": {},
      "progressUpdateIntervalMs": 500,
      "jobName": "paragraph_1656103559587_-1339247604",
      "id": "20220624-204559_1209205772",
      "dateCreated": "2022-05-16T18:17:10+0000",
      "dateStarted": "2022-07-29T17:01:32+0000",
      "dateFinished": "2022-07-29T17:01:32+0000",
      "status": "FINISHED",
      "$$hashKey": "object:48"
    }
  ],
  "name": "OML4R Data Cleaning Duplicate Removal",
  "id": "18950",
  "defaultInterpreterGroup": "spark",
  "noteParams": {},
  "noteForms": {},
  "angularObjects": {
    "ORA8A6C520D18:MARK-18950": [],
    "MDWD9201D2221:MARK-18950": []
  },
  "config": {
    "looknfeel": "default",
    "personalizedMode": "false"
  },
  "info": {
    "isRunning": false
  },
  "path": "/OML4R Data Cleaning Duplicate Removal"
}