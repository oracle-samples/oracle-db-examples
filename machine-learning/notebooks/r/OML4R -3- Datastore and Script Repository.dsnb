[{"layout":null,"template":null,"templateConfig":null,"name":"OML4R -3- Datastore and Script Repository","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# Oracle Machine Learning for R - Datastore and Script Repository","","***Oracle Machine Learning for R*** (OML4R) makes the open source R scripting language and environment ready for the enterprise and big data. Designed for problems involving both large and small data volumes, OML4R integrates R with Oracle Autonomous Database, allowing users to run R commands and scripts for statistical, machine learning, and visualization analyses on database tables and views using R syntax. Many familiar R functions are overloaded that translate R behavior into SQL for running in-database.","","In this notebook, we highlight the datastore and script repository features of OML4R.","","With a datastore, you can store R objects in a named datastore entry. This named datastore can then be used in subsequent R sessions and even be made available to other users or programs by granting/revoking read permissions.","","R objects, including OML4R proxy objects, exist for the duration of the current R session unless you explicitly save them. You can save one or more R objects, including OML4R proxy objects, to a named datastore and then load those objects in a later R session. This is also useful when using embedded R execution. Datastores exist in the user\u2019s Oracle Database schema. A datastore, and the objects it contains, persist in the database until explicitly deleted.","","Using a datastore, you can:","","* Save OML4R and other R objects in one R session and load them in another R session","* Pass non-scalar arguments to R functions for use in embedded R execution from both the R, and more importantly, the SQL API where only scalar values can be passed to functions","* List available datastores and explore the contents of a datastore","","With the script repository, users can:","","* Create and store user-defined R functions as scripts in Oracle Database","* Grant or revoke the read/execute privilege to a script","* List available scripts","* Load a script function into the R environment","* Drop a script from the script repository","","You can make scripts either private or global. A private script is available only to the owner. A global script is available to any user. For private scripts, the owner of the script may grant the read privilege to other users or revoke that privilege.","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Import R libraries and create a data table","message":["","%md","","To use OML4R, first import the library ORE.","","Users can get online help using R's help function and specifying the function of interest."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Import libraries","message":["%r","","library(ORE)","library(MASS)  # for Boston data set"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{\"height\":300,\"lastColumns\":[],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"raw","title":"View the help file for the ore.move function","message":["%r","","?ore.move"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Delete datastore myDataStore1 if it exists","message":["%r","","try(ore.delete(\"myDatastore1\"), silent=TRUE)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Delete datastore mynewDataStore1 if it exists","message":["%r","","try(ore.delete(\"myNewDatastore1\"), silent=TRUE)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create datastore myDatastore1","message":["%r","","# create simple example R objects","x <- stats::runif(20)","y <- list(a = 1, b = TRUE, c = \"value\")","z <- ore.push(x)  # create a temporary object for x in the database and return proxy object","","# save all objects in current R environment to datastore 'myDatastore' in user's schema","ore.save(x, y, z, name='myDatastore1',","         description = 'my first datastore')","","# list information about datastores in user's schema","ore.datastore('myDatastore1')","","# show detailed object information about datastore 'myDatastore'","ore.datastoreSummary(name='myDatastore1')"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Rename the datastore and object within the datastore","message":["%r","","#rename a datastore","ore.move(name='myDatastore1', newname='myNewDatastore1')","","#rename objects within a datastore, overwriting existing objects of the same name","ore.move(name='myNewDatastore1', ","         object.names=c(\"x\", \"y\"), ","         object.newnames=c(\"x.new\", \"y.new\"),","         overwrite = TRUE)","         ","ore.datastoreSummary(name='myNewDatastore1')"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Create dataframes and load them into Autonomous Database","","We load three data sets, then invoke create and display the columns for each. These will be used in exploring datastore functionality."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create IRIS temporary database table and get proxy object","message":["%r","","IRIS_TMP <- ore.push(iris)","","z.show(colnames(IRIS_TMP))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":4,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create MTCARS temporary data table","message":["%r","","MTCARS_TMP <- ore.push(mtcars)  ","","z.show(colnames(MTCARS_TMP))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":4,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create AIR temporary data table","message":["%r","","AIR_TMP <- ore.push(airquality)","","z.show(colnames(AIR_TMP))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":4,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Save R objects to datastore","","Save the original *iris* data set and the temporary AIR proxy object to a datastore named \u201cds_rdata\u201d, overwriting if the named datastore already exists. Note that you can store actual data objects in a datastore, but large data objects should remain as database tables for performance and scalability.","","By storing the AIR_TMP object, the temporary table will not be deleted when the session terminates."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%r","","ore.save(iris, AIR_TMP, name=\"ds_rdata\", description=\"r datasets\", overwrite=TRUE)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Add a third object, the temporary MTCARS proxy object, to that same datastore","message":["%r","","ore.save(MTCARS_TMP, name=\"ds_rdata\", append=TRUE)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Save the IRIS_TMP data frame to a new datastore and list datastores","message":["%md","","Save the *IRIS_TMP* data frame to a new datastore, and then list the datastores. Notice we see the datastore name, the number of objects in the datastore, the size in bytes consumed, when the datastore was create/updated, and any description provided by the user. Our two datastores *ds_iris_proxy* and *ds_rdata* are present, with the latter containing three objects."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%r","","ore.save(IRIS_TMP, name=\"ds_iris_proxy\", description=\"iris data.frame proxy object\", overwrite=TRUE)","","ore.datastore()"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Store model objects in a datastore","","To illustrate storing other types of objects in datastores, we'll create regression models using base R and OML4R."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%r","","regr1 <- lm(medv ~ ., data = Boston)","","regr2 <- ore.odmGLM(formula = Ozone ~ Wind+Temp, data = AIR_TMP)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Save objects to datastore and grant read privilege","message":["%md","","Save objects to a datastore and allow the read privilege to be granted to them. ","","Then grant the read privilege to all users by specifying user=None. Finally list the datastores to which the read privilege has been granted."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Save objects to datastore","message":["%r","","ore.save(regr1, regr2, name=\"ds_rmodel\", grantable=TRUE, overwrite=TRUE)","","ore.datastore()"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Grant read privilege to datastore","message":["%r","","ore.grant(name=\"ds_rmodel\", type=\"datastore\", user=NULL)","","ore.datastore(type=\"grantable\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Load datastore objects into memory","","Load all R objects from a datastore to the global workspace and sort the result by name, first removing the objects regr1 and regr2 from the current environment prior to loading them from the datastore. "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Remove objects from current environment","message":["%r","","rm(regr1, regr2)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Load objects from datastore","message":["%r","","z.show(sort(ore.load(name=\"ds_rdata\")))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Load R object from datastore to the current workspace and verify it is loaded","message":["%r","","ore.load(name=\"ds_rmodel\", list=c(\"regr2\"))","'regr2' %in% ls()"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Load object regr1 from the datastore to a new environment named 'e'","message":["%r","","e <- new.env()","ore.load(name=\"ds_rmodel\", list=c(\"regr1\"), envir=e)","ls(envir=e)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Show datastores and other details","message":["%r","","ore.datastore(type=\"all\")[,c(\"owner\", \"datastore.name\", \"object.count\")]"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Show datastores where other users have been granted read privilege","message":["%r","","ore.datastore(type=\"grant\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Show datastores where the user has been granted read privilege (there are none)","message":["%r","","ore.datastore(type=\"granted\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Show datstores whose names match a pattern","message":["%r","","ore.datastore(pattern=\"rdata\")[, c(\"datastore.name\", \"object.count\")]"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Describe the contents of ds_iris_proxy datastore","message":["%r","","ore.datastoreSummary(name=\"ds_iris_proxy\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### User privileges on a datastore","","Revoke the read privilege from every user, and again show datastores to which read privilege has been granted. The result is empty."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%r","","ore.revoke(name=\"ds_rmodel\", type=\"datastore\", user=NULL)","","ore.datastore(type=\"grant\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Grant read privilege to user OMLUSER2","message":["%r","","ore.grant(name=\"ds_rmodel\", type=\"datastore\", user=\"OMLUSER2\")","","ore.datastore(type=\"grant\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Delete datastore content","","Delete some objects from the datastore. Delete a datastore. Show the existing datastores again."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%r","","ore.delete(name=\"ds_rdata\", list=c(\"iris\", \"AIR_TMP\"))","","ore.delete(name=\"ds_rdata\")","","ore.delete(name=\"ds_rmodel\") ","","ore.datastore()"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### R Script Repository","","To illustrate using the R Script Repository, we first define a function ***build_lm1*** that will fit a regression model. With this function, we create a script named \u201cMyLM_function1\u201d. OML4R stores named user-defined functions -- the scripts -- in the repository."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Define function object","message":["%r","","build_lm1 <- function(dat){","  ","  regr <- lm(Sepal.Length  ~ ., data=dat)","  ","  return(regr)","}"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"View function","message":["%r","","build_lm1"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Create scripts in repository","","Create ***MyLM_function1*** in the script repository"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%r","","ore.scriptDrop(\"MyLM_function1\", silent=TRUE)","","ore.scriptCreate(\"MyLM_function1\", FUN=build_lm1, overwrite=TRUE)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":300,\"lastColumns\":[\"NAME\",\"SCRIPT\"]}}]","hideInIFrame":false,"selectedVisualization":"html","title":"List scripts available only to the current user","message":["%r","","ore.scriptList(type=\"user\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Grant read privilege to the MyLM_function1 script to user OMLUSER2","message":["%r","","ore.grant(name=\"MyLM_function1\", type=\"rqscript\", \"OMLUSER2\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"List the scripts which read privilege has been granted","message":["%r","","ore.scriptList(type=\"grant\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Revoke the read privilege to the MyLM_function1 script from the user OMLUSER2","message":["%r","","ore.revoke(name=\"MyLM_function1\", type=\"rqscript\", user=\"OMLUSER2\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Invoke function using embedded R execution","","We'll use embedded R execution to invoke this function. First we get a proxy object to the IRIS table. then we use ***tableApply***, providing the proxy object and function name. We'll view the result and then pull the coefficients."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Get IRIS proxy object","message":["%r","","ore.sync(table=\"IRIS_R\")","","IRIS <- IRIS_R"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Use tableApply to provide full IRIS data set to function","message":["%r","","res <- ore.tableApply(IRIS, FUN.NAME=\"MyLM_function1\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show model coefficients","message":["%r","","res_df <- data.frame(attribute = names(res$coefficients), coefficients = res$coefficients)","","z.show(res_df)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Storing functions as 'global'","","Let's define and save another function ***build_lm2***, but this time as global. We'll then invoke that function to build another model."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%r","","build_lm2 <- function(dat){","  ","  regr <- lm(Petal.Width  ~ Petal.Length, data=dat)","  ","  return(regr)","}"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Store function as a global script","message":["%r","","ore.scriptCreate(\"MyGlobalLM_function\", FUN=build_lm2, overwrite=TRUE, global=TRUE)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Invoke tableApply on the global script","message":["%r","","res <- ore.tableApply(IRIS, FUN.NAME=\"MyGlobalLM_function\")","","res"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":300,\"lastColumns\":[\"NAME\",\"SCRIPT\"]}}]","hideInIFrame":false,"selectedVisualization":"html","title":"List scripts available to the current user","message":["%r","","ore.scriptList()"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":300,\"lastColumns\":[\"OWNER\",\"NAME\",\"SCRIPT\"]}}]","hideInIFrame":false,"selectedVisualization":"html","title":"List all scripts available to the current user","message":["%r","","ore.scriptList(type='all')"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":300,\"lastColumns\":[\"NAME\",\"SCRIPT\"]}}]","hideInIFrame":false,"selectedVisualization":"html","title":"List scripts available to all users","message":["%r","","ore.scriptList(type=\"global\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Loading functions from the script repository","","Load the MyLM_function1 and MyGlobalLM_function scripts, and pull the models to the local R session. Build the models on the IRIS data set and pull the coefficients."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{\"height\":300,\"lastColumns\":[],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%r","","ore.scriptLoad(name=\"MyLM_function1\", newname = \"MYLM\")","ore.scriptLoad(name=\"MyGlobalLM_function\", newname = \"GlobalMYLM\")","","cat(\"MYLM: \\n\")","MYLM(iris)","cat(\"\\n\\nGlobalMYLM: \\n\")","GlobalMYLM(iris)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Drop scripts from repository","","Drop one of the private scripts.","","Drop the global script.","","List the available scripts again."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":300,\"lastColumns\":[\"OWNER\",\"NAME\",\"SCRIPT\"]}}]","hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%r","","ore.scriptDrop(\"MyLM_function1\")","ore.scriptDrop(\"MyGlobalLM_function\", global=TRUE)","ore.scriptList(type=\"all\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":false,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]