[{"layout":null,"template":null,"templateConfig":null,"name":"OML4R Data Cleaning Missing Data","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","# OML4R Data Cleaning: Fill in Missing Data","","In this notebook, we demonstrate how to perform missing value replacement using OML4R.","","We use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance. ","","The dataset `CUSTOMER_INSURANCE_LTV_R` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.","","---","","###### IMPORTANT: The `\"OML Run-me-first\"` notebook is available under the menu `Templates -> Examples` and is a pre-requisite to the current notebook.","","---","","**Note**: when building or applying a model using in-database Oracle Machine Learning algorithms, this operation may *not* be needed separately if automatic data preparation is enabled. Automatic data preparation automatically replaces missing values of numerical attributes with the mean and missing values of categorical attributes with the mode. For example, see <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/23/dmcon/generalized-linear-model.html#GUID-19B8E133-0029-4892-88BB-3E1C9E83EB12\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/23/dmcon/generalized-linear-model.html#GUID-19B8E133-0029-4892-88BB-3E1C9E83EB12');\"> Data Preparation for GLM <\/a>","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---","","Import R libraries and obtain a proxy object to the data table.","To use OML4R, first import the library ORE.","Users can get online help using R's help function and specifying the function of interest."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Import libraries","message":["%r","","library(ORE)","options(ore.warn.order=FALSE)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Get proxy object for CUSTOMER_INSURANCE_LTV_R table and view a few rows","message":["%r","","ore.sync(table = 'CUSTOMER_INSURANCE_LTV_R', use.keys= FALSE)","ore.attach()","","CUST_DF <- CUSTOMER_INSURANCE_LTV_R","","z.show(head(CUST_DF, 10))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Assign row names to enable row indexing","message":["%r","","rownames(CUST_DF) <- CUST_DF$CUSTOMER_ID"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{\"height\":50,\"lastColumns\":[],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"raw","title":"Data overview","message":["%r","","summary(CUST_DF)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Columns MARITAL_STATUS, CREDIT_BALANCE, BANK_FUNDS, and INCOME have missing values","message":["%r","","MISS_VAL <- CUST_DF[ , c(\"CUSTOMER_ID\", \"MARITAL_STATUS\", \"CREDIT_BALANCE\", \"BANK_FUNDS\", \"INCOME\")]","z.show(head(is.na(MISS_VAL)))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Determine number missing in each column","message":["%r","","z.show(ore.summary(MISS_VAL, c(\"MARITAL_STATUS\", \"CREDIT_BALANCE\", \"BANK_FUNDS\", \"INCOME\"), stats = c(\"nmiss\")))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"REPLACE NA with \u2018SINGLE\u2019  for MARITAL_STATUS and missing numericals with the mean","message":["%r","","MISS_VAL$MARITAL_STATUS[is.na(MISS_VAL$MARITAL_STATUS)] <- \"SINGLE\"","","MISS_VAL$CREDIT_BALANCE[is.na(MISS_VAL$CREDIT_BALANCE)] <- round(mean(MISS_VAL$CREDIT_BALANCE, na.rm = TRUE),2)","MISS_VAL$BANK_FUNDS[is.na(MISS_VAL$BANK_FUNDS)] <- round(mean(MISS_VAL$BANK_FUNDS, na.rm = TRUE),2)","MISS_VAL$INCOME[is.na(MISS_VAL$INCOME)] <- round(mean(MISS_VAL$INCOME, na.rm = TRUE),2)"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check for missing data","message":["%r","","z.show(ore.summary(MISS_VAL, c(\"MARITAL_STATUS\", \"CREDIT_BALANCE\", \"BANK_FUNDS\", \"INCOME\"), stats = c(\"nmiss\")))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show the OML data frame after the replacement","message":["%r","","z.show(MISS_VAL[2053:2059, c('CUSTOMER_ID', 'MARITAL_STATUS', 'BANK_FUNDS', 'CREDIT_BALANCE', 'INCOME')])"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","## End of script"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":[],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]