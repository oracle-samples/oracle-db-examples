[{"layout":null,"template":null,"templateConfig":null,"name":"OML Batch Scoring REST","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML Batch Scoring REST","","On Oracle Autonomous Database, data scientists can build machine learning models that reside in the database where, for example, they can be used immediately from SQL queries for scoring data, both in batch and for real-time applications. Oracle Machine Learning Services (OML Services) enables deploying those same models through REST endpoints hosted through Oracle Autonomous Database to enable both real-time, and now batch, scoring.","","The batch scoring capability complements OML Services scoring functionality for singleton and small batch scoring using synchronous REST APIs, where input data is provided as part of the payload and the output was returned in the response. Using asynchronous requests and specified as tables or views through Autonomous data, user can score large volume data. Both the data source and scoring results remain in the user's schema and scoring occurs directly in the database for optimal efficiency. ","","OML Services supports batch scoring for regression, classification, clustering, and feature extraction.","","### **Batch Scoring workflow**","","In this notebook we highlight the following features of batch scoring through the REST interface:","","* Authenticate the database user and obtain a token","* Create a batch scoring job","* View the details and output of the batch scoring job","* Update, disable, and delete a batch scoring job","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":0,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md","","* <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-batch-scoring-examples.html\" target=\"_blank\">OML Batch Scoring<\/a>","* <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/index.html\" target=\"_blank\">OML Services REST API<\/a>","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Website<\/a>","* <a href=\"https://asktom.oracle.com/pls/apex/asktom.search?oh=13662\" target=\"_blank\">OML Services Demonstration<\/a>"],"enabled":true,"result":{"startTime":1715376485714,"interpreter":"md.low","endTime":1715376485787,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-batch-scoring-examples.html\" target=\"_blank\">OML Batch Scoring<\/a><\/li>\n<li><a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/index.html\" target=\"_blank\">OML Services REST API<\/a><\/li>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Website<\/a><\/li>\n<li><a href=\"https://asktom.oracle.com/pls/apex/asktom.search?oh=13662\" target=\"_blank\">OML Services Demonstration<\/a><\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Before you begin","message":["%md","","This notebook walks through the steps to run batch scoring jobs through a REST interface via OML Services.","","If you are unfamiliar with OML Services and its REST interface, the links above as well as the following guided lab are a great way to become aquainted: <a href=\"https://asktom.oracle.com/pls/apex/asktom.search?oh=13662\" onclick=\"return ! window.open('https://asktom.oracle.com/pls/apex/asktom.search?oh=13662');\">OML Services Lab<\/a>","","The **cURL** commands provided in this notebook are for illustrative purposes only. To run REST calls, use **cURL** in a Linux or Mac terminal or another REST client such as Postman."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Get an access token","message":["%md","","To send requests to OML Services, you must obtain an authentication token by using your Oracle Machine Learning account credentials. To authenticate and obtain a token, use **cURL** with the **-d** option to pass the credentials for your Oracle Machine Learning account against the Oracle Machine Learning user management cloud service REST endpoint */oauth2/v1/token*. ","","    $ curl -X POST --header 'Content-Type: application/json' \\","           --header 'Accept: application/json' \\","           -d '{\"grant_type\":\"password\", \"username\":\"'<yourusername>'\",\"password\":\"'<yourpassword>'\"}' ","            \"<OML service URL>/omlusers/api/oauth2/v1/token\"","    ","where   ","","* _-X POST_ specifies to use a POST request when communicating with the HTTP server","* _--header_ defines the headers required for the request (application/json)","* _-d <data>_ sends the username and password authentication credentials as data in a POST request to the HTTP server","* _Content-Type_ and _Accept_ define the response format (JSON)","* _yourusername_ is the user name of a Oracle Machine Learning user with the default OML_DEVELOPER role","* _yourpassword_ is the password for the user name","* _OML service URL_ is the REST server portion of the Oracle Machine Learning user management cloud service instance"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create a batch scoring job ","message":["%md","","Now that you have an access token, you can send a request to OML Services to create a batch scoring job. This request is sent to the */omlmod/v1/jobs* endpoint as a **POST** request. Below is a listing of the parameters that can be specified for a batch scoring job, divided into those that are required and those that are optional. ","","**Required**:","* _jobName_ specifies the name of the submitted job.","* _jobType_ specifies the type of job to be run, which is MODEL_SCORING for batch scoring jobs. ","* _inputData_ is the name of the table or view to read input for the batch scoring job.","* _outputData_ is the results table in the format {jobID}_{outputData} storing the batch scoring results.","* _modelId_ is the ID for the model used for scoring.","* _supplementalColumnNames_ is an array of columns from the input table or view that is used to identify rows in the output table.","","**Optional**:","* _jobStartDate_ is the start date and time for the job run. If not specified, the job runs immediately.","* _jobEndDate_ is the end date and time for the job run.","* _disableJob_ is a flag to disable the job at submission. If not set, the the job is enabled at submission.","* _maxRuns_ is the number of times the job will run according to the schedule.","* _inputSchemaName_ is the database schema that owns the input table or view. If not specified, the input schema will be the same as the user that obtained the token.","* _outputSchemaName_ is the database schema that owns the output table. If not specified the output schema will be the same as the input schema.","* _jobDescription_ is a description of the job provided by the user.","* _jobServiceLevel_ is the database service level for the job, which can be LOW, MEDIUM, or HIGH. ","* _recompute_ is a flag whether to update already computed periods. The default is False, meaning only time periods not present in the output result table will be computed. ","* _topN_ filters the results for classification by returning the highest N probabilities, or for clustering, returning the N most probable cluster assignments.","* _topNDetails_ provide prediction details contributing to the probability scores.","* _recompute_ is a flag to replace the results table specified by outputData."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Initiate a batch scoring job","","Batch scoring jobs are initiated by sending a **POST** request to the */omlmod/v1/jobs* endpoint. The details for batch scoring are specified in **jobProperties**, including:","* batch scoring job name and type","* ID of the model used for scoring","* table name for storing the batch scoring job results","* supplemental column names to return with the scoring results to identify rows","* whether to replace the results table with each job run"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Regression","","Here is an example of a batch scoring job submission using a regression model. To start, you will need the model ID for the model used for scoring. You can get the model ID by sending a **GET** request to the deployment endpoint and specifying the model URI. The model URI is provided by the user when deploying the model using the AutoML UI or when deploying the model through a REST client. ","","This model was trained on the CUSTOMERS360 dataset to predict `YRS_RESIDENCE`, the model URI is `REGR_MOD`, and the model ID is `074f5554-fc75-4647-9392-a376056c1f03`.","","In addition to the job name and type, we specify an hourly job schedule with 50 maximum runs, the model ID and input data for scoring, and an output table to store the job results. We also return the target column *YRS_RESIDENCE* and the customer ID column *CUST_ID* with the predictions to identify rows, and set recompute to *true* to replace the results table with each run.","","Note that we are using *jq*, a command-line JSON processor available on Linux and Mac OS systems, to extract relevant components from the response."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Get model ID","message":["","$ curl -X GET \"$<OML service URL>/omlmod/v1/deployment/REGR_MOD\" \\","       --header \"Authorization: Bearer $<token>\" | jq '.modelId'",""," returns: \"074f5554-fc75-4647-9392-a376056c1f03\""],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Submit batch scoring job ","message":["","$ curl -i -X POST \"<OML Serivce URL>/omlmod/v1/jobs\" \\","     --header \"Authorization: Bearer <token>\" \\","     --header 'Content-Type: application/json' \\","     --data '{","         \"jobSchedule\": {  ","\t\t     \"jobStartDate\": \"2023-03-23T20:05:22Z\",                   # job start date and time ","\t\t\t \"jobEndDate\":   \"2023-03-25T20:05:22Z\"                    # job end date and time","             \"repeatInterval\": \"FREQ=HOURLY\",                          # job frequency         ","             \"maxRuns\": \"50\"                                           # max runs within the schedule                       ","         },","         \"jobProperties\": {","             \"jobName\": \"REG_PRED1\",                                   # job name","             \"jobType\": \"MODEL_SCORING\",                               # job type; MODEL_SCORING","             \"modelId\": \"074f5554-fc75-4647-9392-a376056c1f03\",\t\t   # ID of the model used for scoring\t ","             \"inputData\": \"CUSTOMERS360\",                              # table or view to read input for the batch scoring job","             \"outputData\": \"REG_PRED_OUT1\",                            # output table to store the scoring results in the format {jobID}_{outputData}","             \"supplementalColumnNames\": [\"CUST_ID\",\"YRS_RESIDENCE\"],   # array of columns from the input data used to identify rows in the output","             \"topNDetails\": 2,                                         # flag to return the top N most important predictors and their weight","\t\t\t \"recompute\": \"true\"                                       # flag to determine whether to overwrite the results table","\t\t}","     }' | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[{\"type\":\"TextBox\",\"name\":\"omlservice\",\"displayName\":null,\"defaultValue\":\"\",\"argument\":null,\"isHidden\":false,\"isProgrammatic\":false},{\"type\":\"TextBox\",\"name\":\"token\",\"displayName\":null,\"defaultValue\":\"\",\"argument\":null,\"isHidden\":false,\"isProgrammatic\":false}]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Job ID returned from job submssion","message":["%md","","","When your job is successfully submitted, you will receive a response. Note the job ID, as you will use it to submit requests such as retrieving job details or performing an action on the job."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","{","  \"jobId\": \"OML$21FACAC2_B345_4485_B287_DBDADC3A1BC0\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%2421FACAC2_B345_4485_B287_DBDADC3A1BC0\"","    }","  ]","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"View the details of the submitted job","message":["%md","","You can view the details of your submitted regression batch scoring job with a GET request to the */omlmod/v1/jobs/{jobID}* endpoint, where **jobid** is the ID provided in response to the successful submission of your batch scoring job in the previous step. The returned details include the parameters provided when the job was submitted  and the default values for the optional parameters not specified upon submission."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"cURL invocation to view job details","message":["","$ export jobid='OML$21FACAC2_B345_4485_B287_DBDADC3A1BC0'  # save job ID to variable","","$ curl -X GET \"<OML Service URL>/omlmod/v1/jobs/<job ID>\"  \\","       --header 'Accept: application/json' \\","       --header 'Content-Type: application/json' \\","       --header \"Authorization: Bearer <token>\" | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["Returns:","","{","  \"jobId\": \"OML$21FACAC2_B345_4485_B287_DBDADC3A1BC0\",","  \"jobRequest\": {","    \"jobSchedule\": {","      \"jobStartDate\": \"2023-03-23T20:05:22Z\",","      \"repeatInterval\": \"FREQ=HOURLY\",","      \"jobEndDate\": \"2023-03-25T20:05:22Z\",","      \"maxRuns\": 50","    },","    \"jobProperties\": {","      \"jobType\": \"MODEL_SCORING\",","      \"inputSchemaName\": null,","      \"outputSchemaName\": null,","      \"outputData\": \"REG_PRED_OUT1\",","      \"jobDescription\": null,","      \"jobName\": \"REG_PRED1\",","      \"disableJob\": false,","      \"jobServiceLevel\": null,","      \"inputData\": \"CUSTOMERS360\",","      \"supplementalColumnNames\": [","        \"CUST_ID\",","        \"YRS_RESIDENCE\"","      ],","      \"topN\": null,","      \"recompute\": true,","      \"modelId\": \"074f5554-fc75-4647-9392-a376056c1f03\",","      \"topNDetails\": 2","    }","  },","  \"jobStatus\": \"CREATED\",","  \"dateSubmitted\": \"2023-03-23T20:04:06.157516Z\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%2421FACAC2_B345_4485_B287_DBDADC3A1BC0\"","    }","  ],","  \"jobFlags\": [],","  \"state\": \"SCHEDULED\",","  \"enabled\": true,","  \"runCount\": 0,","  \"nextRunDate\": \"2023-03-23T20:05:22Z\"","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"View the batch scoring job output","message":["%md","","Once your job has run, you can view the results in the table you specified in your job request with the **outputData** parameter. The full name of the table is *{jobID}\\_{outputData}*. You can check if your job is finished by sending a request to view its details. The paragraph below queries the output table associated with this example. ","","The regression predictions are returned in the *OML$PREDICTION* column along with the supplemental column names provided by the user. OML$DETAIL1 contains the most important column in prediction details, and OML$DETAILWEIGHT1 contains weight of the most important column in prediction details. OML$DETAIL2 contains the second most important column in prediction details, and OML$DETAILWEIGHT2 contains weight of the second most important column in prediction details. ","","","For help understanding the regression batch scoring output table, refer to the documentation: <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-regr-output-table-rel.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-regr-output-table-rel.html');\">https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-regr-output-table-rel.html<\/a>"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%sql","","SELECT * FROM OML$21FACAC2_B345_4485_B287_DBDADC3A1BC0_REG_PRED_OUT1","ORDER BY CUST_ID","FETCH FIRST 5 ROWS ONLY;"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Classification","Here is an example of a classification batch scoring job submission using a neural network model with model URI `NN_MOD` and ID `35a97c7b-0ff4-4940-96f5-bfb29f64d223`. The model was trained on the CUSTOMERS360 dataset to predict the customers most likely to respond positively to an affinity card loyalty program. ","","In addition to the job name and type, we specify a daily job schedule with 4 maximum runs, the model ID and input data for scoring, an output table to store the job results, and set recompute to *true* to replace the output table with each run. We return the target column *AFFINITY_CARD* and the customer ID column *CUST_ID* with the predictions to identify rows, and the top 2 predictions wiith details contributing to those predictions. ","","We also set the database service level to *MEDIUM*. Oracle Autonomous Database supports three service levels: HIGH, MEDIUM, and LOW. LOW is the default, which results in no parallelism, but you can change your database service level to MEDIUM or HIGH. The HIGH service levels gives the greatest parallelism but significantly limits the number of concurrent jobs, while the MEDIUM level enables some parallelism but allows greater concurrency for job processing. "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Get model ID","message":["","$ curl -X GET \"<OML Service URL>/omlmod/v1/deployment/NN_MOD\" \\","       --header \"Authorization: Bearer <token>\" | jq '.modelId'",""," returns: \"35a97c7b-0ff4-4940-96f5-bfb29f64d223\""],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Submit batch scoring job","message":["","$ curl -X POST \"<OML Service URL>/omlmod/v1/jobs\" \\","     --header \"Authorization: Bearer <token>\" \\","     --header 'Content-Type: application/json' \\","     --data '{","         \"jobSchedule\": {  ","\t\t     \"jobStartDate\": \"2023-03-13T21:10:23Z\",                  # job start date and time","\t\t\t \"jobEndDate\":   \"2023-03-17T21:10:23Z\",                  # job end date and time","             \"repeatInterval\": \"FREQ=DAILY\",                          # job frequency","             \"maxRuns\": \"4\"                                           # max runs within the schedule                     ","         },","         \"jobProperties\": {","             \"jobName\": \"NN_MOD1\",                                    # job name","             \"jobType\": \"MODEL_SCORING\",                              # job type; MODEL_SCORING","             \"modelId\": \"35a97c7b-0ff4-4940-96f5-bfb29f64d223\",\t\t  # ID of the model used for scoring\t ","             \"inputData\": \"CUSTOMERS360\",                             # table or view to read input for the batch scoring job","             \"outputData\": \"CLASS_PRED1\",                             # output table to store the scoring results in the format {jobID}_{outputData}","             \"supplementalColumnNames\": [\"CUST_ID\", \"AFFINITY_CARD\"], # array of columns from the input data used to identify rows in the output","             \"jobServiceLevel\": \"MEDIUM\",                             # The database service level for the job. The default is LOW.","\t\t\t \"topN\": 2,                                               # filters the results by returning the highest N probabilities","\t\t\t \"topNDetails\": 2,                                        # provides prediction details contributing to the probability scores","\t\t\t \"recompute\": \"true\"                                      # flag to determine whether to overwrite the result table ","\t\t}"," "],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","returns:","","{","  \"jobId\": \"OML$385E413C_7219_41A4_B5A2_DC6B91B3DD8E\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%24385E413C_7219_41A4_B5A2_DC6B91B3DD8E\"","    }","  ]","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"View the details of the submitted job","message":["%md","","You can view the details of your submitted batch scoring job with a GET request to the */omlmod/v1/jobs/{jobID}* endpoint, where **jobId** is the ID provided in response to the successful submission of your batch scoring job in the previous step. The returned details include the parameters provided when the job was submitted  and the default values for the optional parameters not specified upon submission."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"View the batch scoring job details","message":["","$ export jobid='OML$385E413C_7219_41A4_B5A2_DC6B91B3DD8E'   # save job ID to variable","","$ curl -X GET \"<OML Service URL>/omlmod/v1/jobs/<jobid>\"  \\","       --header 'Accept: application/json' \\","       --header 'Content-Type: application/json' \\","       --header \"Authorization: Bearer <token>\" | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","Returns:","","{","  \"jobId\": \"OML$385E413C_7219_41A4_B5A2_DC6B91B3DD8E\",","  \"jobRequest\": {","    \"jobSchedule\": {","      \"jobStartDate\": \"2023-03-23T20:32:35Z\",","      \"repeatInterval\": \"FREQ=DAILY\",","      \"jobEndDate\": \"2023-03-27T20:32:35Z\",","      \"maxRuns\": 4","    },","    \"jobProperties\": {","      \"jobType\": \"MODEL_SCORING\",","      \"inputSchemaName\": null,","      \"outputSchemaName\": null,","      \"outputData\": \"CLASS_PRED1\",","      \"jobDescription\": null,","      \"jobName\": \"NN_MOD1\",","      \"disableJob\": false,","      \"jobServiceLevel\": \"MEDIUM\",","      \"inputData\": \"CUSTOMERS360\",","      \"supplementalColumnNames\": [","        \"CUST_ID\",","        \"AFFINITY_CARD\"","      ],","      \"topN\": 2,","      \"recompute\": true,","      \"modelId\": \"35a97c7b-0ff4-4940-96f5-bfb29f64d223\",","      \"topNDetails\": 2","    }","  },","  \"jobStatus\": \"CREATED\",","  \"dateSubmitted\": \"2023-03-23T20:28:55.233217Z\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%24385E413C_7219_41A4_B5A2_DC6B91B3DD8E\"","    }","  ],","  \"jobFlags\": [],","  \"state\": \"SCHEDULED\",","  \"enabled\": true,","  \"runCount\": 0,","  \"nextRunDate\": \"2023-03-23T20:32:35Z\"","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"View the batch scoring job output","message":["%md","","Once your job has run, you can view the results in the table you specified in your job request with the **outputData** parameter. The full name of the table is {jobID}_{outputData}. You can check if your job is finished by sending a request to view its details. ","","The paragraph below queries the output table associated with this example.  The supplemental column names provided by the user are returned, along with the classification predictions. The *OML$PREDICTION1* column contains the class with highest probability and the *OML$PROBABILITY1* column contains the probability for the top class. *OML$DETAIL1* contains the most important column in the prediction details, while the *OML$PROBABILITY2* column contains the probability for the second class, and *OML$DETAIL2* contains the second most import column in the prediction details. ","","For help understanding the classification batch scoring output table, refer to the documentation:","","<a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-class-output-table-rel.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-class-output-table-rel.html');\">https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-class-output-table-rel.html<\/a>"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%sql","","SELECT * FROM OML$385E413C_7219_41A4_B5A2_DC6B91B3DD8E_CLASS_PRED1","ORDER BY CUST_ID","FETCH FIRST 5 ROWS ONLY;"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","","### Clustering","","Here is an example of a K-Means clustering batch scoring job submission with model URI `KM_CLUS_MOD` and ID `4632a963-4340-4ca5-ba30-aff77a4b857a`. The model uses the CUSTOMERS360 dataset to predict the cluster membership by customer. ","","In addition to the job name and type, we specify a daily job schedule with 4 maximum runs, the model ID and input data for scoring, an output table to store the job results, and set recompute to *true* to replace the results table with each run. We also return the customer ID column *CUST_ID* with the predictions to identify cluster membership, request the top 2 most probable cluster assignments and details contributing to the cluster assignment predictions."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Get model ID","message":["","$ curl -X GET \"<OML Service URL>/omlmod/v1/deployment/KM_CLUS_MOD\" \\","       --header \"Authorization: Bearer <token>\" | jq '.modelId'",""," returns: \"4632a963-4340-4ca5-ba30-aff77a4b857a\""],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Submit batch scoring job","message":["","$ curl -X POST \"<OML Service URL>/omlmod/v1/jobs\" \\","     --header \"Authorization: Bearer <token>\" \\","     --header 'Content-Type: application/json' \\","     --data '{","         \"jobSchedule\": {  ","\t\t     \"jobStartDate\": \"2023-03-23T20:58:46Z\",                  # job start date and time","\t\t\t \"jobEndDate\":   \"2023-03-28T20:58:46Z\",                  # job end date and time","             \"repeatInterval\": \"FREQ=DAILY\",                          # job frequency          ","             \"maxRuns\": \"4\"                                           # max runs within the schedule                 ","         },","         \"jobProperties\": {","             \"jobName\": \"KM_CLUS_MOD1\",                               # job name","             \"jobType\": \"MODEL_SCORING\",                              # job type; MODEL_SCORING","             \"modelId\": \"4632a963-4340-4ca5-ba30-aff77a4b857a\",\t\t  # ID of the model used for scoring\t ","             \"inputData\": \"CUSTOMERS360\",                             # table or view to read input for the batch scoring job","             \"outputData\": \"KM_CLUS_PRED1\",                           # output table to store the scoring results in the format {jobID}_{outputData}","             \"supplementalColumnNames\": [\"CUST_ID\"],                  # array of columns from the input data used to identify rows in the output","\t\t\t \"topN\": 2,                                               # filters the results by returning the N most probable cluster assignments","\t\t\t \"topNDetails\": 2,                                        # provides prediction details contributing to the probability scores","\t\t\t \"recompute\": \"true\"                                      # flag to determine whether to overwrite the result table ","\t\t}","     }' | jq\t   "],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","returns:","","{","  \"jobId\": \"OML$65977733_A951_42CD_9E3D_5E800604EBDB\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/jobs/OML%2465977733_A951_42CD_9E3D_5E800604EBDB\"","    }","  ]","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"View the batch scoring job details","message":["","$ export jobid='OML$65977733_A951_42CD_9E3D_5E800604EBDB'    # save job ID to variable","","$ curl -X GET \"<omlservice>/omlmod/v1/jobs/<jobid>\"  \\","       --header 'Accept: application/json' \\","       --header 'Content-Type: application/json' \\","       --header \"Authorization: Bearer <token>\" | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["Returns:","","{","  \"jobId\": \"OML$65977733_A951_42CD_9E3D_5E800604EBDB\",","  \"jobRequest\": {","    \"jobSchedule\": {","      \"jobStartDate\": \"2023-03-23T20:58:46Z\",","      \"repeatInterval\": \"FREQ=DAILY\",","      \"jobEndDate\": \"2023-03-28T20:58:46Z\",","      \"maxRuns\": 4","    },","    \"jobProperties\": {","      \"jobType\": \"MODEL_SCORING\",","      \"inputSchemaName\": null,","      \"outputSchemaName\": null,","      \"outputData\": \"KM_CLUS_PRED1\",","      \"jobDescription\": null,","      \"jobName\": \"KM_CLUS_MOD1\",","      \"disableJob\": false,","      \"jobServiceLevel\": null,","      \"inputData\": \"CUSTOMERS360\",","      \"supplementalColumnNames\": [","        \"CUST_ID\"","      ],","      \"topN\": 2,","      \"recompute\": true,","      \"modelId\": \"4632a963-4340-4ca5-ba30-aff77a4b857a\",","      \"topNDetails\": 2","    }","  },","  \"jobStatus\": \"CREATED\",","  \"dateSubmitted\": \"2023-03-23T20:54:53.248736Z\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%2465977733_A951_42CD_9E3D_5E800604EBDB\"","    }","  ],","  \"jobFlags\": [],","  \"state\": \"SCHEDULED\",","  \"enabled\": true,","  \"runCount\": 0,","  \"nextRunDate\": \"2023-03-23T20:58:46Z\"","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"View the batch scoring job output","message":["%md","","Once your job has run, you can view the results in the table you specified in your job request with the **outputData** parameter. The full name of the table is {jobID}_{outputData}. You can check if your job is finished by sending a request to view its details. The paragraph below queries the output table associated with this example.","","The paragraph below queries the output table associated with this example. The supplemental column names provided by the user are returned, along with the cluster ID predictions. The *OML$CLUSTER_ID1* column contains the cluster with highest probability, and the *OML$DETAIL1* column contains the most important column in the prediction details. *OML$CLUSTER_ID2* contains the cluster with 2nd highest probability, and the *OML$DETAIL2* column contains the 2nd most important column in the prediction details.","","","For help understanding the clustering batch scoring output table, refer to the documentation:","","<a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-clustering-output-table.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-clustering-output-table.html');\">https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-clustering-output-table.html<\/a>"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%sql","","SELECT * FROM OML$65977733_A951_42CD_9E3D_5E800604EBDB_KM_CLUS_PRED1","ORDER BY CUST_ID","FETCH FIRST 5 ROWS ONLY;"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Feature Extraction","Here is an example of a feature extraction batch scoring job submission with model URI `NMF_MOD` and ID `555c4718-853b-4d56-8ef9-268fd87ac25b`.","","In addition to the job name and type, we specify a monthly job schedule with 2 maximum runs, the model ID and input data for scoring, an output table to store the job results, and set recompute to *true* to replace the results table with each run. We also specify the *HIGH* database service level, a set of supplemental columns from the input data to return with the results for row identification and request the top 2 predictions wiith details contributing to those predictions."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Get model ID","message":["","$ curl -X GET \"<omlservice>/omlmod/v1/deployment/NMF_MOD\" \\","       --header \"Authorization: Bearer <token>\" | jq '.modelId'",""," returns: \"555c4718-853b-4d56-8ef9-268fd87ac25b\""," "],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Submit batch scoring job","message":["","$ curl -X POST \"<OML Service URL>/omlmod/v1/jobs\" \\","     --header \"Authorization: Bearer <token>\" \\","     --header 'Content-Type: application/json' \\","     --data '{","         \"jobSchedule\": {  ","\t\t     \"jobStartDate\": \"2023-03-23T21:10:40Z\",                  # job start date and time","\t\t\t \"jobEndDate\":   \"2023-05-23T21:10:40Z\",                  # job end date and time","             \"repeatInterval\": \"FREQ=MONTHLY\",                        # job frequency         ","             \"maxRuns\": \"2\"                                           # max runs within the schedule                        ","         },","         \"jobProperties\": {","             \"jobName\": \"FE_MOD1\",                                    # job name","             \"jobType\": \"MODEL_SCORING\",                              # job type; MODEL_SCORING","             \"modelId\": \"555c4718-853b-4d56-8ef9-268fd87ac25b\",\t      # ID of the model used for scoring","             \"jobServiceLevel\": \"HIGH\",\t\t                          # database service level\t ","             \"inputData\": \"CUSTOMERS360\",                             # table or view to read input for the batch scoring job","             \"outputData\": \"FE_PRED1\",                                # output table to store the scoring results in the format {jobID}_{outputData}","             \"supplementalColumnNames\": [\"CUST_ID\",                   # array of columns from the input data used to identify rows in the output","                                        \"AFFINITY_CARD\", ","                                        \"CUST_CREDIT_LIMIT\",","                                        \"CUST_GENDER\"],","\t\t\t \"topN\": 2,                                               # filters the results by returning the top N features with the highest probability","\t\t\t \"topNDetails\": 2,                                        # provides prediction details contributing to the probability scores","\t\t\t \"recompute\": \"true\"                                      # flag to determine whether to overwrite the results table","\t\t}","     }' | jq\t  ","     "],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","Returns:","","{","  \"jobId\": \"OML$D66F5559_CA57_4B85_B832_A21A26660725\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%24D66F5559_CA57_4B85_B832_A21A26660725\"","    }","  ]","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"View batch scoring job details","message":["","$ export jobid='OML$D66F5559_CA57_4B85_B832_A21A26660725'  # save job ID to variable","","$ curl -X GET \"<OML Service URL>/omlmod/v1/jobs/<jobid>\"  \\","       --header 'Accept: application/json' \\","       --header 'Content-Type: application/json' \\","       --header \"Authorization: Bearer <token>\" | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["Returns:","","{","  \"jobId\": \"OML$D66F5559_CA57_4B85_B832_A21A26660725\",","  \"jobRequest\": {","    \"jobSchedule\": {","      \"jobStartDate\": \"2023-03-23T21:10:40Z\",","      \"repeatInterval\": \"FREQ=MONTHLY\",","      \"jobEndDate\": \"2023-05-23T21:10:40Z\",","      \"maxRuns\": 2","    },","    \"jobProperties\": {","      \"jobType\": \"MODEL_SCORING\",","      \"inputSchemaName\": null,","      \"outputSchemaName\": null,","      \"outputData\": \"FE_PRED1\",","      \"jobDescription\": null,","      \"jobName\": \"FE_MOD1\",","      \"disableJob\": false,","      \"jobServiceLevel\": \"HIGH\",","      \"inputData\": \"CUSTOMERS360\",","      \"supplementalColumnNames\": [","        \"CUST_ID\",","        \"AFFINITY_CARD\",","        \"CUST_CREDIT_LIMIT\",","        \"CUST_GENDER\"","      ],","      \"topN\": 2,","      \"recompute\": true,","      \"modelId\": \"555c4718-853b-4d56-8ef9-268fd87ac25b\",","      \"topNDetails\": 2","    }","  },","  \"jobStatus\": \"CREATED\",","  \"dateSubmitted\": \"2023-03-23T21:05:24.644571Z\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%24D66F5559_CA57_4B85_B832_A21A26660725\"","    }","  ],","  \"jobFlags\": [],","  \"state\": \"SCHEDULED\",","  \"enabled\": true,","  \"runCount\": 0,","  \"nextRunDate\": \"2023-03-23T21:10:40Z\"","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"View the batch scoring job output","message":["%md","","Once your job has run, you can view the results in the table you specified in your job request with the **outputData** parameter. The full name of the table is {jobID}_{outputData}. You can check if your job is finished by sending a request to view its details. The paragraph below queries the output table associated with this example.","","The paragraph below queries the output table associated with this example. The supplemental column names provided by the user are returned, along with the predicted features. The *OML$FEATURE_ID1* column contains the features with highest probability and the *OML$WEIGHT1* column contains the the probability for the top weighted feature. *OML$FEATURE_ID2* contains the feature with 2nd highest probability, and the *OML$WEIGHT2* column contains the probability for the 2nd highest feature.","","For help understanding the feature extraction batch scoring output table, refer to the documentation: ","","<a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-feature-extraction-output-table.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-feature-extraction-output-table.html');\">https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-feature-extraction-output-table.html<\/a>"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%sql","","SELECT * FROM OML$D66F5559_CA57_4B85_B832_A21A26660725_FE_PRED1","ORDER BY CUST_ID","FETCH FIRST 5 ROWS ONLY;"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Perform actions, update, and delete batch scoring jobs"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Perform an action on a batch scoring job","message":["%md","","","OML Services interacts with the DBMS_SCHEDULER to perform actions on jobs. There are four options for actions, **DISABLE**, **RUN**, **ENABLE**, and **STOP**:","","For example, when your job has been successfuly submitted, its state is set to **ENABLED** by default. This means that it will run on the schedule you specified when submitting the job unless its updated to another state such as **DISABLED**. You can do this by sending a request to the */omlmod/v1/jobs/{jobid}/action* endpoint. ","","* _DISABLE_ disables the job. After an enabled job is disabled, it no longer runs according to its schedule.","* _ENABLE_ enables a job. After a disabled job is enabled, the scheduler runs the job according to its schedule. ","* _RUN_ will immediately run the job as a way to test a job or run it outside of its schedule.","* _STOP_ stops a currently running job.","","Note that jobs can be set to **DISABLED** at submission by setting the *disableJob* flag to *true*.","","Below is an example action that updates the job status to **DISABLED**. A successfully submitted job receives a 204 response with no body. "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","$ curl -i -X POST \"<OML Service URL>/omlmod/v1/jobs/<jobid>/action\" \\","       --header \"Authorization: Bearer <token>\" \\","       --header 'Content-Type: application/json' \\","       --data '{","            \"action\": \"DISABLE\"","         }'"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Update a batch scoring job","message":["%md","","After a batch scoring job is submitted, you have the option to update the job schedule. You can do this by sending a POST request with the updated options to the */omlmod/v1/jobs/{jobid}* endpoint. The following parameters can updated for a batch scoring job:","","* _jobStartDate_","* _jobEndDate_","* _repeatInterval_","* _maxRuns_","","In the example request below, we update these fields to differ from the original parameters we set with our initial request. When you successfully submit your job you will receive a 204 response with no body."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","$ curl -i -X POST \"<OML Service URL>/omlmod/v1/jobs/<jobid>\" \\","     --header \"Authorization: Bearer <token>\" \\","     --header 'Content-Type: application/json' \\","     --data '{","         \"jobSchedule\": {  ","\t\t     \"jobStartDate\": \"2023-03-28T21:00:00Z\",","\t\t\t \"jobEndDate\":   \"2023-03-30T21:00:00Z\",","             \"repeatInterval\": \"FREQ=DAILY\",                  ","             \"maxRuns\": \"2\"                                ","         }","\t   }' | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Delete a batch scoring job","message":["%md","","To delete a previously submitted job, send a DELETE request along with the Job ID to the */omlmod/v1/jobs* endpoint."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","$ curl -X DELETE \"<OML Service URL>/omlmod/v1/jobs/<jobid>\"  \\","       --header 'Accept: application/json' \\","       --header 'Content-Type: application/json' \\","       --header \"Authorization: Bearer <token>\" | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"To reproduce the examples in this notebook...","message":["%md","---","## Reproducing these examples","---","If you would like to reproduce the examples in this notebook, the paragraph below creates the required database table, *CUSTOMERS360*.  This table is created by selecting columns from the *CUSTOMERS* and *SUPPLEMENTARY_DEMOGRAPHICS* tables which reside in the SH schema.","","The models used in this notebook were deployed using the OML Services REST API. You can download these models in serialized format here:","","[Regression model](https://objectstorage.us-ashburn-1.oraclecloud.com/n/adwc4pm/b/OML-Resources/o/REGR_MOD.mod)","[Classification model](https://objectstorage.us-ashburn-1.oraclecloud.com/n/adwc4pm/b/OML-Resources/o/NN_MOD.mod)","[K-Means clustering model](https://objectstorage.us-ashburn-1.oraclecloud.com/n/adwc4pm/b/OML-Resources/o/KM_CLUS_MOD.mod)","[Feature Extraction (NMF) model](https://objectstorage.us-ashburn-1.oraclecloud.com/n/adwc4pm/b/OML-Resources/o/NMF_MOD.mod)","","Refer to the OML Services REST API documentation for detailed instructions on deploying models: <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/index.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/index.html');\">https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/index.html<\/a>."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create the customers 360 table","message":["%script","","BEGIN EXECUTE IMMEDIATE 'DROP TABLE CUSTOMERS360';","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","CREATE TABLE CUSTOMERS360 AS ","  SELECT A.CUST_ID, A.CUST_GENDER, A.CUST_MARITAL_STATUS, A.CUST_YEAR_OF_BIRTH, ","         A.CUST_INCOME_LEVEL, A.CUST_CREDIT_LIMIT, ","         B.EDUCATION, B.AFFINITY_CARD, B.HOUSEHOLD_SIZE, B.OCCUPATION, B.YRS_RESIDENCE, B.Y_BOX_GAMES","  FROM SH.CUSTOMERS A, SH.SUPPLEMENTARY_DEMOGRAPHICS B","  WHERE A.CUST_ID = B.CUST_ID;"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View the CUSTOMERS360 table","message":["%sql","","SELECT * FROM CUSTOMERS360 ","FETCH FIRST 5 ROWS ONLY;"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of script"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]