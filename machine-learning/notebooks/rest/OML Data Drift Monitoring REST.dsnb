[{"layout":null,"template":null,"templateConfig":null,"name":"OML Data Drift Monitoring REST","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML Monitoring - Data Drift Detection","","Data drift occurs when data diverges from the original baseline data over time. Data drift can happen for a variety of reasons, such as a changing business environment, evolving user behavior and interest, data modifications from third-party sources, data quality issues, or issues with upstream data processing pipelines. Identifying and understanding data drift is an essential part of maintaining the health of any organization's data in supporting data-driven decision making and business-critical applications. ","","In addition, understanding how data evolves over time is a key input when evaluating how your machine learning models are able to meet business objectives. As such, data monitoring is complementary to model monitoring, where understanding changes in data used for prediction helps understand changes in a model's efficacy. ","","Data drift can be quantified using basic descriptive statistics. For numeric columns these include:","* Mean","* Standard deviation","* Range (minimum, maximum)","* Number of nulls","","For categorical columns these include:","* Number of unique values","* Number of nulls","","","### **Data monitoring workflow**","","In this notebook we highlight the following features of data monitoring through the REST interface:","","* Authenticate the database user and obtain a token","* Create a data monitoring job","* View the details and output of the data monitoring job","* Update, disable, and delete a data monitoring job","","The dataset used in this example is from the UCI Machine Learning Repository. It contains measurements of household electric power consumption in one household near Paris with a one-minute sampling rate over a period of almost 4 years.","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1715382928921,"interpreter":"md.low","endTime":1715382929109,"results":[{"message":"<h1 id=\"oml-monitoring---data-drift-detection\">OML Monitoring - Data Drift Detection<\/h1>\n<p>Data drift occurs when data diverges from the original baseline data over time. Data drift can happen for a variety of reasons, such as a changing business environment, evolving user behavior and interest, data modifications from third-party sources, data quality issues, or issues with upstream data processing pipelines. Identifying and understanding data drift is an essential part of maintaining the health of any organization's data in supporting data-driven decision making and business-critical applications.<\/p>\n<p>In addition, understanding how data evolves over time is a key input when evaluating how your machine learning models are able to meet business objectives. As such, data monitoring is complementary to model monitoring, where understanding changes in data used for prediction helps understand changes in a model's efficacy.<\/p>\n<p>Data drift can be quantified using basic descriptive statistics. For numeric columns these include:<\/p>\n<ul>\n<li>Mean<\/li>\n<li>Standard deviation<\/li>\n<li>Range (minimum, maximum)<\/li>\n<li>Number of nulls<\/li>\n<\/ul>\n<p>For categorical columns these include:<\/p>\n<ul>\n<li>Number of unique values<\/li>\n<li>Number of nulls<\/li>\n<\/ul>\n<h3 id=\"data-monitoring-workflow\"><strong>Data monitoring workflow<\/strong><\/h3>\n<p>In this notebook we highlight the following features of data monitoring through the REST interface:<\/p>\n<ul>\n<li>Authenticate the database user and obtain a token<\/li>\n<li>Create a data monitoring job<\/li>\n<li>View the details and output of the data monitoring job<\/li>\n<li>Update, disable, and delete a data monitoring job<\/li>\n<\/ul>\n<p>The dataset used in this example is from the UCI Machine Learning Repository. It contains measurements of household electric power consumption in one household near Paris with a one-minute sampling rate over a period of almost 4 years.<\/p>\n<p>Copyright (c) 2024 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md","","* <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-data-monitoring.html\" target=\"_blank\">OML Data Monitoring Documentation<\/a>","* <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/index.html\" target=\"_blank\">OML Services REST API Documentation<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://asktom.oracle.com/pls/apex/asktom.search?oh=13662\" target=\"_blank\">OML Services Demo<\/a>","","For model monitoring, refer to the Model Monitoring notebook in the template notebook examples."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Before you begin","message":["%md","","This notebook walks through the steps to run a data monitoring job through a REST interface via OML Services.","","If you are unfamiliar with OML Services and its REST interface, the links above as well as the following guided lab are a great way to become aquainted: <a href=\"https://asktom.oracle.com/pls/apex/asktom.search?oh=13662\" onclick=\"return ! window.open('https://asktom.oracle.com/pls/apex/asktom.search?oh=13662');\">OML Services Lab<\/a>","","The **cURL** commands provided in this notebook are for illustrative purposes only. To run REST calls, use **cURL** in a Linux or Mac terminal or another REST client such as Postman."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Step 1: Get an access token","message":["%md","","To send requests to OML Services, you must obtain an authentication token by using your Oracle Machine Learning account credentials. To authenticate and obtain a token, use **cURL** with the **-d** option to pass the credentials for your Oracle Machine Learning account against the Oracle Machine Learning user management cloud service REST endpoint */oauth2/v1/token*. ","","    $ curl -X POST --header 'Content-Type: application/json' ","                   --header 'Accept: application/json' ","                   -d '{\"grant_type\":\"password\", \"username\":\"'<yourusername>'\", \"password\":\"'<yourpassword>'\"}' ","                   \"<OML service URL>/omlusers/api/oauth2/v1/token\"","    ","where   ","","* _-X POST_ specifies to use a POST request when communicating with the HTTP server","* _--header_ defines the headers required for the request (application/json)","* _-d <data>_ sends the username and password authentication credentials as data in a POST request to the HTTP server","* _Content-Type_ and _Accept_ define the response format (JSON)","* _yourusername_ is the user name of a Oracle Machine Learning user with the default OML_DEVELOPER role","* _yourpassword_ is the password for the user name","* _OML service URL_ is the REST server portion of the Oracle Machine Learning user management cloud service instance"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Step 2: Create a data monitoring job","message":["%md","","Now that you have an access token, you can send a request to OML Services to create a data monitoring job. This request is sent to the */omlmod/v1/jobs* endpoint as a POST request. Below is a listing of the parameters that can be specified for a data monitoring job, divided into those that are required and those that are optional. ","","*Required:*","* _jobName_ specifies the name of the submitted job.","* _jobType_ specifies the type of job to be run, and is set to DATA_MONITORING for data monitoring jobs. ","* _outputData_ is the output data identifier. The results of the job will be written to a table named {jobID}_{outputData}.","* _baselineData_ is a table or view name that contains baseline data to monitor. At least 100 rows are required for data monitoring, otherwise analysis is skipped.","* _newData_ is a table or view name with new data to be compared against the baseline. At least 100 rows per period are required for data monitoring, otherwise analysis is skipped. ","","","*Optional:*","* _disableJob_ is a flag to disable the job at submission. If not set, the default is false and the job is enabled at submission.","* _inputSchemaName_ is the database schema that owns the input table/view. If not specified, the input schema will be the same as the username in the request token.","* _outputSchemaName_ is the database schema that owns the output table. If not specified the output schema will be the same as the input schema.","* _jobDescription_ is a description of the job.","* _jobServiceLevel_ is the service level for the job, which can be LOW, MEDIUM, or HIGH.","* _timeColumn_ is the name of a date or timestamp column in the new data. If not provided the entire newData is treated as one period.","* _startDate_ is the start date and time of monitoring in newData. If not provided the earliest date and time is used. ","* _endDate_ is the end date and time of the monitoring in newData. If not provided the last date and time is used.","* _frequency_ indicates the time window unit on which the monitoring is performed on the new data. This can be \"day\", \"week\", \"month\", or \"year\". If not provided, the whole \"new\" data is used as a single time period. ","* _threshold_ is the threshold to trigger a drift alert. The default is 0.7.","* _recompute_ is a flag whether to update already computed periods. The default is False, meaning only time periods not present in the output result table will be computed. ","* _caseidColumn_ is a case identifier column in the baseline and new data. Providing it improves the reproducability of results. ","* _featureList_ is a list of features to monitor. The features need to be either numeric or categorical. The default maximum number of features in the list is 250. Monitoring will run on all features if the feature list is not specified, and and error is returned if there are more than 250 features. ","* _anchorColumn_ is the anchor column in the baseline and new data used for bivariate analysis. The target column in supervised problems can be passed as the anchor column. "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Example Data Monitoring job","message":["%md","","","Data monitoring jobs are initiated by sending a **POST** request to the */omlmod/v1/jobs* endpoint, and numeric and categorical features are supported. Monitoring will run on all features by default, or a list of features specified by the user, and there is a maximum of 250 features that can be monitored.","","The details for data monitoring are specified in **jobProperties**, including:","* data monitoring job name and type","* Autonomous Database service level","* table where the data monitoring details will be saved","* drift alert trigger threshold","* maximum number of runs","* baseline and new data to be used","* performance metric","","The optional start date and end date correspond to a DATE or TIMESTAMP column in the table or view denoted by **newData** and contained in the **timeColumn** field. When the start and end dates are not specified, the earliest and latest dates and times in the **timeColumn** are used. The job is submitted asynchronously, so it will run as scheduled and the results can be retrieved when the job completes.","","Here is an example of a data monitoring job request using these parameters. Note that we are using *jq*, a command-line JSON processor available on Linux and Mac OS systems to extract relevant components from the response."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"cURL command to initiate data monitoring job","message":["","$ curl -X POST \"<OML Service URL>/omlmod/v1/jobs\" \\","     --header \"Authorization: Bearer <token>\" \\","     --header 'Content-Type: application/json' \\","     --data '{","         \"jobSchedule\": {","             \"jobStartDate\": \"2023-03-24T20:30:26Z\",            # job start date and time ","             \"repeatInterval\": \"FREQ=HOURLY\",                   # job frequency","             \"jobEndDate\": \"2023-03-24T23:30:26Z\",              # job end date and time","             \"maxRuns\": \"10\"                                    # max runs within the schedule","         },","         \"jobProperties\": {","             \"jobName\": \"HouseholdPowerDataMonitoring\",         # job name","             \"jobType\": \"DATA_MONITORING\",                      # job type; DATA_MONITORING","             \"disableJob\": false,                               # flag to disable the job at submission","             \"outputData\": \"householdPowerConsumption\",         # table where the job results will be saved in the format {jobID}_{outputData}","             \"baselineData\": \"HOUSEHOLD_POWER_BASE\",            # table/view containing baseline data ","             \"newData\": \"HOUSEHOLD_POWER_NEW\",                  # table/view with new data to compare against baseline","             \"inputSchemaName\": \"OMLUSER\",                      # database schema that owns the input table/view","             \"outputSchemaName\": \"OMLUSER\",                     # database schema that owns the output table/view","             \"jobDescription\": \"Monitor household power\",       # job description","             \"jobServiceLevel\": \"LOW\",                          # Autonomous Database service level; either LOW, MEDIUM, or HIGH","             \"timeColumn\": \"DATES\",                             # date or timestamp column in newData","             \"startDate\": \"2008-01-01T00:00:00Z\",               # the start date of the monitoring in the new data","             \"endDate\": \"2010-11-26T00:00:00Z\",                 # the end date of the monitoring in the new data","             \"frequency\": \"Year\",                               # the time window unit on which monitoring is performed on the new data","             \"threshold\": 0.8,                                  # threshold to trigger drift alert","             \"recompute\": false,                                # flag to determine whether to replace the output table","             \"caseidColumn\": null,                              # case identifier column in the baseline and new data","             \"anchorColumn\": null,                              # anchor column for bivariate analysis","             \"featureList\": [                                   # features to perform data monitoring on","                \"GLOBAL_ACTIVE_POWER\",","                \"GLOBAL_REACTIVE_POWER\",","                \"VOLTAGE\",","                \"SUB_METERING_1\",","                \"SUB_METERING_2\",","                \"SUB_METERING_3\"","            ]","         }","     }' | jq","     "],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Job ID returned with successful job submission","message":["%md","","When your job is successfully submitted, you will recieve a response. Note the job ID, as you will use it to submit requests such as retrieving job details or performing an action on the job."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["","{","  \"jobId\": \"OML$7ABB6308_1664_4CB4_84B1_598A6EA599D1\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%247ABB6308_1664_4CB4_84B1_598A6EA599D1\"","    }","  ]","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Step 3: View the details of a submitted job","message":["%md","","You can now view the details of your submitted job by sending GET request with the job ID to the */omlmod/v1/jobs* endpoint, where **jobid** is the ID provided in response to the successful submission of your data monitoring job in the previous step."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Use the job ID to view job details","message":["","$ export jobid='OML$7ABB6308_1664_4CB4_84B1_598A6EA599D1'  # save the job ID to a single-quoted variable","","$ curl -X GET \"<OML Service URL>/omlmod/v1/jobs/<jobid>\"  \\","       --header 'Accept: application/json' \\","       --header 'Content-Type: application/json' \\","       --header \"Authorization: Bearer <token>\" | jq"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["Returns:","","{","  \"jobId\": \"OML$7ABB6308_1664_4CB4_84B1_598A6EA599D1\",","  \"jobRequest\": {","    \"jobSchedule\": {","      \"jobStartDate\": \"2023-03-24T20:30:26Z\",","      \"repeatInterval\": \"FREQ=HOURLY\",","      \"jobEndDate\": \"2023-03-24T23:30:26Z\",","      \"maxRuns\": 3","    },","    \"jobProperties\": {","      \"jobType\": \"DATA_MONITORING\",","      \"inputSchemaName\": \"OMLUSER\",","      \"outputSchemaName\": \"OMLUSER\",","      \"outputData\": \"householdPowerConsumption\",","      \"jobDescription\": \"Monitor household power\",","      \"jobName\": \"HouseholdPowerDataMonitoring\",","      \"disableJob\": false,","      \"jobServiceLevel\": \"LOW\",","      \"baselineData\": \"HOUSEHOLD_POWER_BASE\",","      \"newData\": \"HOUSEHOLD_POWER_NEW\",","      \"timeColumn\": \"DATES\",","      \"startDate\": \"2008-01-01T00:00:00Z\",","      \"endDate\": \"2010-11-26T00:00:00Z\",","      \"frequency\": \"Year\",","      \"threshold\": 0.8,","      \"recompute\": false,","      \"caseidColumn\": null,","      \"featureList\": [","        \"GLOBAL_ACTIVE_POWER\",","        \"GLOBAL_REACTIVE_POWER\",","        \"VOLTAGE\",","        \"SUB_METERING_1\",","        \"SUB_METERING_2\",","        \"SUB_METERING_3\"","      ],","      \"anchorColumn\": null","    }","  },","  \"jobStatus\": \"CREATED\",","  \"dateSubmitted\": \"2023-03-24T20:23:31.53651Z\",","  \"links\": [","    {","      \"rel\": \"self\",","      \"href\": \"<OML Service URL>/omlmod/v1/jobs/OML%247ABB6308_1664_4CB4_84B1_598A6EA599D1\"","    }","  ],","  \"jobFlags\": [],","  \"state\": \"SCHEDULED\",","  \"enabled\": true,","  \"runCount\": 0,","  \"nextRunDate\": \"2023-03-24T20:30:26Z\"","}"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Step 4: Edit a data monitoring job (optional)","message":["%md","","After an asynchronous job is submitted, you have the option to update the job. You can do this by sending a POST request with the updated options in the *updateProperties* field to the */omlmod/v1/jobs/{jobid}* endpoint. The following parameters can updated for a data monitoring job:","","* _startDate_","* _endDate_","* _threshold_","* _recompute_","* _featureList_","","In the example request below, we update some of these fields to differ from the origional parameters we set with our initial request. When you successfully submit your job you will receive a 204 response with no body."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Update the properties of a data monitoring job","message":["","$ curl -i -X POST \"<OML Service URL>omlmod/v1/jobs/<jobid>\" \\","         --header \"Authorization: Bearer <token>\" \\","         --header 'Content-Type: application/json' \\","         --data '{","            \"updateProperties\": {","                \"startDate\": \"2022-01-01T19:40:24Z\",","                \"endDate\":   \"2023-01-01T19:20:24Z\",","                \"threshold\":  0.80,","                \"featureList\": [\"GLOBAL_ACTIVE_POWER\", \"GLOBAL_REACTIVE_POWER\", \"VOLTAGE\"]","            }","         }'"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Step 5: Perform an action on a data monitoring job (optional)","message":["%md","","","OML Services interacts with the DBMS_SCHEDULER to perform actions on jobs. There are four options for actions that can be sent to this endpoint, **DISABLE**, **RUN**, **ENABLE**, and **STOP**:","","* _DISABLE_ disables the job at submission. The *force* property can be used with this action to forcefully interrupt any running job. ","* _ENABLE_ enables a job. After a disabled job is enabled, the scheduler begins to automatically run the job according to its schedule. ","* _RUN_ will immediately run the job as a way to test a job or run it outside of its schedule.","* _STOP_ stops a currently running job.","","For example, when your job has been successfuly submitted, its state is set to **ENABLED** by default. This means that it will run on the schedule you specified when submitting the job unless its updated to another state such as **DISABLED**. You can do this by sending a request to the */omlmod/v1/jobs/{jobid}/action* endpoint. ","","Note that jobs can be set to **DISABLED** at submission by setting the *disableJob* flag to *true*.","","Below is an example request to update the job status to **DISABLED**. When you successfully submit your job you will receive a 204 response with no body. "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Disable data monitoring job","message":["","$ curl -i -X POST \"<OML Service URL>/omlmod/v1/jobs/<jobid>/action\" \\","       --header \"Authorization: Bearer <token>\" \\","       --header 'Content-Type: application/json' \\","       --data '{","            \"action\": \"DISABLE\"","         }'"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Step 6: View the data monitoring job output","message":["%md","","Once your job has run, either according to its schedule or by the **RUN** action, you can view its output in the table you specified in your job request with the **outputData** parameter. The full name of the table is *{jobid}\\_{outputData}*. You can check if your job is finished by sending a request to view its details, as we did in step #3. If your job has run at least once you should see the **lastRunDetail** field with information on that run. The paragraph below queries the output table associated with this example. ","","If you scroll down on the output table, you can see that there is information for the baseline time period and newdata time period for each of the dataset features being monitored for drift. Many of the columns are empty for the baseline rows as monitoring is only done on the new data, not the baseline data. For help understanding the data monitoring output table, refer to the documentation: <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-data-monitoring-output-table.html\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-data-monitoring-output-table.html');\">https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/omls-data-monitoring-output-table.html<\/a>"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%sql","","SELECT START_TIME, END_TIME, IS_BASELINE, THRESHOLD, HAS_DRIFT, round(DRIFT, 3), ","       FEATURE_NAME, ROUND(IMPORTANCE_VALUE, 3) ","FROM OML$7ABB6308_1664_4CB4_84B1_598A6EA599D1_householdPowerConsumption","ORDER BY FEATURE_NAME, IS_BASELINE DESC"],"enabled":false,"result":{"startTime":1700068961590,"interpreter":"sql.low","endTime":1700068963129,"results":[{"message":"START_TIME\tEND_TIME\tIS_BASELINE\tTHRESHOLD\tHAS_DRIFT\tROUND(DRIFT,3)\tFEATURE_NAME\tROUND(IMPORTANCE_VALUE,3)\n\t\t1\t\t\t\tGLOBAL_ACTIVE_POWER\t\n2009-11-26 00:00:00.0 +0:00\t2010-11-26 00:00:00.0 +0:00\t0\t0.8\t1\t0.811\tGLOBAL_ACTIVE_POWER\t2.158\n2008-01-01 00:00:00.0 +0:00\t2008-11-25 23:59:58.0 +0:00\t0\t0.8\t0\t0.644\tGLOBAL_ACTIVE_POWER\t2.631\n2008-11-25 23:59:59.0 +0:00\t2009-11-25 23:59:59.0 +0:00\t0\t0.8\t0\t0.725\tGLOBAL_ACTIVE_POWER\t2.181\n\t\t1\t\t\t\tGLOBAL_REACTIVE_POWER\t\n2008-11-25 23:59:59.0 +0:00\t2009-11-25 23:59:59.0 +0:00\t0\t0.8\t0\t0.725\tGLOBAL_REACTIVE_POWER\t1.639\n2008-01-01 00:00:00.0 +0:00\t2008-11-25 23:59:58.0 +0:00\t0\t0.8\t0\t0.644\tGLOBAL_REACTIVE_POWER\t1.897\n2009-11-26 00:00:00.0 +0:00\t2010-11-26 00:00:00.0 +0:00\t0\t0.8\t1\t0.811\tGLOBAL_REACTIVE_POWER\t1.389\n\t\t1\t\t\t\tSUB_METERING_1\t\n2008-11-25 23:59:59.0 +0:00\t2009-11-25 23:59:59.0 +0:00\t0\t0.8\t0\t0.725\tSUB_METERING_1\t0.362\n2008-01-01 00:00:00.0 +0:00\t2008-11-25 23:59:58.0 +0:00\t0\t0.8\t0\t0.644\tSUB_METERING_1\t0.294\n2009-11-26 00:00:00.0 +0:00\t2010-11-26 00:00:00.0 +0:00\t0\t0.8\t1\t0.811\tSUB_METERING_1\t0.234\n\t\t1\t\t\t\tSUB_METERING_2\t\n2008-01-01 00:00:00.0 +0:00\t2008-11-25 23:59:58.0 +0:00\t0\t0.8\t0\t0.644\tSUB_METERING_2\t0.631\n2009-11-26 00:00:00.0 +0:00\t2010-11-26 00:00:00.0 +0:00\t0\t0.8\t1\t0.811\tSUB_METERING_2\t0.56\n2008-11-25 23:59:59.0 +0:00\t2009-11-25 23:59:59.0 +0:00\t0\t0.8\t0\t0.725\tSUB_METERING_2\t0.558\n\t\t1\t\t\t\tSUB_METERING_3\t\n2008-11-25 23:59:59.0 +0:00\t2009-11-25 23:59:59.0 +0:00\t0\t0.8\t0\t0.725\tSUB_METERING_3\t1.854\n2009-11-26 00:00:00.0 +0:00\t2010-11-26 00:00:00.0 +0:00\t0\t0.8\t1\t0.811\tSUB_METERING_3\t1.922\n2008-01-01 00:00:00.0 +0:00\t2008-11-25 23:59:58.0 +0:00\t0\t0.8\t0\t0.644\tSUB_METERING_3\t1.888\n\t\t1\t\t\t\tVOLTAGE\t\n2009-11-26 00:00:00.0 +0:00\t2010-11-26 00:00:00.0 +0:00\t0\t0.8\t1\t0.811\tVOLTAGE\t2.145\n2008-01-01 00:00:00.0 +0:00\t2008-11-25 23:59:58.0 +0:00\t0\t0.8\t0\t0.644\tVOLTAGE\t2.269\n2008-11-25 23:59:59.0 +0:00\t2009-11-25 23:59:59.0 +0:00\t0\t0.8\t0\t0.725\tVOLTAGE\t2.576\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Step 7: Delete a data monitoring job (optional)","message":["%md","","To delete a previously submitted job, send a DELETE request along with the Job ID to the */omlmod/v1/jobs* endpoint."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["","$ curl -X DELETE \"<OML Service URL>/omlmod/v1/jobs/<jobid>\"  \\","       --header 'Accept: application/json' \\","       --header 'Content-Type: application/json' \\","       --header \"Authorization: Bearer <token>\" | jq"],"enabled":false,"result":{"startTime":1700068963474,"interpreter":"md.low","endTime":1700068963566,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Reproducing this example","message":["%md","","If you would like to reproduce the example in this notebook, the paragraph below creates the required database tables, *HOUSEHOLD_POWER_BASE* and *HOUSEHOLD_POWER_NEW*. These tables are created using the Individual Household Electric Power Consumption data from the [UCI Machine Learning Repository](https://archive.ics.uci.edu/ml/datasets/individual+household+electric+power+consumption).","","The code to read and transform the data and create database tables using R is provided below."],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Drop tables if they exist and suppress warnings","message":["%r","","options(warn=-1)","","try(ore.drop(table=\"HOUSEHOLD_POWER_BASE\"))","try(ore.drop(table=\"HOUSEHOLD_POWER_NEW\"))"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Read and transform data","message":["%r","","test <- read.csv(\"https://objectstorage.us-sanjose-1.oraclecloud.com/n/adwc4pm/b/OML_Data/o/household_power_consumption.txt\", sep=\";\")","","test <- transform(test, Date = as.Date(Date, format = \"%d/%m/%Y\"))","test <- transform(test, Global_active_power = as.numeric(Global_active_power))","test <- transform(test, Global_reactive_power = as.numeric(Global_reactive_power))","test <- transform(test, Voltage = as.numeric(Voltage))","test <- transform(test, Global_intensity = as.numeric(Global_intensity))","test <- transform(test, Sub_metering_1 = as.numeric(Sub_metering_1))","test <- transform(test, Sub_metering_2 = as.numeric(Sub_metering_2))","test <- transform(test, Sub_metering_3 = as.numeric(Sub_metering_3))","","colnames(test) <- c(\"DATES\", \"TIMES\", \"GLOBAL_ACTIVE_POWER\", \"GLOBAL_REACTIVE_POWER\", \"VOLTAGE\", \"GLOBAL_INTENSITY\", \"SUB_METERING_1\", \"SUB_METERING_2\", \"SUB_METERING_3\") "],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create baseline and new data ","message":["%r","","test_base <- test[test$DATES < \"2008-01-01\",]","test_new <- test[test$DATES > \"2007-12-31\",]","","# Create OML proxy objects","","ore.create(test_base, table=\"HOUSEHOLD_POWER_BASE\")","ore.create(test_new, table=\"HOUSEHOLD_POWER_NEW\")"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View the baseline data","message":["%sql","","SELECT * FROM HOUSEHOLD_POWER_BASE","FETCH FIRST 5 ROWS ONLY;"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View new data","message":["%sql","","SELECT * FROM HOUSEHOLD_POWER_NEW","FETCH FIRST 5 ROWS ONLY;"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of script"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]