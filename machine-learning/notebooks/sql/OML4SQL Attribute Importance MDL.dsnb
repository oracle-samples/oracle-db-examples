[{"layout":null,"template":null,"templateConfig":null,"name":"OML4SQL Attribute Importance MDL","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1715349539600,"interpreter":"md.low","endTime":1715349539756,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Identify key factors","","Oracle Machine Learning supports Attribute Importance to identify key factors (a.k.a. attributes, predictors, variables) that have the most influence on a target attribute. In this example, we build an Attribute Importance model, which uses the Minimum Description Length algorithm on data from the SH schema. All functionality runs inside Oracle Autonomous Database.","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1715349539841,"interpreter":"md.low","endTime":1715349539941,"results":[{"message":"<h2 id=\"identify-key-factors\">Identify key factors<\/h2>\n<p>Oracle Machine Learning supports Attribute Importance to identify key factors (a.k.a. attributes, predictors, variables) that have the most influence on a target attribute. In this example, we build an Attribute Importance model, which uses the Minimum Description Length algorithm on data from the SH schema. All functionality runs inside Oracle Autonomous Database.<\/p>\n<p>Copyright (c) 2024 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":9,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","<dl>","<img src=\"http://www.oracle.com/technetwork/database/options/advanced-analytics/attributeimportance-5663163.jpg\" alt=\"OML Notebooks\" width=\"300\"/>","<\/dl>"],"enabled":true,"result":{"startTime":1715349540020,"interpreter":"md.low","endTime":1715349540099,"results":[{"message":"<dl>\n<img src=\"http://www.oracle.com/technetwork/database/options/advanced-analytics/attributeimportance-5663163.jpg\" alt=\"OML Notebooks\" width=\"300\"/>\n<\/dl>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":3,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md","","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://www.oracle.com/goto/ml-feature-selection\" target=\"_blank\">OML Attribute Importance<\/a>"],"enabled":true,"result":{"startTime":1715349540188,"interpreter":"md.low","endTime":1715349540268,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a><\/li>\n<li><a href=\"https://www.oracle.com/goto/ml-feature-selection\" target=\"_blank\">OML Attribute Importance<\/a><\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View rows from the SH.SUPPLEMENTARY_DEMOGRAPHICS table","message":["%sql","","SELECT * ","FROM SH.SUPPLEMENTARY_DEMOGRAPHICS","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1715349540347,"interpreter":"sql.low","endTime":1715349542056,"results":[{"message":"CUST_ID\tEDUCATION\tOCCUPATION\tHOUSEHOLD_SIZE\tYRS_RESIDENCE\tAFFINITY_CARD\tBULK_PACK_DISKETTES\tFLAT_PANEL_MONITOR\tHOME_THEATER_PACKAGE\tBOOKKEEPING_APPLICATION\tPRINTER_SUPPLIES\tY_BOX_GAMES\tOS_DOC_SET_KANJI\tCOMMENTS\n102547\t10th\tOther\t1\t0\t0\t1\t1\t0\t0\t1\t1\t0\t\n101050\t10th\tOther\t1\t0\t0\t1\t1\t0\t0\t1\t1\t0\t\n100040\t11th\tSales\t1\t0\t0\t1\t1\t0\t0\t1\t1\t0\t\n102117\tHS-grad\tFarming\t1\t0\t0\t0\t0\t0\t1\t1\t1\t0\t\n101074\t10th\tHandler\t1\t1\t0\t1\t1\t0\t0\t1\t1\t0\t\n104179\t10th\tHandler\t1\t1\t0\t1\t1\t0\t0\t1\t1\t0\t\n100417\t11th\tHandler\t1\t1\t0\t0\t0\t0\t0\t1\t1\t0\t\n101146\t< Bach.\t?\t1\t1\t0\t1\t1\t0\t1\t1\t1\t0\t\n103420\t< Bach.\t?\t1\t1\t0\t1\t1\t0\t1\t1\t1\t0\t\n101987\t< Bach.\tOther\t1\t1\t0\t1\t1\t0\t1\t1\t1\t0\t\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"List the columns in the SUPPLEMENTARY_DEMOGRAPHICS table","message":["%sql","","SELECT COLUMN_ID ID, COLUMN_NAME NAME, DATA_TYPE TYPE, DATA_LENGTH LENGTH","FROM   ALL_TAB_COLUMNS ","WHERE  OWNER='SH' AND TABLE_NAME='SUPPLEMENTARY_DEMOGRAPHICS'","ORDER BY COLUMN_ID;"],"enabled":true,"result":{"startTime":1715349542143,"interpreter":"sql.low","endTime":1715349542339,"results":[{"message":"ID\tNAME\tTYPE\tLENGTH\n1\tCUST_ID\tNUMBER\t22\n2\tEDUCATION\tVARCHAR2\t21\n3\tOCCUPATION\tVARCHAR2\t21\n4\tHOUSEHOLD_SIZE\tVARCHAR2\t21\n5\tYRS_RESIDENCE\tNUMBER\t22\n6\tAFFINITY_CARD\tNUMBER\t22\n7\tBULK_PACK_DISKETTES\tNUMBER\t22\n8\tFLAT_PANEL_MONITOR\tNUMBER\t22\n9\tHOME_THEATER_PACKAGE\tNUMBER\t22\n10\tBOOKKEEPING_APPLICATION\tNUMBER\t22\n11\tPRINTER_SUPPLIES\tNUMBER\t22\n12\tY_BOX_GAMES\tNUMBER\t22\n13\tOS_DOC_SET_KANJI\tNUMBER\t22\n14\tCOMMENTS\tVARCHAR2\t4000\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Count the number of records","message":["%sql","","SELECT COUNT(*) ","FROM SH.SUPPLEMENTARY_DEMOGRAPHICS;"],"enabled":true,"result":{"startTime":1715349542419,"interpreter":"sql.low","endTime":1715349542570,"results":[{"message":"COUNT(*)\n4500\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":4,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"table\":{\"version\":1},\"pie\":{\"aggregationOption\":\"Sum\",\"lastColumns\":[\"NUM_CUSTOMERS\",\"EDUCATION\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"pie","title":"Create a pie chart for EDUCATION levels","message":["%sql ","","SELECT COUNT(CUST_ID) AS NUM_CUSTOMERS, EDUCATION ","FROM   SH.SUPPLEMENTARY_DEMOGRAPHICS ","GROUP BY EDUCATION;","  "],"enabled":true,"result":{"startTime":1715349542668,"interpreter":"sql.low","endTime":1715349542751,"results":[{"message":"NUM_CUSTOMERS\tEDUCATION\n122\t10th\n94\tProfsc\n172\tAssoc-A\n52\t12th\n3\tPresch.\n1041\t< Bach.\n76\t9th\n779\tBach.\n190\tMasters\n49\tPhD\n17\t1st-4th\n1462\tHS-grad\n39\t5th-6th\n121\t11th\n196\tAssoc-V\n87\t7th-8th\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":8,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create DEMOGRAPHICS_V view","message":["%script","","CREATE OR REPLACE VIEW DEMOGRAPHICS_V","  AS (SELECT AFFINITY_CARD, BOOKKEEPING_APPLICATION, BULK_PACK_DISKETTES,","             CUST_ID, EDUCATION, FLAT_PANEL_MONITOR, ","             HOME_THEATER_PACKAGE, HOUSEHOLD_SIZE, OCCUPATION,","             OS_DOC_SET_KANJI, PRINTER_SUPPLIES, ","             YRS_RESIDENCE, Y_BOX_GAMES","      FROM SH.SUPPLEMENTARY_DEMOGRAPHICS);"],"enabled":true,"result":{"startTime":1715349542836,"interpreter":"script.low","endTime":1715349543164,"results":[{"message":"\nView DEMOGRAPHICS_V created.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Compute Attribute Importance to predict AFFINITY_CARD","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('AI_EXPLAIN_OUTPUT');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","DECLARE","    v_setlst DBMS_DATA_MINING.SETTING_LIST;","BEGIN","    v_setlst('ALGO_NAME')  := 'ALGO_AI_MDL';","    V_setlst('PREP_AUTO')  := 'ON';","","    DBMS_DATA_MINING.CREATE_MODEL2(","        MODEL_NAME          => 'AI_EXPLAIN_OUTPUT',","        MINING_FUNCTION     => 'ATTRIBUTE_IMPORTANCE',","        DATA_QUERY          => 'select * from DEMOGRAPHICS_V',","        SET_LIST            => v_setlst,","        CASE_ID_COLUMN_NAME => 'CUST_ID',","        TARGET_COLUMN_NAME  => 'AFFINITY_CARD');","END;"],"enabled":true,"result":{"startTime":1715349543249,"interpreter":"script.low","endTime":1715349544750,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display attributes that most highly influence AFFINITY_CARD responders","message":["%sql","","-- HINT: To see the model view, select * from DM$VA[model_name] ","-- NOTE: PARTITION_NAME (not shown) could optionally be used to build multiple models partitioned by another attribute e.g. HOUSEHOLD_SIZE","-- NOTE: The last few attributes have importance value zero, meaning they do not appear to have any predictive value to the target","","SELECT ATTRIBUTE_NAME, ","       round(ATTRIBUTE_IMPORTANCE_VALUE,3) as IMPORTANCE_VALUE, ","       ATTRIBUTE_RANK as RANK ","FROM   DM$VAAI_EXPLAIN_OUTPUT;"],"enabled":true,"result":{"startTime":1715349544834,"interpreter":"sql.low","endTime":1715349544939,"results":[{"message":"ATTRIBUTE_NAME\tIMPORTANCE_VALUE\tRANK\nHOUSEHOLD_SIZE\t0.17\t1\nYRS_RESIDENCE\t0.093\t2\nY_BOX_GAMES\t0.08\t3\nOCCUPATION\t0.073\t4\nHOME_THEATER_PACKAGE\t0.059\t5\nEDUCATION\t0.055\t6\nBOOKKEEPING_APPLICATION\t0.016\t7\nOS_DOC_SET_KANJI\t0\t8\nFLAT_PANEL_MONITOR\t0\t8\nBULK_PACK_DISKETTES\t0\t8\nPRINTER_SUPPLIES\t0\t8\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"table\":{\"version\":1},\"bar\":{\"showSeries\":[\"ATTRIBUTE_IMPORTANCE_VALUE\"],\"aggregationOption\":\"Last\",\"visualizations\":{\"orientationValue\":\"horizontal\"},\"series\":{\"availableSeriesElements\":[{\"id\":\"ATTRIBUTE_IMPORTANCE_VALUE\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"axis\":{\"x\":{\"title\":\"Attribute Name\"},\"y\":{\"title\":\"Attribute Importance Value\"}},\"lastColumns\":[\"PARTITION_NAME\",\"ATTRIBUTE_NAME\",\"ATTRIBUTE_SUBNAME\",\"ATTRIBUTE_IMPORTANCE_VALUE\",\"ATTRIBUTE_RANK\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Graph the attributes that most highly influence AFFINITY_CARD high responders","message":["%sql","","-- Use all or a subset of these ranked attributes to create a view or table to be used for model building. ","","SELECT * ","FROM  DM$VAAI_EXPLAIN_OUTPUT ","WHERE ATTRIBUTE_IMPORTANCE_VALUE > 0;"],"enabled":true,"result":{"startTime":1715349545017,"interpreter":"sql.low","endTime":1715349545114,"results":[{"message":"PARTITION_NAME\tATTRIBUTE_NAME\tATTRIBUTE_SUBNAME\tATTRIBUTE_IMPORTANCE_VALUE\tATTRIBUTE_RANK\n\tHOUSEHOLD_SIZE\t\t0.17020901422481358\t1\n\tYRS_RESIDENCE\t\t0.09263171222605261\t2\n\tY_BOX_GAMES\t\t0.08047519052735323\t3\n\tOCCUPATION\t\t0.07326430194812888\t4\n\tHOME_THEATER_PACKAGE\t\t0.05947446169132723\t5\n\tEDUCATION\t\t0.055244835630926394\t6\n\tBOOKKEEPING_APPLICATION\t\t0.01579747971902341\t7\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1715349545195,"interpreter":"md.low","endTime":1715349545263,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":{"startTime":1715349545352,"interpreter":"md.low","endTime":1715349545420,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]