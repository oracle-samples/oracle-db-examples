{"paragraphs":[{"text":"%md\r\n## OML4SQL Data Cleaning: Recode Synonymous Values\r\nIn this notebook, we demonstrate how to recode synonymous value of a column using Oracle SQL. \r\n\r\nWe use the customer insurance lifetime value data set, which contains customer financial information, lifetime value, and whether or not the customer bought insurance.\r\n\r\nThe dataset `CUSTOMER_INSURANCE_LTV_SQL` has recoded values generated by the `\"OML Run-me-first\"` notebook artificially, which `MUST` be run before this notebook. Specifically, ***MARITAL_STATUS*** has divorced status coded as 'DIV', married coded as 'M'. \r\n\r\n\r\n---\r\n\r\n##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.\r\n\r\n---\r\n\r\nCopyright (c) 2021 Oracle Corporation \r\n###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a>\r\n---","user":"OMLUSER","dateUpdated":"2021-08-25T05:17:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h2>OML4SQL Data Cleaning: Recode Synonymous Values</h2>\n<p>In this notebook, we demonstrate how to recode synonymous value of a column using Oracle SQL.</p>\n<p>We use the customer insurance lifetime value data set, which contains customer financial information, lifetime value, and whether or not the customer bought insurance.</p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV_SQL</code> has recoded values generated by the <code>\"OML Run-me-first\"</code> notebook artificially, which <code>MUST</code> be run before this notebook. Specifically, <strong><em>MARITAL_STATUS</em></strong> has divorced status coded as 'DIV', married coded as 'M'.</p>\n<hr />\n<h5><code>IMPORTANT</code>: The <code>\"OML Run-me-first\"</code> notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.</h5>\n<hr />\n<p>Copyright (c) 2021 Oracle Corporation</p>\n<h6><a href=\"https: //oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0</a></h6>\n<hr />\n"}]},"interrupted":false,"jobName":"paragraph_1629867962841_1407464213","id":"20210825-050602_1150808933","dateCreated":"2020-12-14T21:32:59+0000","dateStarted":"2021-08-25T05:17:22+0000","dateFinished":"2021-08-25T05:17:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:40"},{"title":"Check distinct MARITAL_STATUS values that may need recoding, e.g., DIV and M","text":"%sql\n\nSELECT DISTINCT MARITAL_STATUS\nFROM CUSTOMER_INSURANCE_LTV_SQL","user":"OMLUSER","dateUpdated":"2021-08-25T05:17:22+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/text","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":244.667,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"MARITAL_STATUS":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MARITAL_STATUS\nOTHER\nWIDOWED\nM\nMARRIED\nSINGLE\nDIV\nDIVORCED\n"}]},"interrupted":false,"jobName":"paragraph_1629867962841_1003385589","id":"20210825-050602_2079902940","dateCreated":"2020-12-08T03:00:55+0000","dateStarted":"2021-08-25T05:17:23+0000","dateFinished":"2021-08-25T05:17:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:41"},{"title":"Create view with recoded MARITAL_STATUS","text":"%sql\n\ncreate or replace view customer_recode_v as\nSELECT a.MARITAL_STATUS_CONVERTED, b.*\nFROM (\n    SELECT CUSTOMER_ID, \n        CASE WHEN MARITAL_STATUS = 'DIV' THEN 'DIVORCED' ELSE \n            (CASE WHEN MARITAL_STATUS = 'M' THEN 'MARRIED' ELSE \n                (CASE WHEN MARITAL_STATUS IS NULL THEN 'UNKNOWN' ELSE\n                    MARITAL_STATUS  \n                END) \n            END)\n        END AS MARITAL_STATUS_CONVERTED\n    FROM CUSTOMER_INSURANCE_LTV_SQL ) a\nJOIN CUSTOMER_INSURANCE_LTV_SQL b\nON a.CUSTOMER_ID = b.CUSTOMER_ID\n","user":"OMLUSER","dateUpdated":"2021-08-25T05:17:23+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{"columns":[{"name":"MARITAL_STATUS_CONVERTED","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"MARITAL_STATUS","visible":true,"width":181,"sort":{},"filters":[{}],"pinned":""},{"name":"STATE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CREDIT_BALANCE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CUSTOMER_TENURE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"MORTGAGE_AMOUNT","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"BANK_FUNDS","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"NUM_DEPENDENTS","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"HAS_CHILDREN","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"INCOME","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CUSTOMER_ID","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"GENDER","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"PROFESSION","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CREDIT_CARD_LIMITS","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"REGION","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"HOME_OWNERSHIP","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"NUM_ONLINE_TRANS","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"BUY_INSURANCE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"MONTHLY_CHECKS","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"NUM_TRANS_KIOSK","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"AGE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"MONEY_MONTLY_OVERDRAWN","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"LTV","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"TOTAL_AUTOM_PAYMENTS","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"NUM_TRANS_TELLER","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CHECKING_BALANCE","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"NUM_TRANS_ATM","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"LTV_BIN","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"FIRST_NAME","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"NUM_MORTGAGES","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"CAR_OWNERSHIP","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""},{"name":"LAST_NAME","visible":true,"width":"*","sort":{},"filters":[{}],"pinned":""}],"scrollFocus":{},"selection":[],"grouping":{"grouping":[],"aggregations":[],"rowExpandedStates":{}},"treeView":{},"pagination":{"paginationCurrentPage":1,"paginationPageSize":250}},"tableColumnTypeState":{"names":{"MARITAL_STATUS":"string","STATE":"string","CREDIT_BALANCE":"string","CUSTOMER_TENURE":"string","MORTGAGE_AMOUNT":"string","BANK_FUNDS":"string","NUM_DEPENDENTS":"string","HAS_CHILDREN":"string","INCOME":"string","CUSTOMER_ID":"string","GENDER":"string","PROFESSION":"string","CREDIT_CARD_LIMITS":"string","REGION":"string","HOME_OWNERSHIP":"string","NUM_ONLINE_TRANS":"string","BUY_INSURANCE":"string","MONTHLY_CHECKS":"string","NUM_TRANS_KIOSK":"string","AGE":"string","MONEY_MONTLY_OVERDRAWN":"string","LTV":"string","TOTAL_AUTOM_PAYMENTS":"string","NUM_TRANS_TELLER":"string","CHECKING_BALANCE":"string","NUM_TRANS_ATM":"string","LTV_BIN":"string","FIRST_NAME":"string","NUM_MORTGAGES":"string","CAR_OWNERSHIP":"string","LAST_NAME":"string","MARITAL_STATUS_CONVERTED":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1629867962841_1074076100","id":"20210825-050602_305026938","dateCreated":"2020-12-08T03:03:15+0000","dateStarted":"2021-08-25T05:17:23+0000","dateFinished":"2021-08-25T05:17:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:42"},{"title":"Display summary of recoded MARITAL_STATUS values","text":"%sql\n\nselect MARITAL_STATUS_CONVERTED, MARITAL_STATUS, count(1) \nfrom customer_recode_v\ngroup by MARITAL_STATUS_CONVERTED, MARITAL_STATUS","user":"OMLUSER","dateUpdated":"2021-08-25T05:17:23+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"MARITAL_STATUS_CONVERTED":"string","MARITAL_STATUS":"string","COUNT(1)":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MARITAL_STATUS_CONVERTED\tMARITAL_STATUS\tCOUNT(1)\nDIVORCED\tDIV\t389\nMARRIED\tM\t407\nDIVORCED\tDIVORCED\t2335\nSINGLE\tSINGLE\t2890\nWIDOWED\tWIDOWED\t523\nUNKNOWN\t\t7525\nMARRIED\tMARRIED\t2703\nOTHER\tOTHER\t108\n"}]},"interrupted":false,"jobName":"paragraph_1629867962841_904331883","id":"20210825-050602_229777758","dateCreated":"2020-12-08T03:05:45+0000","dateStarted":"2021-08-25T05:17:24+0000","dateFinished":"2021-08-25T05:17:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:43"},{"title":"Check distinct values after conversion","text":"%sql\n\nselect distinct MARITAL_STATUS_CONVERTED \nfrom customer_recode_v","user":"OMLUSER","dateUpdated":"2021-08-25T05:17:24+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"MARITAL_STATUS_CONVERTED":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/text","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MARITAL_STATUS_CONVERTED\nOTHER\nWIDOWED\nMARRIED\nUNKNOWN\nSINGLE\nDIVORCED\n"}]},"interrupted":false,"jobName":"paragraph_1629867962841_297324939","id":"20210825-050602_1992681302","dateCreated":"2020-12-21T20:38:34+0000","dateStarted":"2021-08-25T05:17:24+0000","dateFinished":"2021-08-25T05:17:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:44"},{"text":"%md\n\n# End of Script\n","user":"OMLUSER","dateUpdated":"2021-08-25T05:17:24+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>End of Script</h1>\n"}]},"interrupted":false,"jobName":"paragraph_1629867962841_-275675433","id":"20210825-050602_1273383806","dateCreated":"2020-12-10T04:40:21+0000","dateStarted":"2021-08-25T05:17:25+0000","dateFinished":"2021-08-25T05:17:25+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:45"},{"text":"%md\n","user":"OMLUSER","dateUpdated":"2020-12-23T14:15:38+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1629867962841_1221277428","id":"20210825-050602_722686207","dateCreated":"2020-12-17T19:15:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:46"}],"name":"OML4SQL Data Cleaning Recode Synonymous Values","id":"74352","noteParams":{},"noteForms":{},"angularObjects":{"MDW381939C745:shared_process":[],"ORACED2F65282:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}