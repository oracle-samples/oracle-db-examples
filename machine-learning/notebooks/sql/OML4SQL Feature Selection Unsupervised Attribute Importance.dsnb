[{"layout":null,"template":null,"templateConfig":null,"name":"OML4SQL Feature Selection Unsupervised Attribute Importance","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1715705326403,"interpreter":"md.low","endTime":1715705326715,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML4SQL Feature Selection: Unsupervised Attribute Importance","In this notebook, we demonstrate how to perform feature selection using the in-database unsupervised algorithm Expectation Maximization (EM).","","We use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.","","The dataset `CUSTOMER_INSURANCE_LTV_SQL` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.","","---","","##### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.","","---","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1715705579895,"interpreter":"md.low","endTime":1715705579957,"results":[{"message":"<h1 id=\"oml4sql-feature-selection-unsupervised-attribute-importance\">OML4SQL Feature Selection: Unsupervised Attribute Importance<\/h1>\n<p>In this notebook, we demonstrate how to perform feature selection using the in-database unsupervised algorithm Expectation Maximization (EM).<\/p>\n<p>We use the customer insurance lifetime value data set which contains customer financial information, lifetime value, and whether or not the customer bought insurance.<\/p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV_SQL<\/code> is generated by the <code>&quot;OML Run-me-first&quot;<\/code> notebook, which <code>MUST<\/code> be run before this notebook.<\/p>\n<hr />\n<h5 id=\"important-the-oml-run-me-first-notebook-is-available-under-the-menu-templates---examples-and-is-a-pre-requisite-to-the-current-notebook\"><code>IMPORTANT<\/code>: The <code>&quot;OML Run-me-first&quot;<\/code> notebook is available under the menu Templates -&gt; Examples and is a pre-requisite to the current notebook.<\/h5>\n<hr />\n<p>Copyright (c) 2024 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information ...","message":["%md","","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://oracle.com/goto/ml-expectation-maximization\" target=\"_blank\">OML Expectation Maximization<\/a>"],"enabled":true,"result":{"startTime":1715705327026,"interpreter":"md.low","endTime":1715705327102,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a><\/li>\n<li><a href=\"https://oracle.com/goto/ml-expectation-maximization\" target=\"_blank\">OML Expectation Maximization<\/a><\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Examples of possible setting overrides for Expectation-Maximization clustering","","If the user does not override the default settings, then relevant settings are determined by the algorithm.","","A complete list of settings can be found in the Documentation link:","","* Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8');\"> Expectation-Maximization clustering<\/a>","","* Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B');\">All algorithms<\/a>","","* Machine Learning Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12');\"> ML settings <\/a>","","* Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is `ODMS_MISSING_VALUE_AUTO`.  The option `ODMS_MISSING_VALUE_MEAN_MODE` replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option `ODMS_MISSING_VALUE_AUTO` performs different strategies for different algorithms.  When `ODMS_MISSING_VALUE_TREATMENT` is set to `ODMS_MISSING_VALUE_DELETE_ROW`, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.","    v_setlst('ODMS_MISSING_VALUE_TREATMENT') := 'ODMS_MISSING_VALUE_AUTO';","    ","*  Specify the maximum number of leaf clusters generated by a clustering algorithm. ","  The algorithm may return fewer clusters, depending on the data. Expectation maximization (EM) may return fewer clusters than the number specified by CLUS_NUM_CLUSTERS depending on the data. The number of clusters returned by EM cannot be greater than the number of components, which is governed by algorithm-specific settings (see Expectation Maximization Settings for Learning table).  Depending on these settings, there may be fewer clusters than components. If component clustering is disabled, the number of clusters equals the number of components.  ","  For EM, the default value of CLUS_NUM_CLUSTERS is system-determined. For k-Means and O-Cluster, the default is 10. ","> v_setlst('CLUS_NUM_CLUSTERS')       := '5';","","#### Expectation Maximization Settings for Learning     ","* Specify this setting to enable model search in EM where different model sizes are explored and a best size is selected.","  It requires `EMCS_MODEL_SEARCH_ENABLE` or `EMCS_MODEL_SEARCH_DISABLE`.  The default is `EMCS_MODEL_SEARCH_DISABLE`.      ","> v_setlst('EMCS_MODEL_SEARCH')       := 'EMCS_MODEL_SEARCH_ENABLE';","","* Specify the maximum number of iterations in the EM algorithm.","  It requires a number larger than 1.  The default is 100. ","> v_setlst('EMCS_NUM_ITERATIONS')     := '20';","","#### Expectation Maximization Settings for Cluster Statistics","*  Specify whether to enable or disable the gathering of descriptive statistics for clusters (centroids, histograms, and rules).  When statistics are disabled, model size is reduced, and `GET_MODEL_DETAILS_EM` only returns taxonomy (hierarchy) and cluster counts.","  It requires either `EMCS_CLUS_STATS_ENABLE` or `EMCS_CLUS_STATS_DISABLE`.  Default is `EMCS_CLUS_STATS_ENABLE`.     ","> v_setlst('EMCS_CLUSTER_STATISTICS') := 'EMCS_CLUS_STATS_ENABLE';","     ","#### Expectation Maximization Settings for Data Preparation and Analysis","* Specify the number of quantile bins that will be used for modeling numeric columns with multivalued Bernoulli distributions.","  It requires a number larger than 1 and up to 255 (inclusive).  The default is system-determined.","> v_setlst('EMCS_NUM_QUANTILE_BINS')  := '10';","","---"],"enabled":true,"result":{"startTime":1715705327186,"interpreter":"md.low","endTime":1715705327297,"results":[{"message":"<h3 id=\"examples-of-possible-setting-overrides-for-expectation-maximization-clustering\">Examples of possible setting overrides for Expectation-Maximization clustering<\/h3>\n<p>If the user does not override the default settings, then relevant settings are determined by the algorithm.<\/p>\n<p>A complete list of settings can be found in the Documentation link:<\/p>\n<ul>\n<li>\n<p>Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-1796B451-BE1B-43BC-9839-05F5F73031C8');\"> Expectation-Maximization clustering<\/a><\/p>\n<\/li>\n<li>\n<p>Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/1/mlpug/shared-settings.html#GUID-2EFF3880-F2E2-4449-A8CC-2CF516DD096B');\">All algorithms<\/a><\/p>\n<\/li>\n<li>\n<p>Machine Learning Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/oracle-database/21/arpls/DBMS_DATA_MINING.html#GUID-CE514371-EC80-41EA-AB07-7F6501687D12');\"> ML settings <\/a><\/p>\n<\/li>\n<li>\n<p>Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is <code>ODMS_MISSING_VALUE_AUTO<\/code>.  The option <code>ODMS_MISSING_VALUE_MEAN_MODE<\/code> replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option <code>ODMS_MISSING_VALUE_AUTO<\/code> performs different strategies for different algorithms.  When <code>ODMS_MISSING_VALUE_TREATMENT<\/code> is set to <code>ODMS_MISSING_VALUE_DELETE_ROW<\/code>, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.\nv_setlst('ODMS_MISSING_VALUE_TREATMENT') := 'ODMS_MISSING_VALUE_AUTO';<\/p>\n<\/li>\n<li>\n<p>Specify the maximum number of leaf clusters generated by a clustering algorithm.\nThe algorithm may return fewer clusters, depending on the data. Expectation maximization (EM) may return fewer clusters than the number specified by CLUS_NUM_CLUSTERS depending on the data. The number of clusters returned by EM cannot be greater than the number of components, which is governed by algorithm-specific settings (see Expectation Maximization Settings for Learning table).  Depending on these settings, there may be fewer clusters than components. If component clustering is disabled, the number of clusters equals the number of components.<br />\nFor EM, the default value of CLUS_NUM_CLUSTERS is system-determined. For k-Means and O-Cluster, the default is 10.<\/p>\n<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('CLUS_NUM_CLUSTERS')       := '5';<\/p>\n<\/blockquote>\n<h4 id=\"expectation-maximization-settings-for-learning\">Expectation Maximization Settings for Learning<\/h4>\n<ul>\n<li>Specify this setting to enable model search in EM where different model sizes are explored and a best size is selected.\nIt requires <code>EMCS_MODEL_SEARCH_ENABLE<\/code> or <code>EMCS_MODEL_SEARCH_DISABLE<\/code>.  The default is <code>EMCS_MODEL_SEARCH_DISABLE<\/code>.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('EMCS_MODEL_SEARCH')       := 'EMCS_MODEL_SEARCH_ENABLE';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the maximum number of iterations in the EM algorithm.\nIt requires a number larger than 1.  The default is 100.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('EMCS_NUM_ITERATIONS')     := '20';<\/p>\n<\/blockquote>\n<h4 id=\"expectation-maximization-settings-for-cluster-statistics\">Expectation Maximization Settings for Cluster Statistics<\/h4>\n<ul>\n<li>Specify whether to enable or disable the gathering of descriptive statistics for clusters (centroids, histograms, and rules).  When statistics are disabled, model size is reduced, and <code>GET_MODEL_DETAILS_EM<\/code> only returns taxonomy (hierarchy) and cluster counts.\nIt requires either <code>EMCS_CLUS_STATS_ENABLE<\/code> or <code>EMCS_CLUS_STATS_DISABLE<\/code>.  Default is <code>EMCS_CLUS_STATS_ENABLE<\/code>.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('EMCS_CLUSTER_STATISTICS') := 'EMCS_CLUS_STATS_ENABLE';<\/p>\n<\/blockquote>\n<h4 id=\"expectation-maximization-settings-for-data-preparation-and-analysis\">Expectation Maximization Settings for Data Preparation and Analysis<\/h4>\n<ul>\n<li>Specify the number of quantile bins that will be used for modeling numeric columns with multivalued Bernoulli distributions.\nIt requires a number larger than 1 and up to 255 (inclusive).  The default is system-determined.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('EMCS_NUM_QUANTILE_BINS')  := '10';<\/p>\n<\/blockquote>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Build the EM Clustering model with explicit settings of 1 cluster (for Feature Selection)","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('EM_FEAT_SELECTION');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","DECLARE","    V_SETLST DBMS_DATA_MINING.SETTING_LIST;","BEGIN","    V_SETLST('ALGO_NAME')               := 'ALGO_EXPECTATION_MAXIMIZATION';","    V_SETLST('PREP_AUTO')               := 'ON';","    V_SETLST('CLUS_NUM_CLUSTERS')       := '1';","    V_SETLST('EMCS_MODEL_SEARCH')       := 'EMCS_MODEL_SEARCH_ENABLE';","    V_SETLST('EMCS_CLUSTER_STATISTICS') := 'EMCS_CLUS_STATS_ENABLE';","    V_SETLST('EMCS_NUM_ITERATIONS')     := '20';","    V_SETLST('EMCS_NUM_QUANTILE_BINS')  := '10';","    V_SETLST('EMCS_RANDOM_SEED')        := '123456';","","    DBMS_DATA_MINING.CREATE_MODEL2(","        MODEL_NAME          => 'EM_FEAT_SELECTION',","        MINING_FUNCTION     => 'CLUSTERING',","        DATA_QUERY          => 'SELECT * FROM CUSTOMER_INSURANCE_LTV',","        SET_LIST            => V_SETLST,","        CASE_ID_COLUMN_NAME => 'CUSTOMER_ID');","END;"],"enabled":true,"result":{"startTime":1715705327390,"interpreter":"script.low","endTime":1715705338714,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":" Check the attribute ranks in the model view","message":["%sql","","SELECT   ATTRIBUTE_RANK,","         ATTRIBUTE_NAME, ","         ROUND(ATTRIBUTE_IMPORTANCE_VALUE, 4) IMPORTANCE_VALUE ","FROM     DM$VIEM_FEAT_SELECTION","ORDER BY ATTRIBUTE_RANK","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1715705338797,"interpreter":"sql.low","endTime":1715705338990,"results":[{"message":"ATTRIBUTE_RANK\tATTRIBUTE_NAME\tIMPORTANCE_VALUE\n1\tHOME_OWNERSHIP\t0.3408\n2\tNUM_MORTGAGES\t0.3406\n3\tMORTGAGE_AMOUNT\t0.3359\n4\tCUSTOMER_TENURE\t0.2928\n5\tLTV\t0.2893\n6\tLTV_BIN\t0.2876\n7\tNUM_DEPENDENTS\t0.2874\n8\tMARITAL_STATUS\t0.2725\n9\tNUM_ONLINE_TRANS\t0.2476\n10\tNUM_TRANS_ATM\t0.2422\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"bar\":{\"showSeries\":[\"IMPORTANCE_VALUE\"],\"aggregationOption\":\"Last\",\"series\":{\"availableSeriesElements\":[{\"id\":\"IMPORTANCE_VALUE\",\"lineType\":\"straight\",\"borderColor\":\"rgb(50, 146, 94)\",\"borderWidth\":0,\"color\":\"rgb(50, 146, 94)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(50, 146, 94)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"lastColumns\":[\"ATTRIBUTE_RANK\",\"ATTRIBUTE_NAME\",\"IMPORTANCE_VALUE\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":" Check the top 10 attributes by importance","message":["%sql","","SELECT   ATTRIBUTE_RANK,","         ATTRIBUTE_NAME, ","         ROUND(ATTRIBUTE_IMPORTANCE_VALUE, 4) IMPORTANCE_VALUE ","FROM     DM$VIEM_FEAT_SELECTION","ORDER BY ATTRIBUTE_RANK","FETCH FIRST 10 ROWS ONLY"],"enabled":true,"result":{"startTime":1715705339067,"interpreter":"sql.low","endTime":1715705339142,"results":[{"message":"ATTRIBUTE_RANK\tATTRIBUTE_NAME\tIMPORTANCE_VALUE\n1\tHOME_OWNERSHIP\t0.3408\n2\tNUM_MORTGAGES\t0.3406\n3\tMORTGAGE_AMOUNT\t0.3359\n4\tCUSTOMER_TENURE\t0.2928\n5\tLTV\t0.2893\n6\tLTV_BIN\t0.2876\n7\tNUM_DEPENDENTS\t0.2874\n8\tMARITAL_STATUS\t0.2725\n9\tNUM_ONLINE_TRANS\t0.2476\n10\tNUM_TRANS_ATM\t0.2422\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Alternative approach to creating an Expectation Maximization clustering model using a settings table","","The settings table is an alternative way to specify algorithm settings to build the model. We first drop the table, create it, and then populate it with settings before building the model. ","","---"],"enabled":true,"result":{"startTime":1715705516674,"interpreter":"md.low","endTime":1715705516734,"results":[{"message":"<h2 id=\"alternative-approach-to-creating-an-expectation-maximization-clustering-model-using-a-settings-table\">Alternative approach to creating an Expectation Maximization clustering model using a settings table<\/h2>\n<p>The settings table is an alternative way to specify algorithm settings to build the model. We first drop the table, create it, and then populate it with settings before building the model.<\/p>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create setting table","message":["%script","","BEGIN EXECUTE IMMEDIATE 'DROP TABLE EM_LTV_SAMPLE_SETTINGS';","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","CREATE TABLE EM_LTV_SAMPLE_SETTINGS (","   SETTING_NAME  VARCHAR2(30),","   SETTING_VALUE VARCHAR2(4000));"],"enabled":true,"result":{"startTime":1715705339348,"interpreter":"script.low","endTime":1715705339620,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nTable EM_LTV_SAMPLE_SETTINGS created.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Add settings, set the number of maximum clusters to be 1","message":["%script","","BEGIN       ","   INSERT INTO EM_LTV_SAMPLE_SETTINGS (SETTING_NAME, SETTING_VALUE) VALUES (DBMS_DATA_MINING.ALGO_NAME, DBMS_DATA_MINING.ALGO_EXPECTATION_MAXIMIZATION);","   INSERT INTO EM_LTV_SAMPLE_SETTINGS (SETTING_NAME, SETTING_VALUE) VALUES (DBMS_DATA_MINING.PREP_AUTO, DBMS_DATA_MINING.PREP_AUTO_ON);","   INSERT INTO EM_LTV_SAMPLE_SETTINGS (SETTING_NAME, SETTING_VALUE) VALUES (DBMS_DATA_MINING.CLUS_NUM_CLUSTERS,1);","END;","/"],"enabled":true,"result":{"startTime":1715705339694,"interpreter":"script.low","endTime":1715705339832,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create EM model","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('EM_LTV_CLUS_SAMPLE');","EXCEPTION WHEN OTHERS THEN NULL; END;","","BEGIN","  DBMS_DATA_MINING.CREATE_MODEL(","    MODEL_NAME          => 'EM_LTV_CLUS_SAMPLE',","    MINING_FUNCTION     => DBMS_DATA_MINING.CLUSTERING,","    DATA_TABLE_NAME     => 'CUSTOMER_INSURANCE_LTV_SQL',","    CASE_ID_COLUMN_NAME => 'CUSTOMER_ID',","    SETTINGS_TABLE_NAME => 'EM_LTV_SAMPLE_SETTINGS');","END;","/"],"enabled":true,"result":{"startTime":1715705339910,"interpreter":"script.low","endTime":1715705348414,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":" The attribute ranks can be found in the model view","message":["%sql"," ","SELECT   ATTRIBUTE_RANK, ATTRIBUTE_NAME, ROUND(ATTRIBUTE_IMPORTANCE_VALUE, 4) IMPORTANCE_VALUE","FROM     DM$VIEM_LTV_CLUS_SAMPLE ","ORDER BY ATTRIBUTE_RANK","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1715705545506,"interpreter":"sql.low","endTime":1715705545583,"results":[{"message":"ATTRIBUTE_RANK\tATTRIBUTE_NAME\tIMPORTANCE_VALUE\n1\tHOME_OWNERSHIP\t0.3372\n2\tNUM_MORTGAGES\t0.3369\n3\tMORTGAGE_AMOUNT\t0.3007\n4\tLTV\t0.2985\n5\tLTV_BIN\t0.2966\n6\tCUSTOMER_TENURE\t0.2919\n7\tNUM_DEPENDENTS\t0.2863\n8\tNUM_TRANS_ATM\t0.2372\n9\tNUM_ONLINE_TRANS\t0.2366\n10\tSTATE\t0.2365\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1715705557074,"interpreter":"md.low","endTime":1715705557133,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":{"startTime":1715705348810,"interpreter":"md.low","endTime":1715705348873,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]