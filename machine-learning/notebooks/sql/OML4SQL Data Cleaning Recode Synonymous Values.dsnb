[{"layout":null,"template":null,"templateConfig":null,"name":"OML4SQL Data Cleaning Recode Synonymous Values","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML4SQL Data Cleaning: Recode Synonymous Values","In this notebook, we demonstrate how to recode synonymous value of a column using Oracle SQL. ","","We use the customer insurance lifetime value data set, which contains customer financial information, lifetime value, and whether or not the customer bought insurance.","","The dataset `CUSTOMER_INSURANCE_LTV_SQL` has recoded values generated by the `\"OML Run-me-first\"` notebook artificially, which `MUST` be run before this notebook. Specifically, ***MARITAL_STATUS*** has divorced status coded as 'DIV', married coded as 'M'. ","","","###### IMPORTANT: The `\"OML Run-me-first\"` notebook is available under the menu `Templates -> Examples` and is a pre-requisite to the current notebook.","","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md"," "," * <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Check distinct MARITAL_STATUS values that may need recoding, e.g., DIV and M","message":["%sql","","SELECT DISTINCT MARITAL_STATUS","FROM   CUSTOMER_INSURANCE_LTV_SQL;"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create view with recoded MARITAL_STATUS","message":["%sql","","CREATE OR REPLACE VIEW customer_recode_v AS","SELECT a.MARITAL_STATUS_CONVERTED, b.*","FROM (","    SELECT CUSTOMER_ID, ","           CASE WHEN MARITAL_STATUS = 'DIV' THEN 'DIVORCED' ELSE ","          (CASE WHEN MARITAL_STATUS = 'M'   THEN 'MARRIED'  ELSE ","          (CASE WHEN MARITAL_STATUS IS NULL THEN 'UNKNOWN'  ELSE","           MARITAL_STATUS  ","           END) ","           END)","        END AS MARITAL_STATUS_CONVERTED","    FROM CUSTOMER_INSURANCE_LTV_SQL ) a","JOIN CUSTOMER_INSURANCE_LTV_SQL b ","ON a.CUSTOMER_ID = b.CUSTOMER_ID"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{},\"table\":{\"version\":1},\"bar\":{\"series\":{\"availableSeriesElements\":[{\"id\":\"COUNT(1)\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"lastColumns\":[\"MARITAL_STATUS_CONVERTED\",\"MARITAL_STATUS\",\"COUNT(1)\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Display summary of recoded MARITAL_STATUS values","message":["%sql","","SELECT MARITAL_STATUS_CONVERTED, MARITAL_STATUS, count(1) COUNT","FROM   CUSTOMER_RECODE_V","GROUP BY MARITAL_STATUS_CONVERTED, MARITAL_STATUS;"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Check distinct values after conversion","message":["%sql","","SELECT DISTINCT MARITAL_STATUS_CONVERTED ","FROM   CUSTOMER_RECODE_V;"],"enabled":true,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":null,"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]