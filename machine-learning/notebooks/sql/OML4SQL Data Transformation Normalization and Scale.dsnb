[{"layout":null,"template":null,"templateConfig":null,"name":"OML4SQL Data Transformation Normalization and Scale","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1715350206106,"interpreter":"md.low","endTime":1715350206266,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML4SQL Data Transformation: Normalization and Scale","","In this notebook, we demonstrate how to normalize and scale data using Oracle SQL and the DBMS_DATA_MINING_TRANSFORM package.","","Using the customer insurance lifetime value data set, which contains customer financial information, lifetime value, and whether or not the customer bought insurance, we show how to normalize data usig using z-score (mean and standard deviation), min max scaling, and log scaling.","","The dataset `CUSTOMER_INSURANCE_LTV_SQL` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.","","---","","##### IMPORTANT: The `\"OML Run-me-first\"` notebook is available under the menu `Templates -> Examples` and is a pre-requisite to the current notebook.","","---","","**Note**: when building or applying a model using in-database Oracle Machine Learning algorithms, automatic data preparation will normalize data automatically as needed by specific algorithms.  ","For more details, see * <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/generalized-linear-model.html#GUID-19B8E133-0029-4892-88BB-3E1C9E83EB12\" target=\"_blank\">Data Preparation for GLM<\/a>","","Copyright (c) 2024 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1715350206343,"interpreter":"md.low","endTime":1715350206439,"results":[{"message":"<h1 id=\"oml4sql-data-transformation-normalization-and-scale\">OML4SQL Data Transformation: Normalization and Scale<\/h1>\n<p>In this notebook, we demonstrate how to normalize and scale data using Oracle SQL and the DBMS_DATA_MINING_TRANSFORM package.<\/p>\n<p>Using the customer insurance lifetime value data set, which contains customer financial information, lifetime value, and whether or not the customer bought insurance, we show how to normalize data usig using z-score (mean and standard deviation), min max scaling, and log scaling.<\/p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV_SQL<\/code> is generated by the <code>&quot;OML Run-me-first&quot;<\/code> notebook, which <code>MUST<\/code> be run before this notebook.<\/p>\n<hr />\n<h5 id=\"important-the-oml-run-me-first-notebook-is-available-under-the-menu-templates---examples-and-is-a-pre-requisite-to-the-current-notebook\">IMPORTANT: The <code>&quot;OML Run-me-first&quot;<\/code> notebook is available under the menu <code>Templates -&gt; Examples<\/code> and is a pre-requisite to the current notebook.<\/h5>\n<hr />\n<p><strong>Note<\/strong>: when building or applying a model using in-database Oracle Machine Learning algorithms, automatic data preparation will normalize data automatically as needed by specific algorithms.<br />\nFor more details, see * <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/generalized-linear-model.html#GUID-19B8E133-0029-4892-88BB-3E1C9E83EB12\" target=\"_blank\">Data Preparation for GLM<\/a><\/p>\n<p>Copyright (c) 2024 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information ...","message":["%md ","","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING_TRANSFORM.html\" target=\"_blank\">OML4SQL ORACLE_DATA_MINING_TRANSFORM Documentation<\/a>"],"enabled":true,"result":{"startTime":1715350220102,"interpreter":"md.low","endTime":1715350220161,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a><\/li>\n<li><a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING_TRANSFORM.html\" target=\"_blank\">OML4SQL ORACLE_DATA_MINING_TRANSFORM Documentation<\/a><\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display customer lifetime value data","message":["%sql","","SELECT *","FROM CUSTOMER_INSURANCE_LTV_SQL","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1715350206677,"interpreter":"sql.low","endTime":1715350208378,"results":[{"message":"MARITAL_STATUS\tSTATE\tCREDIT_BALANCE\tCUSTOMER_TENURE\tMORTGAGE_AMOUNT\tBANK_FUNDS\tNUM_DEPENDENTS\tHAS_CHILDREN\tINCOME\tCUSTOMER_ID\tGENDER\tPROFESSION\tCREDIT_CARD_LIMITS\tREGION\tHOME_OWNERSHIP\tNUM_ONLINE_TRANS\tBUY_INSURANCE\tMONTHLY_CHECKS\tNUM_TRANS_KIOSK\tAGE\tMONEY_MONTLY_OVERDRAWN\tLTV\tTOTAL_AUTOM_PAYMENTS\tNUM_TRANS_TELLER\tCHECKING_BALANCE\tNUM_TRANS_ATM\tLTV_BIN\tFIRST_NAME\tNUM_MORTGAGES\tCAR_OWNERSHIP\tLAST_NAME\nSINGLE\tCA                        \t0\t3\t400\t590\t3\t1\t61384\tCU8720                    \tM                         \tWaiter/Waitress\t1000\tWest\t1\t400\tYes\t2\t1\t23\t53.98\t18146\t208\t2\t25\t5\tMEDIUM\tKENNETH\t1\t1\tNADEAU\nDIVORCED\tWA                        \t0\t3\t2050\t650\t3\t1\t63525\tCU8721                    \tM                         \tSoftware Engineer\t1000\tWest\t1\t2050\tYes\t13\t3\t22\t54.35\t18581.25\t242\t2\t25\t5\tMEDIUM\tJARVIS\t1\t1\tCLARKE\nDIVORCED\tNY                        \t0\t4\t2500\t700\t1\t0\t71504\tCU8722                    \tF                         \tIT Staff\t1000\tNorthEast\t1\t2500\tNo\t1\t1\t42\t53.79\t32076\t393\t3\t118\t4\tVERY HIGH\tSTACEY\t1\t1\tHENSON\nMARRIED\tMI                        \t0\t1\t8320\t11050\t1\t1\t72308\tCU8665                    \tF                         \tDentist\t4000\tMidwest\t1\t1700\tYes\t14\t1\t33\t53.97\t24877\t650\t4\t25\t5\tHIGH\tMARGRET\t1\t1\tRYAN\nMARRIED\tMI                        \t0\t1\t1000\t0\t1\t1\t64710\tCU8666                    \tM                         \tIT Staff\t700\tMidwest\t1\t1000\tNo\t4\t1\t38\t53.17\t23477.5\t383\t0\t374\t2\tHIGH\tJOAN\t1\t1\tBAUER\nDIVORCED\tNC                        \t0\t4\t4000\t8800\t6\t1\t61332\tCU9108                    \tF                         \tPROF-15\t800\tSouth\t1\t1600\tYes\t1\t1\t66\t54.97\t16933\t1923\t4\t25\t5\tMEDIUM\tMARGART\t1\t1\tCALDWELL\nMARRIED\tTX                        \t0\t3\t845\t450\t3\t1\t62061\tCU9113                    \tM                         \tProgrammer/Developer\t1500\tSouthwest\t1\t845\tYes\t8\t6\t26\t53.01\t18615.25\t226\t2\t25\t2\tMEDIUM\tNICKY\t1\t1\tBARON\nSINGLE\tNV                        \t0\t2\t0\t0\t0\t0\t74394\tCU9114                    \tM                         \tSales Representative\t1500\tSouthwest\t0\t0\tNo\t0\t1\t0\t53.06\t0\t0\t0\t25\t0\tLOW\tHUNG\t0\t0\tFINNEY\nSINGLE\tMI                        \t0\t3\t0\t0\t3\t0\t64255\tCU8462                    \tM                         \tPROF-31\t1500\tMidwest\t0\t0\tNo\t1\t1\t28\t53.14\t14363.75\t0\t0\t25\t2\tMEDIUM\tFREDDIE\t0\t0\tMAYBERRY\nDIVORCED\tMI                        \t0\t1\t2513\t1150\t1\t0\t70749\tCU8506                    \tM                         \tPlumber\t1000\tMidwest\t1\t2513\tNo\t11\t1\t48\t54.13\t30987.25\t6248\t3\t466\t5\tVERY HIGH\tJON\t1\t1\tDUTTON\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create table for values used in normalization","message":["%script","","BEGIN","  EXECUTE IMMEDIATE 'DROP TABLE norm_zscore_tbl';","  EXCEPTION WHEN OTHERS THEN NULL;","END;","     ","BEGIN","  dbms_data_mining_transform.CREATE_NORM_LIN (","    norm_table_name  => 'norm_zscore_tbl');","  dbms_data_mining_transform.INSERT_NORM_LIN_ZSCORE (","    norm_table_name  => 'norm_zscore_tbl',","    data_table_name  => 'CUSTOMER_INSURANCE_LTV_SQL',","    exclude_list     => dbms_data_mining_transform.COLUMN_LIST('CUSTOMER_ID'),","    round_num        => 3);","END;"],"enabled":true,"result":{"startTime":1715350208456,"interpreter":"script.low","endTime":1715350209457,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Shift (mean) and scale (standard deviation) used for normalizing numeric columns","message":["%sql","","SELECT col, shift, scale ","FROM   norm_zscore_tbl;"],"enabled":true,"result":{"startTime":1715350209533,"interpreter":"sql.low","endTime":1715350209630,"results":[{"message":"COL\tSHIFT\tSCALE\nCREDIT_BALANCE\t3940\t22300\nCUSTOMER_TENURE\t2.46\t1.25\nMORTGAGE_AMOUNT\t2010\t3170\nBANK_FUNDS\t3440\t5590\nNUM_DEPENDENTS\t2.07\t1.55\nHAS_CHILDREN\t0.498\t0.5\nINCOME\t65000\t6540\nCREDIT_CARD_LIMITS\t1260\t804\nHOME_OWNERSHIP\t0.805\t0.516\nNUM_ONLINE_TRANS\t1340\t1950\nMONTHLY_CHECKS\t4.54\t4.86\nNUM_TRANS_KIOSK\t1.92\t1.88\nAGE\t37.4\t14.6\nMONEY_MONTLY_OVERDRAWN\t53.6\t3.11\nLTV\t22200\t6770\nTOTAL_AUTOM_PAYMENTS\t5310\t21600\nNUM_TRANS_TELLER\t1.8\t1.48\nCHECKING_BALANCE\t1100\t3230\nNUM_TRANS_ATM\t2.86\t1.86\nNUM_MORTGAGES\t0.804\t0.516\nCAR_OWNERSHIP\t0.931\t0.253\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check the range of MORTGAGE_AMOUNT variable before normalization ","message":["%sql","","SELECT MIN(MORTGAGE_AMOUNT) MIN_MORTGAGE_AMT, MAX(MORTGAGE_AMOUNT) MAX_MORTGAGE_AMT","FROM   CUSTOMER_INSURANCE_LTV_SQL;"],"enabled":true,"result":{"startTime":1715350209707,"interpreter":"sql.low","endTime":1715350209894,"results":[{"message":"MIN_MORTGAGE_AMT\tMAX_MORTGAGE_AMT\n0\t90000\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Generate view that contains normalized columns","message":["%script","","BEGIN","  EXECUTE IMMEDIATE 'DROP VIEW CUSTOMER_INSURANCE_LTV_SQL_STACK';","  EXCEPTION WHEN OTHERS THEN NULL;","END;","","DECLARE","  xforms      dbms_data_mining_transform.TRANSFORM_LIST;","BEGIN","  dbms_data_mining_transform.STACK_NORM_LIN (","    norm_table_name    => 'norm_zscore_tbl',","    xform_list         => xforms);","  dbms_data_mining_transform.XFORM_STACK (","    xform_list         => xforms,","    data_table_name    => 'CUSTOMER_INSURANCE_LTV_SQL',","    xform_view_name    => 'CUSTOMER_INSURANCE_LTV_SQL_STACK');","END;"],"enabled":true,"result":{"startTime":1715350209972,"interpreter":"script.low","endTime":1715350210394,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check range of MORTGAGE_AMOUNT variable after normalization ","message":["%sql","","SELECT ROUND(MIN(MORTGAGE_AMOUNT),3) MIN_MORTGAGE_AMT, ROUND(MAX(MORTGAGE_AMOUNT),3) MAX_MORTGAGE_AMT","FROM   CUSTOMER_INSURANCE_LTV_SQL_STACK;"],"enabled":true,"result":{"startTime":1715350210471,"interpreter":"sql.low","endTime":1715350210549,"results":[{"message":"MIN_MORTGAGE_AMT\tMAX_MORTGAGE_AMT\n-0.634\t27.757\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create table for min-max scaling","message":["%script","","BEGIN","  EXECUTE IMMEDIATE 'DROP TABLE minmax_norm_tbl';","  EXCEPTION WHEN OTHERS THEN NULL;","END;","","BEGIN","  dbms_data_mining_transform.CREATE_NORM_LIN(","    norm_table_name  => 'minmax_norm_tbl');","  dbms_data_mining_transform.INSERT_NORM_LIN_MINMAX(","    norm_table_name  => 'minmax_norm_tbl',","    data_table_name  => 'CUSTOMER_INSURANCE_LTV_SQL',","    exclude_list     => dbms_data_mining_transform.COLUMN_LIST( 'cust_id'),","    round_num        => 3);","END;"],"enabled":true,"result":{"startTime":1715350210629,"interpreter":"script.low","endTime":1715350212027,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Shift (mean) and scale (standard deviation) used for normalizing numeric columns","message":["%sql","","SELECT col, shift, scale ","FROM   minmax_norm_tbl;"],"enabled":true,"result":{"startTime":1715350212111,"interpreter":"sql.low","endTime":1715350212207,"results":[{"message":"COL\tSHIFT\tSCALE\nCREDIT_BALANCE\t0\t609000\nCUSTOMER_TENURE\t1\t4\nMORTGAGE_AMOUNT\t0\t90000\nBANK_FUNDS\t0\t105000\nNUM_DEPENDENTS\t0\t6\nHAS_CHILDREN\t0\t1\nINCOME\t37100\t74500\nCREDIT_CARD_LIMITS\t500\t4500\nHOME_OWNERSHIP\t0\t2\nNUM_ONLINE_TRANS\t0\t45000\nMONTHLY_CHECKS\t0\t18\nNUM_TRANS_KIOSK\t0\t10\nAGE\t0\t84\nMONEY_MONTLY_OVERDRAWN\t-77.3\t171\nLTV\t0\t47500\nTOTAL_AUTOM_PAYMENTS\t0\t745000\nNUM_TRANS_TELLER\t0\t9\nCHECKING_BALANCE\t25\t24700\nNUM_TRANS_ATM\t0\t8\nNUM_MORTGAGES\t0\t2\nCAR_OWNERSHIP\t0\t1\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check range of MORTGAGE_AMOUNT variable before normalization ","message":["%sql","","SELECT MIN(MORTGAGE_AMOUNT) MIN_MORTAGE_AMT, MAX(MORTGAGE_AMOUNT) MAX_MORTGAGE_AMT","FROM   CUSTOMER_INSURANCE_LTV_SQL;"],"enabled":true,"result":{"startTime":1715350212283,"interpreter":"sql.low","endTime":1715350212471,"results":[{"message":"MIN_MORTAGE_AMT\tMAX_MORTGAGE_AMT\n0\t90000\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Generate view that contains normalized columns ","message":["%script","","BEGIN","  EXECUTE IMMEDIATE 'DROP VIEW CUSTOMER_INSURANCE_LTV_SQL_STACK';","  EXCEPTION WHEN OTHERS THEN NULL;","END;","","DECLARE","  xforms dbms_data_mining_transform.TRANSFORM_LIST;","BEGIN","  dbms_data_mining_transform.STACK_NORM_LIN (","     norm_table_name    => 'minmax_norm_tbl',","     xform_list         => xforms);","  dbms_data_mining_transform.XFORM_STACK (","     xform_list         => xforms,","     data_table_name    => 'CUSTOMER_INSURANCE_LTV_SQL',","     xform_view_name    => 'CUSTOMER_INSURANCE_LTV_SQL_STACK');","END;","/"],"enabled":true,"result":{"startTime":1715350212552,"interpreter":"script.low","endTime":1715350212873,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check range of MORTGAGE_AMOUNT variable after normalization ","message":["%sql","","SELECT ROUND(MIN(MORTGAGE_AMOUNT),3) MIN_MORTGAGE_AMT, ROUND(MAX(MORTGAGE_AMOUNT),3) MAX_MORTGAGE_AMT","FROM   CUSTOMER_INSURANCE_LTV_SQL_STACK;"],"enabled":true,"result":{"startTime":1715350212950,"interpreter":"sql.low","endTime":1715350213025,"results":[{"message":"MIN_MORTGAGE_AMT\tMAX_MORTGAGE_AMT\n0\t1\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Log scale transformation - for each numerical column apply log(10, ) to its nonzero values","message":["%script ","","SET serveroutput ON;","DECLARE","  tbl VARCHAR2(100);","  fmt VARCHAR2(2000);","BEGIN","  tbl := 'CUSTOMER_INSURANCE_LTV_SQL';","","  fmt := 'select ';","    ","  FOR rec IN (SELECT column_name, data_type FROM user_tab_cols WHERE table_name = tbl and data_type = 'NUMBER' ) LOOP","    fmt := fmt||'case when '||rec.column_name||' <= 0 then 0 else log(10,'||rec.column_name||') end as log_'||rec.column_name||',';","  END LOOP;","    ","  fmt := 'create or replace view customer_log_v as ' ||substr(fmt, 0, length(fmt)-1)||' from '||tbl;","  EXECUTE IMMEDIATE fmt;","END;"],"enabled":true,"result":{"startTime":1715350213105,"interpreter":"script.low","endTime":1715350213833,"results":[{"message":"\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check view that contains log transformed value","message":["%sql","","SELECT ROUND(LOG_CREDIT_BALANCE, 4) LOG_CREDIT_BALANCE, ","       ROUND(LOG_CUSTOMER_TENURE,4) LOG_CUSTOMER_TENURE, ","       ROUND(LOG_MORTGAGE_AMOUNT,4) LOG_MORTGAGE_AMOUNT, ","       ROUND(LOG_TOTAL_AUTOM_PAYMENTS,4) LOG_TOTAL_AUTOM_PAYMENTS,","       ROUND(LOG_BANK_FUNDS,4) LOG_BANK_FUNDS,","       ROUND(LOG_INCOME,4) LOG_INCOME","FROM   customer_log_v","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1715350213919,"interpreter":"sql.low","endTime":1715350214018,"results":[{"message":"LOG_CREDIT_BALANCE\tLOG_CUSTOMER_TENURE\tLOG_MORTGAGE_AMOUNT\tLOG_TOTAL_AUTOM_PAYMENTS\tLOG_BANK_FUNDS\tLOG_INCOME\n0\t0.4771\t2.6021\t2.3181\t2.7709\t4.7881\n0\t0.4771\t3.3118\t2.3838\t2.8129\t4.8029\n0\t0.6021\t3.3979\t2.5944\t2.8451\t4.8543\n0\t0\t3.9201\t2.8129\t4.0434\t4.8592\n0\t0\t3\t2.5832\t0\t4.811\n0\t0.6021\t3.6021\t3.284\t3.9445\t4.7877\n0\t0.4771\t2.9269\t2.3541\t2.6532\t4.7928\n0\t0.301\t0\t0\t0\t4.8715\n0\t0.4771\t0\t0\t0\t4.8079\n0\t0\t3.4002\t3.7957\t3.0607\t4.8497\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check original distribution of TOTAL_AUTOM_PAYMENTS - note distribution is heavily skewed","message":["%sql","","SELECT ROUND(TOTAL_AUTOM_PAYMENTS*1.0/100000, 1)*100000 TOTAL_AUTOM_PAYMENTS, COUNT(1) CNT","FROM   CUSTOMER_INSURANCE_LTV_SQL","WHERE  TOTAL_AUTOM_PAYMENTS > 0","GROUP BY ROUND(TOTAL_AUTOM_PAYMENTS*1.0/100000, 1)*100000","ORDER BY ROUND(TOTAL_AUTOM_PAYMENTS*1.0/100000, 1)*100000","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1715350214097,"interpreter":"sql.low","endTime":1715350214190,"results":[{"message":"TOTAL_AUTOM_PAYMENTS\tCNT\n0\t9202\n10000\t1368\n20000\t382\n30000\t210\n40000\t132\n50000\t83\n60000\t71\n70000\t44\n80000\t27\n90000\t26\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"After applying log transformation, distribution becomes better distributed","message":["%sql","","SELECT ROUND(LOG_TOTAL_AUTOM_PAYMENTS/10,1)*10 LOG_TOTAL_AUTOM_PAYMENTS, COUNT(1) CNT","FROM   customer_log_v","WHERE  LOG_TOTAL_AUTOM_PAYMENTS > 0","GROUP BY ROUND(LOG_TOTAL_AUTOM_PAYMENTS/10,1)*10","ORDER BY ROUND(LOG_TOTAL_AUTOM_PAYMENTS/10,1)*10"],"enabled":true,"result":{"startTime":1715350214265,"interpreter":"sql.low","endTime":1715350214641,"results":[{"message":"LOG_TOTAL_AUTOM_PAYMENTS\tCNT\n2\t1726\n3\t6730\n4\t2655\n5\t541\n6\t13\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1715350214727,"interpreter":"md.low","endTime":1715350214789,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":{"startTime":1715350214865,"interpreter":"md.low","endTime":1715350214926,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]