[{"layout":null,"template":null,"templateConfig":null,"name":"OML4SQL Data Cleaning Recode Synonymous Values","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1736374244900,"interpreter":"md.low","endTime":1736374245373,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML4SQL Data Cleaning: Recode Synonymous Values","In this notebook, we demonstrate how to recode synonymous value of a column using Oracle SQL. ","","We use the customer insurance lifetime value data set, which contains customer financial information, lifetime value, ","and whether or not the customer bought insurance.","","The dataset `CUSTOMER_INSURANCE_LTV_SQL` has recoded values generated by the `\"OML Run-me-first\"` notebook artificially, ","which `MUST` be run before this notebook. Specifically, ***MARITAL_STATUS*** has divorced status coded as 'DIV', married coded as 'M'. ","","","###### IMPORTANT: The `\"OML Run-me-first\"` notebook is available under the menu `Templates -> Examples` and is a pre-requisite to the current notebook.","","","Copyright (c) 2025 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a>"],"enabled":true,"result":{"startTime":1736374245828,"interpreter":"md.low","endTime":1736374246299,"results":[{"message":"<h1 id=\"oml4sql-data-cleaning-recode-synonymous-values\">OML4SQL Data Cleaning: Recode Synonymous Values<\/h1>\n<p>In this notebook, we demonstrate how to recode synonymous value of a column using Oracle SQL.<\/p>\n<p>We use the customer insurance lifetime value data set, which contains customer financial information, lifetime value,\nand whether or not the customer bought insurance.<\/p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV_SQL<\/code> has recoded values generated by the <code>&quot;OML Run-me-first&quot;<\/code> notebook artificially,\nwhich <code>MUST<\/code> be run before this notebook. Specifically, <em><strong>MARITAL_STATUS<\/strong><\/em> has divorced status coded as 'DIV', married coded as 'M'.<\/p>\n<h6 id=\"important-the-oml-run-me-first-notebook-is-available-under-the-menu-templates---examples-and-is-a-pre-requisite-to-the-current-notebook\">IMPORTANT: The <code>&quot;OML Run-me-first&quot;<\/code> notebook is available under the menu <code>Templates -&gt; Examples<\/code> and is a pre-requisite to the current notebook.<\/h6>\n<p>Copyright (c) 2025 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md"," ","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>"],"enabled":true,"result":{"startTime":1736374246757,"interpreter":"md.low","endTime":1736374247228,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a><\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check distinct MARITAL_STATUS values that may need recoding, e.g., DIV and M","message":["%sql","","SELECT DISTINCT MARITAL_STATUS","FROM   CUSTOMER_INSURANCE_LTV_SQL;"],"enabled":true,"result":{"startTime":1736374247682,"interpreter":"sql.low","endTime":1736374249663,"results":[{"message":"MARITAL_STATUS\nWIDOWED\nM\nOTHER\nDIV\nDIVORCED\n\nMARRIED\nSINGLE\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create view with recoded MARITAL_STATUS","message":["%sql","","CREATE OR REPLACE VIEW customer_recode_v AS","SELECT a.MARITAL_STATUS_CONVERTED, b.*","FROM (","    SELECT CUSTOMER_ID, ","           CASE WHEN MARITAL_STATUS = 'DIV' THEN 'DIVORCED' ELSE ","          (CASE WHEN MARITAL_STATUS = 'M'   THEN 'MARRIED'  ELSE ","          (CASE WHEN MARITAL_STATUS IS NULL THEN 'UNKNOWN'  ELSE","           MARITAL_STATUS  ","           END) ","           END)","        END AS MARITAL_STATUS_CONVERTED","    FROM CUSTOMER_INSURANCE_LTV_SQL ) a","JOIN CUSTOMER_INSURANCE_LTV_SQL b ","ON a.CUSTOMER_ID = b.CUSTOMER_ID"],"enabled":true,"result":{"startTime":1736374250112,"interpreter":"sql.low","endTime":1736374250587,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{},\"table\":{\"version\":1},\"bar\":{\"aggregationOption\":\"Last\",\"series\":{\"availableSeriesElements\":[{\"id\":\"COUNT(1)\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"lastColumns\":[\"MARITAL_STATUS_CONVERTED\",\"MARITAL_STATUS\",\"COUNT\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Display summary of recoded MARITAL_STATUS values","message":["%sql","","SELECT MARITAL_STATUS_CONVERTED, MARITAL_STATUS, count(1) COUNT","FROM   CUSTOMER_RECODE_V","GROUP BY MARITAL_STATUS_CONVERTED, MARITAL_STATUS;"],"enabled":true,"result":{"startTime":1736374251038,"interpreter":"sql.low","endTime":1736374251538,"results":[{"message":"MARITAL_STATUS_CONVERTED\tMARITAL_STATUS\tCOUNT\nDIVORCED\tDIVORCED\t2335\nWIDOWED\tWIDOWED\t523\nUNKNOWN\t\t7525\nDIVORCED\tDIV\t389\nMARRIED\tM\t407\nMARRIED\tMARRIED\t2703\nOTHER\tOTHER\t108\nSINGLE\tSINGLE\t2890\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check distinct values after conversion","message":["%sql","","SELECT DISTINCT MARITAL_STATUS_CONVERTED ","FROM   CUSTOMER_RECODE_V;"],"enabled":true,"result":{"startTime":1736374251986,"interpreter":"sql.low","endTime":1736374252472,"results":[{"message":"MARITAL_STATUS_CONVERTED\nWIDOWED\nOTHER\nDIVORCED\nMARRIED\nSINGLE\nUNKNOWN\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1736374252921,"interpreter":"md.low","endTime":1736374253361,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":{"startTime":1736374253816,"interpreter":"md.low","endTime":1736374254257,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]