[{"layout":null,"isRunnable":true,"template":null,"templateConfig":null,"isEditable":true,"name":"OML4SQL Classification NN","description":null,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1733786748258,"interpreter":"md.low","endTime":1733786748715,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","# Classification Modeling to Predict Target Customers using Neural Network","In this notebook, we  predict customers most likely to be positive responders to an Affinity Card loyalty program. High Affinity Card responders (target value = 1) are defined as those customers who when given a loyaly or affinity card hyper-respond i.e. they increae their purchasing higher than the Affinity Card program's offered discount percentage.  This notebook builds and applies classification neural network models using the SH schema data. All processing occurs inside Oracle Autonomous Database.","","Copyright (c) 2026 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" onclick=\"return ! window.open('https://oss.oracle.com/licenses/upl/');\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1733786749165,"interpreter":"md.low","endTime":1733786749606,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":9,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","<dl>","<img src=\"https://www.oracle.com/technetwork/database/options/advanced-analytics/classification-5663162.jpg\" alt=\"OML Notebooks\" width=\"250\"/>","<\/dl>"],"enabled":true,"result":{"startTime":1733786750061,"interpreter":"md.low","endTime":1733786750508,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":3,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md","","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://www.oracle.com/goto/ml-classification\" target=\"_blank\">OML Classification<\/a>","* <a href=\"https://oracle.com/goto/ml-neural-network\" target=\"_blank\">OML Neural Network<\/a>","* <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-7793F608-2719-45EA-87F9-6F246BA800D4\" target=\"_blank\">Algorithm Settings<\/a>","* <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-24047A09-0542-4870-91D8-329F28B0ED75\" target=\"_blank\">Shared Settings<\/a>"],"enabled":true,"result":{"startTime":1733786750971,"interpreter":"md.low","endTime":1733786751418,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display a few rows of the demographics data ","message":["%sql","","SELECT * ","FROM SH.SUPPLEMENTARY_DEMOGRAPHICS","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1733786751883,"interpreter":"sql.low","endTime":1733786752343,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Count number of records in demographics table","message":["%sql","","SELECT COUNT(*) FROM SH.SUPPLEMENTARY_DEMOGRAPHICS;"],"enabled":true,"result":{"startTime":1733786752804,"interpreter":"sql.low","endTime":1733786753257,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"table\":{\"version\":1},\"bar\":{\"showSeries\":[\"COUNT\"],\"aggregationOption\":\"Last\",\"series\":{\"availableSeriesElements\":[{\"id\":\"COUNT\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"lastColumns\":[\"AFFINITY_CARD\",\"COUNT\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Show distribution of AFFINITY_CARD responders","message":["%sql","","-- In this data set, hyper-responders to the Affinity Card loyalty program are represented as 1's. ","","SELECT AFFINITY_CARD, COUNT(*) COUNT ","FROM SH.SUPPLEMENTARY_DEMOGRAPHICS","GROUP BY AFFINITY_CARD;"],"enabled":true,"result":{"startTime":1733786753721,"interpreter":"sql.low","endTime":1733786754186,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"table\":{\"version\":1},\"bar\":{\"groupByColumns\":[\"AFFINITY_CARD\",\"HOUSEHOLD_SIZE\"],\"aggregationOption\":\"Last\",\"series\":{\"availableSeriesElements\":[{\"id\":\"NUM_CUSTOMERS\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"axis\":{\"x\":{\"title\":\"Household Size slit by Affinity Card Responder\"},\"y\":{\"title\":\"Count\"}},\"lastColumns\":[\"NUM_CUSTOMERS\",\"HOUSEHOLD_SIZE\",\"AFFINITY_CARD\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Graph HOUSEHOLD_SIZE grouped by AFFINITY_CARD","message":["%sql","","SELECT COUNT(CUST_ID) AS NUM_CUSTOMERS, HOUSEHOLD_SIZE, AFFINITY_CARD ","FROM   SH.SUPPLEMENTARY_DEMOGRAPHICS ","GROUP BY HOUSEHOLD_SIZE, AFFINITY_CARD","ORDER BY HOUSEHOLD_SIZE, AFFINITY_CARD"],"enabled":true,"result":{"startTime":1733786754647,"interpreter":"sql.low","endTime":1733786755106,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"table\":{\"version\":1},\"bar\":{\"showSeries\":[\"AFFINITY_1_COUNT\",\"AFFINITY_0_COUNT\"],\"aggregationOption\":\"Last\",\"visualizations\":{\"stackValue\":\"on\"},\"series\":{\"availableSeriesElements\":[{\"id\":\"AFFINITY_1_COUNT\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0},{\"id\":\"AFFINITY_0_COUNT\",\"lineType\":\"straight\",\"borderColor\":\"rgb(50, 146, 94)\",\"borderWidth\":0,\"color\":\"rgb(50, 146, 94)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(50, 146, 94)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"axis\":{\"x\":{\"title\":\"Household Size\"},\"y\":{\"title\":\"Count\"}},\"lastColumns\":[\"HOUSEHOLD_SIZE\",\"AFFINITY_1_COUNT\",\"AFFINITY_0_COUNT\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Graph HOUSEHOLD_SIZE grouped by AFFINITY_CARD","message":["%sql","","SELECT HOUSEHOLD_SIZE,","       SUM(CASE WHEN AFFINITY_CARD = 1 THEN NUM_CUSTOMERS ELSE 0 END) AS AFFINITY_1_COUNT,","       SUM(CASE WHEN AFFINITY_CARD = 0 THEN NUM_CUSTOMERS ELSE 0 END) AS AFFINITY_0_COUNT","FROM (SELECT COUNT(CUST_ID) AS NUM_CUSTOMERS, HOUSEHOLD_SIZE, AFFINITY_CARD ","      FROM   SH.SUPPLEMENTARY_DEMOGRAPHICS ","      GROUP BY HOUSEHOLD_SIZE, AFFINITY_CARD)","GROUP BY HOUSEHOLD_SIZE","ORDER BY HOUSEHOLD_SIZE"],"enabled":true,"result":{"startTime":1733786755562,"interpreter":"sql.low","endTime":1733786756023,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create view with selected demographics columns","message":["%script","","CREATE OR REPLACE VIEW DEMOGRAPHICS4_V ","  AS SELECT AFFINITY_CARD, BOOKKEEPING_APPLICATION,BULK_PACK_DISKETTES, CUST_ID, EDUCATION,","            FLAT_PANEL_MONITOR, HOME_THEATER_PACKAGE,HOUSEHOLD_SIZE, OCCUPATION, OS_DOC_SET_KANJI,","            PRINTER_SUPPLIES, YRS_RESIDENCE, Y_BOX_GAMES","     FROM   SH.SUPPLEMENTARY_DEMOGRAPHICS;","     "],"enabled":true,"result":{"startTime":1733786756488,"interpreter":"script.low","endTime":1733786756958,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display data from DEMOGRAPHICS4_V view","message":["%sql ","","SELECT * ","FROM DEMOGRAPHICS4_V","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1733786757408,"interpreter":"sql.low","endTime":1733786757863,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create train and test data sets (60/40) for model build and test","message":["%script","","CREATE OR REPLACE VIEW TRAIN_DATA_CLAS AS SELECT * FROM DEMOGRAPHICS4_V SAMPLE (60) SEED (1);","  ","CREATE OR REPLACE VIEW TEST_DATA_CLAS AS ","  SELECT * FROM DEMOGRAPHICS4_V ","  MINUS ","  SELECT * FROM TRAIN_DATA_CLAS;"],"enabled":true,"result":{"startTime":1733786758326,"interpreter":"script.low","endTime":1733786758786,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Build a Neural Network classification model for predicting AFFINITY_CARD","","---"],"enabled":true,"result":{"startTime":1733786759240,"interpreter":"md.low","endTime":1733786759686,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Build a NN model using default settings","message":["%script","","","BEGIN DBMS_DATA_MINING.DROP_MODEL('NN_CLASS_MODEL');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","DECLARE","    v_setlst DBMS_DATA_MINING.SETTING_LIST;","    ","BEGIN","    v_setlst('PREP_AUTO') := 'ON';","    v_setlst('ALGO_NAME') := 'ALGO_NEURAL_NETWORK';","","    DBMS_DATA_MINING.CREATE_MODEL2(","        MODEL_NAME          => 'NN_CLASS_MODEL',","        MINING_FUNCTION     => 'CLASSIFICATION',","        DATA_QUERY          => 'SELECT * FROM TRAIN_DATA_CLAS',","        SET_LIST            => v_setlst,","        CASE_ID_COLUMN_NAME => 'CUST_ID',","        TARGET_COLUMN_NAME  => 'AFFINITY_CARD'","        );","        ","END;"],"enabled":true,"result":{"startTime":1733786760141,"interpreter":"script.low","endTime":1733786763626,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":400,\"lastColumns\":[]}}]","hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Examples of possible setting overrides for Neural Network","","If the user does not override the default settings, then relevant settings are determined by the algorithm.","","A complete list of settings can be found in the Documentation link:","","- Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-7793F608-2719-45EA-87F9-6F246BA800D4\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-7793F608-2719-45EA-87F9-6F246BA800D4');\">Neural Network<\/a>","- Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-24047A09-0542-4870-91D8-329F28B0ED75\" onclick=\"return ! window.open('https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-24047A09-0542-4870-91D8-329F28B0ED75');\">All algorithms<\/a>","- Specify a row weight column ","> v_setlst('ODMS_ROW_WEIGHT_COLUMN_NAME') := '<row_weight_column_name>';","   ","* Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is `ODMS_MISSING_VALUE_AUTO`.  The option `ODMS_MISSING_VALUE_MEAN_MODE` replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option `ODMS_MISSING_VALUE_AUTO` performs different strategies for different algorithms.  When `ODMS_MISSING_VALUE_TREATMENT` is set to `ODMS_MISSING_VALUE_DELETE_ROW`, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.","> v_setlst('ODMS_MISSING_VALUE_TREATMENT') := 'ODMS_MISSING_VALUE_AUTO';","* Specify the Neural Network architecture.  The default number of layers is 1, and the default activation function is NNET_ACTIVATIONS_LOG_SIG (Log Sigmoid). The default number of nodes per layer is the number of attributes or 50 (if the number of attributes > 50).  Be careful with quotes around NNET_ACTIVATIONS. The options for the activation functions are one or more of the following strings:  `NNET_ACTIVATIONS_ARCTAN`, `NNET_ACTIVATIONS_BIPOLAR_SIG`, `NNET_ACTIVATIONS_LINEAR`, `NNET_ACTIVATIONS_LOG_SIG`, `NNET_ACTIVATIONS_TANH` and <strong>starting from Oracle Database 23ai<\/strong> `NNET_ACTIVATIONS_RELU`.","> v_setlst('NNET_HIDDEN_LAYERS') := '3';","","> v_setlst('NNET_NODES_PER_LAYER') := '8,8,2';","","> v_setlst('NNET_ACTIVATIONS') := '''NNET_ACTIVATIONS_TANH'', ''NNET_ACTIVATIONS_LOG_SIG'', ''NNET_ACTIVATIONS_ARCTAN''';","    ","* Specify the Heldaside options for Regularization. If the total number of training rows is greater than 50000, the default is NNET_REGULARIZER_HELDASIDE, otherwise it is NNET_REGULARIZER_NONE. The held ratio for the held-aside method is 0.25 by default. With NNET_REGULARIZER_HELDASIDE, the training process is stopped early if the network performance on the validation data fails to improve for NNET_HELDASIDE_MAX_FAIL epochs in a row (default is 6).","> v_setlst('NNET_REGULARIZER') := 'NNET_REGULARIZER_HELDASIDE';","","> v_setlst('NNET_HELDASIDE_RATIO') := '0.25';","","> v_setlst('NNET_HELDASIDE_MAX_FAIL') := '6';","    ","* Specify the L2 regularization parameter, with a default of 1. Cannot be used with NNET_REGULARIZER_HELDASIDE.","> v_setlst('NNET_REG_LAMBDA') := '1';","* Specify the number of iterations, which is 200 by default for LBFGS solver and 10000 for the ADAM solver. The default convergence tolerance setting is 0.000001. ","> v_setlst('NNET_ITERATIONS') := '200';","","> v_setlst('NNET_TOLERANCE') := '0.000001';","","> v_setlst('ODMS_RANDOM_SEED') := '0';","* Specify details on the LBFGS Solver. The number of historical copies kept in L-BFGS solver is defined by LBFGS_HISTORY_DEPTH. When the number of iterations is smaller than the history depth, the Hessian computed by L-BFGS is accurate, otherwise the Hessian computed by L-BFGS is an approximation. Typically, the value is between 3 and 10. ","    v_setlst('LBFGS_HISTORY_DEPTH') := '10';","* Specify the gradient infinity norm tolerance for L-BFGS. The default value is 1E-9. ","> v_setlst('LBFGS_GRADIENT_TOLERANCE') := '0.0000001';","* Specify how to set the initial approximation of the inverse Hessian at the beginning of each iteration. If the value is set to be LBFGS_SCALE_HESSIAN_ENABLE, then we approximate the initial inverse Hessian with Oren-Luenberger scaling. If it is set to be LBFGS_SCALE_HESSIAN_DISABLE, then we use identity as the approximation of the inverse Hessian at the beginning of each iteration    ","> v_setlst('LBFGS_SCALE_HESSIAN') := 'LBFGS_SCALE_HESSIAN_ENABLE';","","> v_setlst('LBFGS_SCALE_HESSIAN') := 'LBFGS_SCALE_HESSIAN_DISABLE';","","* Specify the lower bound of the region where weights are randomly initialized. `NNET_WEIGHT_LOWER_BOUND` and `NNET_WEIGHT_UPPER_BOUND` must be set together. Setting one and not setting the other raises an error. `NNET_WEIGHT_LOWER_BOUND` must not be greater than `NNET_WEIGHT_UPPER_BOUND`. The default value is -sqrt(6/(l_nodes+r_nodes)). ","   The value of l_nodes for `input layer dense attributes` is (1+number of dense attributes), `input layer sparse attributes` is number of sparse attributes, and `each hidden layer` is (1+number of nodes in that hidden layer).  The value of r_nodes is the number of nodes in the layer that the weight is connecting to.","   If not specified, the values of `NNET_WEIGHT_LOWER_BOUND` and `NNET_WEIGHT_UPPER_BOUND` are system determined.","> v_setlst('NNET_WEIGHT_LOWER_BOUND') := 'a real number'","> v_setlst('NNET_WEIGHT_UPPER_BOUND') := 'a real number'","    ","```"],"enabled":true,"result":{"startTime":1733786764088,"interpreter":"md.low","endTime":1733786764555,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Use 3 hidden layers and specific activation functions ","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('NN_CLASS_MODEL2');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","DECLARE","    v_setlst DBMS_DATA_MINING.SETTING_LIST;","    ","BEGIN","    v_setlst('PREP_AUTO') := 'ON';","    v_setlst('ALGO_NAME') := 'ALGO_NEURAL_NETWORK';","    v_setlst('NNET_NODES_PER_LAYER') := '8,8,2';","    v_setlst('NNET_ACTIVATIONS') := '''NNET_ACTIVATIONS_TANH'', ","                                     ''NNET_ACTIVATIONS_LOG_SIG'', ","                                     ''NNET_ACTIVATIONS_ARCTAN''';","    DBMS_DATA_MINING.CREATE_MODEL2(","        MODEL_NAME          => 'NN_CLASS_MODEL2',","        MINING_FUNCTION     => 'CLASSIFICATION',","        DATA_QUERY          => 'SELECT * FROM TRAIN_DATA_CLAS',","        SET_LIST            => v_setlst,","        CASE_ID_COLUMN_NAME => 'CUST_ID',","        TARGET_COLUMN_NAME  => 'AFFINITY_CARD'","        );","        ","END;"],"enabled":true,"result":{"startTime":1733786765028,"interpreter":"script.low","endTime":1733786767406,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Use held aside regularization and early stopping ","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('NN_CLASS_MODEL3');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","DECLARE","    v_setlst DBMS_DATA_MINING.SETTING_LIST;","    ","BEGIN","    v_setlst('PREP_AUTO') := 'ON';","    v_setlst('ALGO_NAME') := 'ALGO_NEURAL_NETWORK';","    v_setlst('NNET_HIDDEN_LAYERS') := '3';","    v_setlst('NNET_NODES_PER_LAYER') := '8,8,2';","    v_setlst('NNET_ACTIVATIONS') := '''NNET_ACTIVATIONS_TANH'', ","                                     ''NNET_ACTIVATIONS_LOG_SIG'', ","                                     ''NNET_ACTIVATIONS_ARCTAN''';","    v_setlst('NNET_REGULARIZER') := 'NNET_REGULARIZER_HELDASIDE';","    v_setlst('NNET_HELDASIDE_RATIO') := '0.25';","    v_setlst('NNET_HELDASIDE_MAX_FAIL') := '6';","    v_setlst('NNET_ITERATIONS') := '200';","    v_setlst('NNET_TOLERANCE') := '0.000001';","    v_setlst('ODMS_RANDOM_SEED') := '0';    ","    ","    DBMS_DATA_MINING.CREATE_MODEL2(","        'NN_CLASS_MODEL3',","        'CLASSIFICATION',","        'SELECT * FROM TRAIN_DATA_CLAS',","        v_setlst,","        'CUST_ID',","        'AFFINITY_CARD');","END;"],"enabled":true,"result":{"startTime":1733786767863,"interpreter":"script.low","endTime":1733786769545,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Get list of model views","message":["%sql ","","SELECT VIEW_NAME, VIEW_TYPE ","FROM   USER_MINING_MODEL_VIEWS","WHERE  MODEL_NAME='NN_CLASS_MODEL'","ORDER BY VIEW_NAME;","  "],"enabled":true,"result":{"startTime":1733786770040,"interpreter":"sql.low","endTime":1733786770516,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Get general settings","message":["%sql","","SELECT NAME, NUMERIC_VALUE, STRING_VALUE from DM$VGNN_CLASS_MODEL;"],"enabled":true,"result":{"startTime":1733786770973,"interpreter":"sql.low","endTime":1733786771426,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Get information for missing value handling","message":["%sql","","SELECT * FROM DM$VNNN_CLASS_MODEL"],"enabled":true,"result":{"startTime":1733786771887,"interpreter":"sql.low","endTime":1733786772339,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Evaluate the model","message":["%script","","BEGIN EXECUTE IMMEDIATE 'DROP TABLE APPLY_RESULT PURGE';","EXCEPTION WHEN OTHERS THEN NULL; END;","/","BEGIN EXECUTE IMMEDIATE 'DROP TABLE LIFT_TABLE PURGE';","EXCEPTION WHEN OTHERS THEN NULL; END;","/","BEGIN","  DBMS_DATA_MINING.APPLY('NN_CLASS_MODEL','TEST_DATA_CLAS','CUST_ID','APPLY_RESULT');","  DBMS_DATA_MINING.COMPUTE_LIFT('APPLY_RESULT','TEST_DATA_CLAS','CUST_ID','AFFINITY_CARD',","                                'LIFT_TABLE','1','PREDICTION','PROBABILITY',100);","END;"],"enabled":true,"result":{"startTime":1733786772798,"interpreter":"script.low","endTime":1733786774483,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":7,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"table\":{\"version\":1},\"line\":{\"showSeries\":[\"GAIN_CUMULATIVE\"],\"aggregationOption\":\"Last\",\"series\":{\"availableSeriesElements\":[{\"id\":\"GAIN_CUMULATIVE\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"lastColumns\":[\"QUANTILE_NUMBER\",\"GAIN_CUMULATIVE\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"line","title":"View model's cumulative gains (lift) chart","message":["%sql","","","SELECT QUANTILE_NUMBER, GAIN_CUMULATIVE FROM LIFT_TABLE;"],"enabled":true,"result":{"startTime":1733786774949,"interpreter":"sql.low","endTime":1733786775420,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":5,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display customers >70% likely to be a responder","message":["%sql","","SELECT CUST_ID, PREDICTION PRED, ROUND(PROBABILITY,3) PROB, ROUND(COST,2) COST ","FROM   APPLY_RESULT WHERE PREDICTION = 1 AND PROBABILITY > 0.7 ","ORDER BY PROBABILITY DESC","FETCH FIRST 10 ROWS ONLY;","  "],"enabled":true,"result":{"startTime":1733786775893,"interpreter":"sql.low","endTime":1733786776366,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Select and view likely and unlikely AFFINITY_CARD responders ","message":["%sql ","","SELECT CUST_ID, PREDICTION, ROUND(PROBABILITY,2) PROB, ROUND(COST,2) COST","FROM   APPLY_RESULT","WHERE  PREDICTION = ${PREDICTION='1','1'|'0'} ","AND    PROBABILITY > 0.7 ORDER BY PROBABILITY DESC","FETCH FIRST 10 ROWS ONLY;","  "],"enabled":true,"result":{"startTime":1733786776827,"interpreter":"sql.low","endTime":1733786777283,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{\"PREDICTION\":\"'0'\"}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[{\"type\":\"Select\",\"name\":\"PREDICTION\",\"displayName\":null,\"defaultValue\":\"'1'\",\"argument\":null,\"paragraphId\":null,\"options\":[{\"value\":\"'1'\",\"displayName\":null},{\"value\":\"'0'\",\"displayName\":null}],\"isHidden\":false,\"isNotebook\":false,\"isProgrammatic\":false}]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Dynamically select customers >70% likely to be a responder","message":["%sql","","SELECT * ","FROM (SELECT CUST_ID, PREDICTION_PROBABILITY(NN_CLASS_MODEL, '1'  USING A.*) PROBABILITY","      FROM TEST_DATA_CLAS A)","WHERE PROBABILITY > 0.7","FETCH FIRST 20 ROWS ONLY;"],"enabled":true,"result":{"startTime":1733786777745,"interpreter":"sql.low","endTime":1733786778246,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Dynamically select customer >70% likely to be a responder","message":["%sql","","SELECT CUST_ID","FROM   TEST_DATA_CLAS","WHERE  PREDICTION_PROBABILITY(NN_CLASS_MODEL, '1'  USING *) > 0.7","FETCH FIRST 20 ROWS ONLY;"],"enabled":true,"result":{"startTime":1733786778705,"interpreter":"sql.low","endTime":1733786779207,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Apply the model to a single new record","message":["%sql","","-- Predict the probability of being a high AFFINITY_CARD responder (1) ","--    by providing specific attribute values for a customer.","","SELECT ROUND(PREDICTION_PROBABILITY(NN_CLASS_MODEL, '1' USING ","                                    '3' AS HOUSEHOLD_SIZE, ","                                     5 AS YRS_RESIDENCE, ","                                     1 AS Y_BOX_GAMES),3) PROBABILITY_AFFINITY_CARD_RESPONDER","FROM DUAL;","  "],"enabled":true,"result":{"startTime":1733786779668,"interpreter":"sql.low","endTime":1733786780130,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Get prediction details","message":["%sql","","SELECT CUST_ID,","    round(PREDICTION_YRS_RES,3) PRED_YRS_RES,","    RTRIM(TRIM(SUBSTR(OUTPRED.\"Attribute1\",17,100)),'rank=\"1\"/>') FIRST_ATTRIBUTE,","    RTRIM(TRIM(SUBSTR(OUTPRED.\"Attribute2\",17,100)),'rank=\"2\"/>') SECOND_ATTRIBUTE","FROM (SELECT CUST_ID,","     PREDICTION(NN_CLASS_MODEL USING *) PREDICTION_YRS_RES,","     PREDICTION_DETAILS(NN_CLASS_MODEL USING *) PD","    FROM TEST_DATA_CLAS","    WHERE CUST_ID < 100025","    ORDER BY CUST_ID) OUT,","    XMLTABLE('/Details' PASSING OUT.PD COLUMNS ","             \"Attribute1\" XMLType PATH 'Attribute[1]',","             \"Attribute2\" XMLType PATH 'Attribute[2]') OUTPRED","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1733786780584,"interpreter":"sql.low","endTime":1733786781069,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","## Create Classification Neural Network model using a settings table","","The settings table is an alternative way to specify algorithm settings to build the model. We first drop the settings table, create it, and then populate it with settings before building the model."],"enabled":true,"result":{"startTime":1733786781532,"interpreter":"md.low","endTime":1733786781976,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Drop previous settings and output tables and create NN model settings table","message":["%script","","BEGIN EXECUTE IMMEDIATE 'DROP TABLE N1_BUILD_SETTINGS PURGE';","EXCEPTION WHEN OTHERS THEN NULL; END;","/","CREATE TABLE N1_BUILD_SETTINGS (","    setting_name VARCHAR2(30),","    setting_value VARCHAR2(4000));","/","BEGIN","  INSERT INTO N1_BUILD_SETTINGS (setting_name, setting_value) VALUES ('ALGO_NAME', 'ALGO_NEURAL_NETWORK');","  INSERT INTO N1_BUILD_SETTINGS (setting_name, setting_value) VALUES ('PREP_AUTO', 'ON');","END;"],"enabled":true,"result":{"startTime":1733786782437,"interpreter":"script.low","endTime":1733786782972,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":0,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Build classification model","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('NN_CLASS_MODEL3');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","BEGIN","  DBMS_DATA_MINING.CREATE_MODEL('NN_CLASS_MODEL3', 'CLASSIFICATION', 'TRAIN_DATA_CLAS', 'CUST_ID',' AFFINITY_CARD', 'N1_BUILD_SETTINGS');","END;"],"enabled":true,"result":{"startTime":1733786783429,"interpreter":"script.low","endTime":1733786787015,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1733786787481,"interpreter":"md.low","endTime":1733786787928,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1733786788398,"interpreter":"md.low","endTime":1733786788844,"results":null,"taskStatus":null,"forms":null,"status":null},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"7","snapshot":false,"tags":null}]