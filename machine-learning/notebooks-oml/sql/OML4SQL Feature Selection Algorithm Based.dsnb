[{"layout":null,"template":null,"templateConfig":null,"name":"OML4SQL Feature Selection Algorithm Based","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1737859244968,"interpreter":"md.low","endTime":1737859245523,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML4SQL Feature Selection: Supervised Algorithm","In this notebook, we demonstrate how to perform feature selection using in-database supervised algorithms.","","We use the customer insurance lifetime value data set, which contains customer financial information, lifetime value, and whether or not the customer bought insurance.","","We first build a random forest model to predict if the customer will buy insurance, then use feature importance values for feature selection. ","","We then build a decision tree model for the same classification task and obtain split nodes. For the top splitting nodes with highest support, we select features associated with those nodes.","","The dataset `CUSTOMER_INSURANCE_LTV` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.","","---","","###### `IMPORTANT`: The `\"OML Run-me-first\"` notebook is available under the menu Templates -> Examples and is a pre-requisite to the current notebook.","","---","","","Copyright (c) 2025 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a>"],"enabled":true,"result":{"startTime":1737859245997,"interpreter":"md.low","endTime":1737859246508,"results":[{"message":"<h1 id=\"oml4sql-feature-selection-supervised-algorithm\">OML4SQL Feature Selection: Supervised Algorithm<\/h1>\n<p>In this notebook, we demonstrate how to perform feature selection using in-database supervised algorithms.<\/p>\n<p>We use the customer insurance lifetime value data set, which contains customer financial information, lifetime value, and whether or not the customer bought insurance.<\/p>\n<p>We first build a random forest model to predict if the customer will buy insurance, then use feature importance values for feature selection.<\/p>\n<p>We then build a decision tree model for the same classification task and obtain split nodes. For the top splitting nodes with highest support, we select features associated with those nodes.<\/p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV<\/code> is generated by the <code>&quot;OML Run-me-first&quot;<\/code> notebook, which <code>MUST<\/code> be run before this notebook.<\/p>\n<hr />\n<h6 id=\"important-the-oml-run-me-first-notebook-is-available-under-the-menu-templates---examples-and-is-a-pre-requisite-to-the-current-notebook\"><code>IMPORTANT<\/code>: The <code>&quot;OML Run-me-first&quot;<\/code> notebook is available under the menu Templates -&gt; Examples and is a pre-requisite to the current notebook.<\/h6>\n<hr />\n<p>Copyright (c) 2025 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information ...","message":["%md","","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://www.oracle.com/goto/ml-attribute-importance\" target=\"_blank\">OML Attribute Importance<\/a>","* <a href=\"https://www.oracle.com/goto/ml-random-forest\" target=\"_blank\">OML Random Forest<\/a>","* <a href=\"https://www.oracle.com/goto/ml-decision-tree\" target=\"_blank\">OML Decision Tree<\/a>"],"enabled":true,"result":{"startTime":1737859246986,"interpreter":"md.low","endTime":1737859247451,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a><\/li>\n<li><a href=\"https://www.oracle.com/goto/ml-attribute-importance\" target=\"_blank\">OML Attribute Importance<\/a><\/li>\n<li><a href=\"https://www.oracle.com/goto/ml-random-forest\" target=\"_blank\">OML Random Forest<\/a><\/li>\n<li><a href=\"https://www.oracle.com/goto/ml-decision-tree\" target=\"_blank\">OML Decision Tree<\/a><\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display CUSTOMER_INSURANCE_LTV data","message":["%sql","","SELECT *","FROM   CUSTOMER_INSURANCE_LTV","FETCH FIRST 10 ROWS ONLY"],"enabled":true,"result":{"startTime":1737859247928,"interpreter":"sql.low","endTime":1737859249812,"results":[{"message":"MARITAL_STATUS\tSTATE\tCREDIT_BALANCE\tCUSTOMER_TENURE\tMORTGAGE_AMOUNT\tBANK_FUNDS\tNUM_DEPENDENTS\tHAS_CHILDREN\tINCOME\tCUSTOMER_ID\tGENDER\tPROFESSION\tCREDIT_CARD_LIMITS\tREGION\tHOME_OWNERSHIP\tNUM_ONLINE_TRANS\tBUY_INSURANCE\tMONTHLY_CHECKS\tNUM_TRANS_KIOSK\tAGE\tMONEY_MONTLY_OVERDRAWN\tLTV\tTOTAL_AUTOM_PAYMENTS\tNUM_TRANS_TELLER\tCHECKING_BALANCE\tNUM_TRANS_ATM\tLTV_BIN\tFIRST_NAME\tNUM_MORTGAGES\tCAR_OWNERSHIP\tLAST_NAME\nSINGLE\tCA                        \t0\t3\t0\t0\t3\t0\t65871\tCU15154                   \tM                         \tNurse\t1000\tWest\t0\t0\tNo\t0\t1\t24\t53.06\t14367.75\t0\t0\t25\t0\tMEDIUM\tGAYLE\t0\t0\tDURANT\nSINGLE\tNY                        \t0\t4\t0\t290\t4\t0\t68747\tCU15155                   \tM                         \tProgrammer/Developer\t700\tNorthEast\t0\t0\tYes\t1\t1\t35\t53.84\t14686.75\t287\t2\t25\t4\tMEDIUM\tQUINTON\t0\t1\tMASSEY\nMARRIED\tMI                        \t0\t3\t1000\t550\t3\t0\t68684\tCU15157                   \tM                         \tProgrammer/Developer\t1000\tMidwest\t1\t1000\tYes\t14\t1\t26\t53.48\t25271\t132\t2\t25\t4\tHIGH\tANIBAL\t1\t1\tJIMENEZ\nMARRIED\tUT                        \t0\t5\t1200\t1000\t5\t0\t59354\tCU15286                   \tF                         \tFireman\t2500\tSouthwest\t1\t1200\tNo\t4\t5\t24\t53.08\t19738.5\t628\t3\t619\t1\tMEDIUM\tJUNITA\t1\t1\tROBERTSON\nMARRIED\tUT                        \t0\t4\t1800\t0\t3\t0\t84801\tCU15287                   \tF                         \tPROF-26\t2500\tSouthwest\t1\t1800\tNo\t0\t5\t47\t53.06\t31900.25\t0\t0\t25\t0\tVERY HIGH\tCHASITY\t1\t1\tELLIS\nMARRIED\tUT                        \t0\t1\t1400\t0\t1\t0\t73987\tCU15289                   \tM                         \tProfessor\t2500\tSouthwest\t1\t1400\tNo\t0\t5\t46\t53.06\t31596.75\t0\t0\t25\t0\tVERY HIGH\tFRANKLIN\t1\t1\tKNOX\nSINGLE\tUT                        \t0\t3\t578\t0\t3\t0\t51452\tCU15290                   \tM                         \tSales Representative\t2500\tSouthwest\t1\t578\tNo\t0\t5\t33\t53.06\t21663\t0\t0\t25\t0\tMEDIUM\tLINCOLN\t1\t1\tMATTSON\nSINGLE\tUT                        \t0\t3\t0\t0\t3\t0\t63181\tCU15291                   \tM                         \tConstruction Laborer\t2500\tSouthwest\t0\t0\tNo\t1\t5\t49\t53.07\t16195.25\t0\t0\t25\t1\tMEDIUM\tSTEPHEN\t0\t0\tCARROLL\nSINGLE\tUT                        \t0\t5\t117\t0\t5\t0\t66654\tCU15292                   \tF                         \tPROF-3\t2500\tSouthwest\t1\t117\tNo\t0\t5\t21\t53.06\t21263.5\t0\t0\t25\t0\tMEDIUM\tCEOLA\t1\t1\tHARRISON\nSINGLE\tUT                        \t0\t3\t0\t250\t3\t0\t61716\tCU15294                   \tM                         \tProgrammer/Developer\t1500\tSouthwest\t0\t0\tNo\t3\t5\t26\t53.04\t13529\t0\t2\t25\t2\tLOW\tLLOYD\t0\t0\tHOLLEY\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":500,\"lastColumns\":[]}}]","hideInIFrame":false,"selectedVisualization":"html","title":"Examples of possible setting overrides for Attribute Importance","message":["%md","","## Examples of possible setting overrides for Expectation-Maximization clustering","","If the user does not override the default settings, then relevant settings are determined by the algorithm.","","A complete list of shared settings can be found in the Documentation link:","","* Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#ARPLS-GUID-24047A09-0542-4870-91D8-329F28B0ED75\" target=\"_blank\">All algorithms<\/a>","","* Machine Learning Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#ARPLS-GUID-CE514371-EC80-41EA-AB07-7F6501687D12\" target=\"_blank\"> ML settings <\/a>","","---","","##### Other interesting overrides for data preparation","","Oracle Machine Learning supports fully Automatic Data Preparation (ADP), user-directed general data preparation, and user-specified embedded data preparation. The `PREP_*` settings enable the user to request fully automated or user-directed general data preparation. By default, fully Automatic Data Preparation (ON) is enabled.","","A complete list of settings can be found in the Documentation link:","","* Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#ARPLS-GUID-5043274C-C753-47DE-9E60-D8528ADAC78D\" target=\"_blank\">Automatic Data Preparation<\/a>","","* This setting is used to specify Automatic Data Preparation.  ","  The value required is either `ON` or `OFF`, and the default is `ON`.","",">    % sql","     v_setlst('PREP_AUTO') := 'ON';","","The model uses heuristics to transform the build data according to the requirements of the algorithm. ","","##### User defined transformations","","Instead of fully ADP, the user can request that the data be shifted and/or scaled with the PREP_SCALE* and PREP_SHIFT* settings. The transformation instructions are stored with the model and reused whenever the model is applied. The model settings can be viewed in USER_MINING_MODEL_SETTINGS. ","","*  This setting enables scaling data preparation for two-dimensional numeric columns. PREP_AUTO must be OFF for this setting to take effect. The following are the possible values:","   PREP_SCALE_STDDEV: A request to divide the column values by the standard deviation of the column and is often provided together with PREP_SHIFT_MEAN to yield z-score normalization.","   PREP_SCALE_RANGE: A request to divide the column values by the range of values and is often provided together with PREP_SHIFT_MIN to yield a range of [0,1].",">    v_setlst('PREP_SCALE_2DNUM') := 'PREP_SCALE_STDDEV';","","* This setting enables centering data preparation for two-dimensional numeric columns. PREP_AUTO must be OFF for this setting to take effect. The following are the possible values:","   PREP_SHIFT_MEAN: Results in subtracting the average of the column from each value.","   PREP_SHIFT_MIN: Results in subtracting the minimum of the column from each value.",">    v_setlst('PREP_SHIFT_2DNUM') := 'PREP_SHIFT_MEAN';","","* This setting enables scaling data preparation for nested numeric columns. PREP_AUTO must be OFF for this setting to take effect. If specified, then the valid value for this setting is PREP_SCALE_MAXABS, which yields data in the range of [-1,1].",">    v_setlst('PREP_SCALE_NNUM') := 'PREP_SCALE_MAXABS';","","---"],"enabled":true,"result":{"startTime":1737859250310,"interpreter":"md.low","endTime":1737859250812,"results":[{"message":"<h2 id=\"examples-of-possible-setting-overrides-for-expectation-maximization-clustering\">Examples of possible setting overrides for Expectation-Maximization clustering<\/h2>\n<p>If the user does not override the default settings, then relevant settings are determined by the algorithm.<\/p>\n<p>A complete list of shared settings can be found in the Documentation link:<\/p>\n<ul>\n<li>\n<p>Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#ARPLS-GUID-24047A09-0542-4870-91D8-329F28B0ED75\" target=\"_blank\">All algorithms<\/a><\/p>\n<\/li>\n<li>\n<p>Machine Learning Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#ARPLS-GUID-CE514371-EC80-41EA-AB07-7F6501687D12\" target=\"_blank\"> ML settings <\/a><\/p>\n<\/li>\n<\/ul>\n<hr />\n<h5 id=\"other-interesting-overrides-for-data-preparation\">Other interesting overrides for data preparation<\/h5>\n<p>Oracle Machine Learning supports fully Automatic Data Preparation (ADP), user-directed general data preparation, and user-specified embedded data preparation. The <code>PREP_*<\/code> settings enable the user to request fully automated or user-directed general data preparation. By default, fully Automatic Data Preparation (ON) is enabled.<\/p>\n<p>A complete list of settings can be found in the Documentation link:<\/p>\n<ul>\n<li>\n<p>Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#ARPLS-GUID-5043274C-C753-47DE-9E60-D8528ADAC78D\" target=\"_blank\">Automatic Data Preparation<\/a><\/p>\n<\/li>\n<li>\n<p>This setting is used to specify Automatic Data Preparation.<br />\nThe value required is either <code>ON<\/code> or <code>OFF<\/code>, and the default is <code>ON<\/code>.<\/p>\n<\/li>\n<\/ul>\n<blockquote>\n<p>% sql\nv_setlst('PREP_AUTO') := 'ON';<\/p>\n<\/blockquote>\n<p>The model uses heuristics to transform the build data according to the requirements of the algorithm.<\/p>\n<h5 id=\"user-defined-transformations\">User defined transformations<\/h5>\n<p>Instead of fully ADP, the user can request that the data be shifted and/or scaled with the PREP_SCALE* and PREP_SHIFT* settings. The transformation instructions are stored with the model and reused whenever the model is applied. The model settings can be viewed in USER_MINING_MODEL_SETTINGS.<\/p>\n<ul>\n<li>This setting enables scaling data preparation for two-dimensional numeric columns. PREP_AUTO must be OFF for this setting to take effect. The following are the possible values:\nPREP_SCALE_STDDEV: A request to divide the column values by the standard deviation of the column and is often provided together with PREP_SHIFT_MEAN to yield z-score normalization.\nPREP_SCALE_RANGE: A request to divide the column values by the range of values and is often provided together with PREP_SHIFT_MIN to yield a range of [0,1].<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('PREP_SCALE_2DNUM') := 'PREP_SCALE_STDDEV';<\/p>\n<\/blockquote>\n<ul>\n<li>This setting enables centering data preparation for two-dimensional numeric columns. PREP_AUTO must be OFF for this setting to take effect. The following are the possible values:\nPREP_SHIFT_MEAN: Results in subtracting the average of the column from each value.\nPREP_SHIFT_MIN: Results in subtracting the minimum of the column from each value.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('PREP_SHIFT_2DNUM') := 'PREP_SHIFT_MEAN';<\/p>\n<\/blockquote>\n<ul>\n<li>This setting enables scaling data preparation for nested numeric columns. PREP_AUTO must be OFF for this setting to take effect. If specified, then the valid value for this setting is PREP_SCALE_MAXABS, which yields data in the range of [-1,1].<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('PREP_SCALE_NNUM') := 'PREP_SCALE_MAXABS';<\/p>\n<\/blockquote>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Use in-database Attribute Importance ","message":["\r","%script\r","\r","BEGIN DBMS_DATA_MINING.DROP_MODEL('AI_FS_MODEL');\r","EXCEPTION WHEN OTHERS THEN NULL; END;\r","/\r","DECLARE\r","    V_SETLST DBMS_DATA_MINING.SETTING_LIST;\r","BEGIN\r","    V_SETLST('ALGO_NAME')  := 'ALGO_AI_MDL';\r","    V_SETLST('PREP_AUTO')  := 'ON';\r","\r","    DBMS_DATA_MINING.CREATE_MODEL2(\r","        MODEL_NAME          => 'AI_FS_MODEL',\r","        MINING_FUNCTION     => 'ATTRIBUTE_IMPORTANCE',\r","        DATA_QUERY          => 'SELECT * FROM CUSTOMER_INSURANCE_LTV',\r","        SET_LIST            => V_SETLST,\r","        CASE_ID_COLUMN_NAME => 'CUSTOMER_ID',\r","        TARGET_COLUMN_NAME  => 'BUY_INSURANCE');\r","END;\r"],"enabled":true,"result":{"startTime":1737859251309,"interpreter":"script.low","endTime":1737859253494,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check the model view output with attribute rankings","message":["%sql","","SELECT ATTRIBUTE_NAME, ATTRIBUTE_IMPORTANCE_VALUE, ATTRIBUTE_RANK ","FROM   DM$VAAI_FS_MODEL ","WHERE  ATTRIBUTE_IMPORTANCE_VALUE > 0","ORDER BY ATTRIBUTE_IMPORTANCE_VALUE DESC","FETCH FIRST 10 ROWS ONLY"],"enabled":true,"result":{"startTime":1737859253961,"interpreter":"sql.low","endTime":1737859254438,"results":[{"message":"ATTRIBUTE_NAME\tATTRIBUTE_IMPORTANCE_VALUE\tATTRIBUTE_RANK\nBANK_FUNDS\t0.2105984620957382\t1\nMONEY_MONTLY_OVERDRAWN\t0.15007198908446304\t2\nNUM_TRANS_ATM\t0.14838252230225377\t3\nNUM_TRANS_TELLER\t0.11572527598455709\t4\nTOTAL_AUTOM_PAYMENTS\t0.10805697528319519\t5\nMONTHLY_CHECKS\t0.08916425624499165\t6\nNUM_DEPENDENTS\t0.028549990022342858\t7\nCUSTOMER_TENURE\t0.022654928543333067\t8\nCHECKING_BALANCE\t0.022525045499602096\t9\nPROFESSION\t0.016638375277904405\t10\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"bar","title":"Plot attributes by importance for predicting people who buy insurance","message":["%sql","","SELECT ATTRIBUTE_NAME, ATTRIBUTE_IMPORTANCE_VALUE, ATTRIBUTE_RANK ","FROM   DM$VAAI_FS_MODEL ","WHERE  ATTRIBUTE_IMPORTANCE_VALUE > 0","ORDER BY ATTRIBUTE_IMPORTANCE_VALUE DESC","FETCH FIRST 10 ROWS ONLY"],"enabled":true,"result":{"startTime":1737859254931,"interpreter":"sql.low","endTime":1737859255398,"results":[{"message":"ATTRIBUTE_NAME\tATTRIBUTE_IMPORTANCE_VALUE\tATTRIBUTE_RANK\nBANK_FUNDS\t0.2105984620957382\t1\nMONEY_MONTLY_OVERDRAWN\t0.15007198908446304\t2\nNUM_TRANS_ATM\t0.14838252230225377\t3\nNUM_TRANS_TELLER\t0.11572527598455709\t4\nTOTAL_AUTOM_PAYMENTS\t0.10805697528319519\t5\nMONTHLY_CHECKS\t0.08916425624499165\t6\nNUM_DEPENDENTS\t0.028549990022342858\t7\nCUSTOMER_TENURE\t0.022654928543333067\t8\nCHECKING_BALANCE\t0.022525045499602096\t9\nPROFESSION\t0.016638375277904405\t10\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","#### Feature importance using Random Forest","---"],"enabled":true,"result":{"startTime":1737859255866,"interpreter":"md.low","endTime":1737859256303,"results":[{"message":"<h4 id=\"feature-importance-using-random-forest\">Feature importance using Random Forest<\/h4>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":400,\"lastColumns\":[]}}]","hideInIFrame":false,"selectedVisualization":"html","title":"Examples of possible setting overrides for Random Forest","message":["%md","","## Examples of possible setting overrides for Random Forest","","If the user does not override the default settings, then relevant settings are determined by the algorithm.","","**NOTE:** Random Forest makes use of the Decision Tree settings to configure the construction of individual trees. ","","A complete list of settings can be found in the Documentation link:","","Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-481B6C67-B26E-4689-AD4C-98062D5A2117\" target=\"_blank\">Random Forest<\/a>","","Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-03435110-D723-42FD-B4EA-39C86A039566\" target=\"_blank\">Decision Tree<\/a>","","Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-24047A09-0542-4870-91D8-329F28B0ED75\" target=\"_blank\">All algorithms<\/a>","","* Specify a row weight column ",">    v_setlst('ODMS_ROW_WEIGHT_COLUMN_NAME') := '<row_weight_column_name>';","   ","* Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is `ODMS_MISSING_VALUE_AUTO`.  The option `ODMS_MISSING_VALUE_MEAN_MODE` replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option `ODMS_MISSING_VALUE_AUTO` performs different strategies for different algorithms.  When `ODMS_MISSING_VALUE_TREATMENT` is set to `ODMS_MISSING_VALUE_DELETE_ROW`, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.",">    v_setlst('ODMS_MISSING_VALUE_TREATMENT') := 'ODMS_MISSING_VALUE_AUTO';","","##### These settings configure the behavior of the Random Forest algorithm ","","* Specify the number of trees in the forest.  It requires a number between 1 and 65535 (including the edges).  The default is 20.",">    v_setlst('RFOR_NUM_TREES') := '20';","","* Specify the fraction of the training data to be randomly sampled for use in the construction of an individual tree. The default is half of the number of rows in the training data. It requires a fraction between 0 and 1 (excluding the edges)",">    v_setlst('RFOR_SAMPLING_RATIO') := '0.5';","","* Specify the size of the random subset of columns to be considered when choosing a split at a node. For each node, the size of the pool remains the same, but the specific candidate columns change. The default is half of the columns in the model signature. The special value 0 indicates that the candidate pool includes all columns.  It requires a number equal to or greater than 0.",">    v_setlst('RFOR_MTRY') := '0';","","##### Decision Tree settings to configure the construction of individual trees","    ","* Specify Tree impurity metric for each Tree. ","   Tree algorithms seek the best test question for splitting data at each node. The best splitter and split values are those that result in the largest increase in target value homogeneity (purity) for the entities in the node. Purity is by a metric. Decision trees can use either Gini `TREE_IMPURITY_GINI` or entropy `TREE_IMPURITY_ENTROPY` as the purity metric. By default, the algorithm uses `TREE_IMPURITY_GINI`.",">    v_setlst('TREE_IMPURITY_METRIC') := 'TREE_IMPURITY_GINI';","    ","* Specify the criteria for splits regarding the maximum tree depth (the maximum number of nodes between the root and any leaf node, including the leaf node).","   For Decision Tree, it requires a number between 2 and 20, and the default is 7. For Random Forest it is a number between 2 and 100, and the default is 16.",">    v_setlst('TREE_TERM_MAX_DEPTH') := '7';","    ","* Specify the minimum number of training rows in a node expressed as a percentage of the rows in the training data.","   It requires a number between 0 and 10.  The default is 0.05, indicating 0.05%. ",">    v_setlst('TREE_TERM_MINPCT_NODE') := '0.05';","    ","* Specify the minimum number of rows required to consider splitting a node expressed as a percentage of the training rows.","   It requires a number greater than 0, and smaller or equal to 20.  The default is 0.1, indicating 0.1%. ",">    v_setlst('TREE_TERM_MINPCT_SPLIT') := '0.1';","","* Specify The minimum number of rows in a node.","   It requires a number greater than or equal to zero. The default is 10.      ",">    v_setlst('TREE_TERM_MINREC_NODE') := '10';","    ","* Specify the criteria for splits regarding the minimum number of records in a parent node expressed as a value. ","   No split is attempted if the number of records is below this value.  It requires a number greater than 1.  The default is 20.       ",">    v_setlst('TREE_TERM_MINREC_SPLIT') := '20';","    ","* Specify the maximum number of bins for each attribute.","   For Decision Tree it requires a number between 2 and 2,147,483,647, with the default value of 32. For Random Forest it requires a number between 2 and 254, with the default value of 32.",">    v_setlst('CLAS_MAX_SUP_BINS') := '32';    ","    "],"enabled":true,"result":{"startTime":1737859256759,"interpreter":"md.low","endTime":1737859257228,"results":[{"message":"<h2 id=\"examples-of-possible-setting-overrides-for-random-forest\">Examples of possible setting overrides for Random Forest<\/h2>\n<p>If the user does not override the default settings, then relevant settings are determined by the algorithm.<\/p>\n<p><strong>NOTE:<\/strong> Random Forest makes use of the Decision Tree settings to configure the construction of individual trees.<\/p>\n<p>A complete list of settings can be found in the Documentation link:<\/p>\n<p>Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-481B6C67-B26E-4689-AD4C-98062D5A2117\" target=\"_blank\">Random Forest<\/a><\/p>\n<p>Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-03435110-D723-42FD-B4EA-39C86A039566\" target=\"_blank\">Decision Tree<\/a><\/p>\n<p>Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-24047A09-0542-4870-91D8-329F28B0ED75\" target=\"_blank\">All algorithms<\/a><\/p>\n<ul>\n<li>Specify a row weight column<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('ODMS_ROW_WEIGHT_COLUMN_NAME') := '&lt;row_weight_column_name&gt;';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is <code>ODMS_MISSING_VALUE_AUTO<\/code>.  The option <code>ODMS_MISSING_VALUE_MEAN_MODE<\/code> replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option <code>ODMS_MISSING_VALUE_AUTO<\/code> performs different strategies for different algorithms.  When <code>ODMS_MISSING_VALUE_TREATMENT<\/code> is set to <code>ODMS_MISSING_VALUE_DELETE_ROW<\/code>, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('ODMS_MISSING_VALUE_TREATMENT') := 'ODMS_MISSING_VALUE_AUTO';<\/p>\n<\/blockquote>\n<h5 id=\"these-settings-configure-the-behavior-of-the-random-forest-algorithm\">These settings configure the behavior of the Random Forest algorithm<\/h5>\n<ul>\n<li>Specify the number of trees in the forest.  It requires a number between 1 and 65535 (including the edges).  The default is 20.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('RFOR_NUM_TREES') := '20';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the fraction of the training data to be randomly sampled for use in the construction of an individual tree. The default is half of the number of rows in the training data. It requires a fraction between 0 and 1 (excluding the edges)<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('RFOR_SAMPLING_RATIO') := '0.5';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the size of the random subset of columns to be considered when choosing a split at a node. For each node, the size of the pool remains the same, but the specific candidate columns change. The default is half of the columns in the model signature. The special value 0 indicates that the candidate pool includes all columns.  It requires a number equal to or greater than 0.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('RFOR_MTRY') := '0';<\/p>\n<\/blockquote>\n<h5 id=\"decision-tree-settings-to-configure-the-construction-of-individual-trees\">Decision Tree settings to configure the construction of individual trees<\/h5>\n<ul>\n<li>Specify Tree impurity metric for each Tree.\nTree algorithms seek the best test question for splitting data at each node. The best splitter and split values are those that result in the largest increase in target value homogeneity (purity) for the entities in the node. Purity is by a metric. Decision trees can use either Gini <code>TREE_IMPURITY_GINI<\/code> or entropy <code>TREE_IMPURITY_ENTROPY<\/code> as the purity metric. By default, the algorithm uses <code>TREE_IMPURITY_GINI<\/code>.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_IMPURITY_METRIC') := 'TREE_IMPURITY_GINI';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the criteria for splits regarding the maximum tree depth (the maximum number of nodes between the root and any leaf node, including the leaf node).\nFor Decision Tree, it requires a number between 2 and 20, and the default is 7. For Random Forest it is a number between 2 and 100, and the default is 16.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MAX_DEPTH') := '7';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the minimum number of training rows in a node expressed as a percentage of the rows in the training data.\nIt requires a number between 0 and 10.  The default is 0.05, indicating 0.05%.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINPCT_NODE') := '0.05';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the minimum number of rows required to consider splitting a node expressed as a percentage of the training rows.\nIt requires a number greater than 0, and smaller or equal to 20.  The default is 0.1, indicating 0.1%.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINPCT_SPLIT') := '0.1';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify The minimum number of rows in a node.\nIt requires a number greater than or equal to zero. The default is 10.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINREC_NODE') := '10';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the criteria for splits regarding the minimum number of records in a parent node expressed as a value.\nNo split is attempted if the number of records is below this value.  It requires a number greater than 1.  The default is 20.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINREC_SPLIT') := '20';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the maximum number of bins for each attribute.\nFor Decision Tree it requires a number between 2 and 2,147,483,647, with the default value of 32. For Random Forest it requires a number between 2 and 254, with the default value of 32.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('CLAS_MAX_SUP_BINS') := '32';<\/p>\n<\/blockquote>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Build a Random Forest model for Feature Selection","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('RF_FEAT_SELECTION');","      EXCEPTION WHEN OTHERS THEN NULL; ","END;","/","DECLARE","    V_SETLST DBMS_DATA_MINING.SETTING_LIST;","    ","BEGIN","    V_SETLST('PREP_AUTO')           := 'ON';","    V_SETLST('ALGO_NAME')           := 'ALGO_RANDOM_FOREST';","    V_SETLST('RFOR_MTRY')           := '3';","    V_SETLST('RFOR_NUM_TREES')      := '25';","    V_SETLST('RFOR_SAMPLING_RATIO') := '0.5';","    ","    DBMS_DATA_MINING.CREATE_MODEL2(","        MODEL_NAME          => 'RF_FEAT_SELECTION',","        MINING_FUNCTION     => 'CLASSIFICATION',","        DATA_QUERY          => 'SELECT * FROM CUSTOMER_INSURANCE_LTV',","        SET_LIST            => V_SETLST,","        CASE_ID_COLUMN_NAME => 'CUSTOMER_ID',","        TARGET_COLUMN_NAME  => 'BUY_INSURANCE'","        );","END;"],"enabled":true,"result":{"startTime":1737859257705,"interpreter":"script.low","endTime":1737859260613,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"bar\":{\"aggregationOption\":\"Last\",\"series\":{\"availableSeriesElements\":[{\"id\":\"ATTRIBUTE_IMPORTANCE\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"lastColumns\":[\"ATTRIBUTE_NAME\",\"ATTRIBUTE_IMPORTANCE\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Plot attributes by importance for predicting people who buy insurance","message":["%sql","","SELECT ATTRIBUTE_NAME, ATTRIBUTE_IMPORTANCE","FROM   DM$VARF_FEAT_SELECTION ","ORDER BY ATTRIBUTE_IMPORTANCE DESC","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1737859261083,"interpreter":"sql.low","endTime":1737859261566,"results":[{"message":"ATTRIBUTE_NAME\tATTRIBUTE_IMPORTANCE\nMONEY_MONTLY_OVERDRAWN\t0.8668095070288839\nTOTAL_AUTOM_PAYMENTS\t0.8381233447543975\nBANK_FUNDS\t0.7117235921865998\nNUM_TRANS_ATM\t0.6763216009007427\nCHECKING_BALANCE\t0.5736764978371948\nNUM_TRANS_TELLER\t0.531403630259799\nNUM_ONLINE_TRANS\t0.5312016007612806\nMONTHLY_CHECKS\t0.49122807973702387\nNUM_TRANS_KIOSK\t0.47397358205654727\nAGE\t0.4482307544478193\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Feature importance using Decision Tree","---"],"enabled":true,"result":{"startTime":1737859262038,"interpreter":"md.low","endTime":1737859262500,"results":[{"message":"<h3 id=\"feature-importance-using-decision-tree\">Feature importance using Decision Tree<\/h3>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"html\":{\"height\":400,\"lastColumns\":[]}}]","hideInIFrame":false,"selectedVisualization":"html","title":"Examples of possible setting overrides for DT","message":["%md","","## Examples of possible setting overrides for DT","","If the user does not override the default settings, then relevant settings are determined by the algorithm.","","A complete list of settings can be found in the Documentation link:","","Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-03435110-D723-42FD-B4EA-39C86A039566\" target=\"_blank\">Decision Tree<\/a>","","Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-24047A09-0542-4870-91D8-329F28B0ED75\" target=\"_blank\">All algorithms<\/a>","","* Specify a row weight column ",">    v_setlst('ODMS_ROW_WEIGHT_COLUMN_NAME') := '<row_weight_column_name>';","   ","* Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is `ODMS_MISSING_VALUE_AUTO`.  The option `ODMS_MISSING_VALUE_MEAN_MODE` replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option `ODMS_MISSING_VALUE_AUTO` performs different strategies for different algorithms.  When `ODMS_MISSING_VALUE_TREATMENT` is set to `ODMS_MISSING_VALUE_DELETE_ROW`, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.",">    v_setlst('ODMS_MISSING_VALUE_TREATMENT') := 'ODMS_MISSING_VALUE_AUTO';","","* Specify Tree impurity metric for Decision Tree. ","   Tree algorithms seek the best test question for splitting data at each node. The best splitter and split values are those that result in the largest increase in target value homogeneity (purity) for the entities in the node. Purity is by a metric. Decision trees can use either Gini `TREE_IMPURITY_GINI` or entropy `TREE_IMPURITY_ENTROPY` as the purity metric. By default, the algorithm uses `TREE_IMPURITY_GINI`.",">    v_setlst('TREE_IMPURITY_METRIC') := 'TREE_IMPURITY_GINI';","    ","* Specify the criteria for splits regarding the maximum tree depth (the maximum number of nodes between the root and any leaf node, including the leaf node).","   For Decision Tree, it requires a number between 2 and 20, and the default is 7. For Random Forest it is a number between 2 and 100, and the default is 16.",">    v_setlst('TREE_TERM_MAX_DEPTH') := '7';","    ","* Specify the minimum number of training rows in a node expressed as a percentage of the rows in the training data.","   It requires a number between 0 and 10.  The default is 0.05, indicating 0.05%. ",">   v_setlst('TREE_TERM_MINPCT_NODE') := '0.05';","    ","* Specify the minimum number of rows required to consider splitting a node expressed as a percentage of the training rows.","   It requires a number greater than 0, and smaller or equal to 20.  The default is 0.1, indicating 0.1%. ",">    v_setlst('TREE_TERM_MINPCT_SPLIT') := '0.1';","","* Specify The minimum number of rows in a node.","   It requires a number greater than or equal to zero. The default is 10.      ",">    v_setlst('TREE_TERM_MINREC_NODE') := '10';","    ","* Specify the criteria for splits regarding the minimum number of records in a parent node expressed as a value. ","   No split is attempted if the number of records is below this value.  It requires a number greater than 1.  The default is 20.       ",">    v_setlst('TREE_TERM_MINREC_SPLIT') := '20';","    ","* Specify the maximum number of bins for each attribute.","   For Decision Tree it requires a number between 2 and 2,147,483,647, with the default value of 32. For Random Forest it requires a number between 2 and 254, with the default value of 32.",">    v_setlst('CLAS_MAX_SUP_BINS') := '32';    ","    ","---"],"enabled":true,"result":{"startTime":1737859262986,"interpreter":"md.low","endTime":1737859263439,"results":[{"message":"<h2 id=\"examples-of-possible-setting-overrides-for-dt\">Examples of possible setting overrides for DT<\/h2>\n<p>If the user does not override the default settings, then relevant settings are determined by the algorithm.<\/p>\n<p>A complete list of settings can be found in the Documentation link:<\/p>\n<p>Algorithm Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-03435110-D723-42FD-B4EA-39C86A039566\" target=\"_blank\">Decision Tree<\/a><\/p>\n<p>Shared Settings: <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/23/arpls/DBMS_DATA_MINING.html#GUID-24047A09-0542-4870-91D8-329F28B0ED75\" target=\"_blank\">All algorithms<\/a><\/p>\n<ul>\n<li>Specify a row weight column<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('ODMS_ROW_WEIGHT_COLUMN_NAME') := '&lt;row_weight_column_name&gt;';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify a missing value treatment method for the training data. This setting does not affect the scoring data. The default value is <code>ODMS_MISSING_VALUE_AUTO<\/code>.  The option <code>ODMS_MISSING_VALUE_MEAN_MODE<\/code> replaces missing values with the mean (numeric attributes) or the mode (categorical attributes) both at build time and apply time where appropriate. The option <code>ODMS_MISSING_VALUE_AUTO<\/code> performs different strategies for different algorithms.  When <code>ODMS_MISSING_VALUE_TREATMENT<\/code> is set to <code>ODMS_MISSING_VALUE_DELETE_ROW<\/code>, the rows in the training data that contain missing values are deleted. However, if you want to replicate this missing value treatment in the scoring data, then you must perform the transformation explicitly.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('ODMS_MISSING_VALUE_TREATMENT') := 'ODMS_MISSING_VALUE_AUTO';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify Tree impurity metric for Decision Tree.\nTree algorithms seek the best test question for splitting data at each node. The best splitter and split values are those that result in the largest increase in target value homogeneity (purity) for the entities in the node. Purity is by a metric. Decision trees can use either Gini <code>TREE_IMPURITY_GINI<\/code> or entropy <code>TREE_IMPURITY_ENTROPY<\/code> as the purity metric. By default, the algorithm uses <code>TREE_IMPURITY_GINI<\/code>.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_IMPURITY_METRIC') := 'TREE_IMPURITY_GINI';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the criteria for splits regarding the maximum tree depth (the maximum number of nodes between the root and any leaf node, including the leaf node).\nFor Decision Tree, it requires a number between 2 and 20, and the default is 7. For Random Forest it is a number between 2 and 100, and the default is 16.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MAX_DEPTH') := '7';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the minimum number of training rows in a node expressed as a percentage of the rows in the training data.\nIt requires a number between 0 and 10.  The default is 0.05, indicating 0.05%.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINPCT_NODE') := '0.05';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the minimum number of rows required to consider splitting a node expressed as a percentage of the training rows.\nIt requires a number greater than 0, and smaller or equal to 20.  The default is 0.1, indicating 0.1%.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINPCT_SPLIT') := '0.1';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify The minimum number of rows in a node.\nIt requires a number greater than or equal to zero. The default is 10.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINREC_NODE') := '10';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the criteria for splits regarding the minimum number of records in a parent node expressed as a value.\nNo split is attempted if the number of records is below this value.  It requires a number greater than 1.  The default is 20.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('TREE_TERM_MINREC_SPLIT') := '20';<\/p>\n<\/blockquote>\n<ul>\n<li>Specify the maximum number of bins for each attribute.\nFor Decision Tree it requires a number between 2 and 2,147,483,647, with the default value of 32. For Random Forest it requires a number between 2 and 254, with the default value of 32.<\/li>\n<\/ul>\n<blockquote>\n<p>v_setlst('CLAS_MAX_SUP_BINS') := '32';<\/p>\n<\/blockquote>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Build a Decision Tree model for Feature Selection","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('DT_FEAT_SELECTION');","      EXCEPTION WHEN OTHERS THEN NULL; ","END;","/","DECLARE","    V_SETLST DBMS_DATA_MINING.SETTING_LIST;","    ","BEGIN","    V_SETLST('PREP_AUTO')             := 'ON';","    V_SETLST('ALGO_NAME')             := 'ALGO_DECISION_TREE';","    V_SETLST('TREE_TERM_MAX_DEPTH')   := '10';","    V_SETLST('TREE_TERM_MINPCT_NODE') := '0.01';","    ","    DBMS_DATA_MINING.CREATE_MODEL2(","        MODEL_NAME          => 'DT_FEAT_SELECTION',","        MINING_FUNCTION     => 'CLASSIFICATION',","        DATA_QUERY          => 'SELECT * FROM CUSTOMER_INSURANCE_LTV',","        SET_LIST            => V_SETLST,","        CASE_ID_COLUMN_NAME => 'CUSTOMER_ID',","        TARGET_COLUMN_NAME  => 'BUY_INSURANCE'","        );","END;"],"enabled":true,"result":{"startTime":1737859264072,"interpreter":"script.low","endTime":1737859266889,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display Decision Tree nodes with top support","message":["%sql","","SELECT * ","FROM (SELECT NODE, ","             NODE_SUPPORT, ","             PREDICTED_TARGET_VALUE, ","             PARENT,","             ATTRIBUTE_NAME,","             OPERATOR, ","             SPLIT.VAL","      FROM DM$VODT_FEAT_SELECTION A,","           XMLTABLE( '/Element' PASSING A.VALUE","                     COLUMNS","                     VAL VARCHAR2(20) PATH '.') SPLIT  ","      ORDER BY 1,2,3,4,5,6,7)","ORDER BY NODE_SUPPORT DESC","FETCH FIRST 10 ROWS ONLY;"],"enabled":true,"result":{"startTime":1737859267463,"interpreter":"sql.low","endTime":1737859268077,"results":[{"message":"NODE\tNODE_SUPPORT\tPREDICTED_TARGET_VALUE\tPARENT\tATTRIBUTE_NAME\tOPERATOR\tVAL\n1\t8852\tNo\t0\tBANK_FUNDS\t>\t2.46E+002\n2\t5583\tYes\t1\tCHECKING_BALANCE\t<=\t2.125E+002\n22\t5028\tNo\t0\tBANK_FUNDS\t<=\t2.46E+002\n9\t3781\tYes\t2\tMONEY_MONTLY_OVERDRAWN\t>\t5.3254999999999995E+\n10\t3269\tYes\t9\tCREDIT_BALANCE\t<=\t2.85E+001\n20\t3269\tNo\t1\tCHECKING_BALANCE\t>\t2.125E+002\n42\t2610\tNo\t20\tMONEY_MONTLY_OVERDRAWN\t<=\t5.4144999999999996E+\n11\t2040\tYes\t10\tMONEY_MONTLY_OVERDRAWN\t<=\t5.4144999999999996E+\n12\t1936\tYes\t11\tTOTAL_AUTOM_PAYMENTS\t<=\t3.1805E+003\n3\t1802\tNo\t2\tMONEY_MONTLY_OVERDRAWN\t<=\t5.3254999999999995E+\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Select the attributes and their average support","message":["%sql","","SELECT DISTINCT ATTRIBUTE_NAME, ","       ROUND(AVG(NODE_SUPPORT),2) AVG_SUPPORT","FROM (SELECT * ","      FROM (SELECT NODE, ","                   NODE_SUPPORT, ","                   PREDICTED_TARGET_VALUE, ","                   PARENT,","                   ATTRIBUTE_NAME,","                   OPERATOR, ","                   SPLIT.VAL","            FROM DM$VODT_FEAT_SELECTION A,","            XMLTABLE( '/Element' PASSING A.VALUE","                     COLUMNS","                     VAL VARCHAR2(20) PATH '.') SPLIT  ","            ORDER BY 1,2,3,4,5,6,7)","            )"," GROUP BY ATTRIBUTE_NAME"," ORDER BY AVG_SUPPORT DESC"],"enabled":true,"result":{"startTime":1737859268547,"interpreter":"sql.low","endTime":1737859269119,"results":[{"message":"ATTRIBUTE_NAME\tAVG_SUPPORT\nBANK_FUNDS\t2710.67\nCREDIT_BALANCE\t1890.5\nCHECKING_BALANCE\t1498\nMONEY_MONTLY_OVERDRAWN\t1251.17\nSTATE\t781\nTOTAL_AUTOM_PAYMENTS\t607.75\nNUM_TRANS_ATM\t498.5\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"bar\":{\"series\":{\"availableSeriesElements\":[{\"id\":\"AVG_SUPPORT\",\"lineType\":\"straight\",\"borderColor\":\"rgb(25, 95, 116)\",\"borderWidth\":0,\"color\":\"rgb(25, 95, 116)\",\"pattern\":\"auto\",\"markerColor\":\"rgb(25, 95, 116)\",\"markerDisplayed\":\"auto\",\"markerShape\":\"auto\",\"markerSize\":0}]},\"height\":400,\"lastColumns\":[\"ATTRIBUTE_NAME\",\"AVG_SUPPORT\"],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"bar","title":"Plot the attributes and their average support","message":["%sql","","SELECT DISTINCT ATTRIBUTE_NAME, ","       ROUND(AVG(NODE_SUPPORT),2) AVG_SUPPORT","FROM (SELECT * ","      FROM (SELECT NODE, ","                   NODE_SUPPORT, ","                   PREDICTED_TARGET_VALUE, ","                   PARENT,","                   ATTRIBUTE_NAME,","                   OPERATOR, ","                   SPLIT.VAL","            FROM DM$VODT_FEAT_SELECTION A,","            XMLTABLE( '/Element' PASSING A.VALUE","                     COLUMNS","                     VAL VARCHAR2(20) PATH '.') SPLIT  ","            ORDER BY 1,2,3,4,5,6,7)","            )"," GROUP BY ATTRIBUTE_NAME"," ORDER BY AVG_SUPPORT DESC"],"enabled":true,"result":{"startTime":1737859269588,"interpreter":"sql.low","endTime":1737859270086,"results":[{"message":"ATTRIBUTE_NAME\tAVG_SUPPORT\nBANK_FUNDS\t2710.67\nCREDIT_BALANCE\t1890.5\nCHECKING_BALANCE\t1498\nMONEY_MONTLY_OVERDRAWN\t1251.17\nSTATE\t781\nTOTAL_AUTOM_PAYMENTS\t607.75\nNUM_TRANS_ATM\t498.5\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1737859270570,"interpreter":"md.low","endTime":1737859271013,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":{"startTime":1737859271592,"interpreter":"md.low","endTime":1737859272066,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]