[{"layout":null,"template":null,"templateConfig":null,"name":"OML Export and Import Serialized Models","description":null,"readOnly":false,"type":"medium","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1734652313455,"interpreter":"md.medium","endTime":1734652313954,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# Exporting and Importing Serialized Models","","Oracle Machine Learning provides APIs to streamline the process of migrating models across databases and platforms. The focus of this notebook is exporting and importing native serialized models using the `DBMS_DATA_MINING.EXPORT_SERMODEL` and `DBMS_DATA_MINING.IMPORT_SERMODEL` procedures. ","","","---","#### Serialized model format","---","The serialized model format was introduced in Oracle Database 18c as a lightweight approach to support scoring. `DBMS_DATA_MINING.EXPORT_SERMODEL` exports a single model to a serialized BLOB so it can be imported and scored in a separate Oracle Machine Learning (OML) database instance or to OML Services. `DBMS_DATA_MINING.IMPORT_SERMODEL` takes the serialized BLOB and creates the model in the target database. ","","As a result of building models, each model has a set of model detail views that provide information about the model such as model statistics for evaluation. These model detail views can be queried by the user. With serialized models, only the model data and metadata required for scoring are available in the serialized model, so it is more compact and transfers faster to the target environment than dump files produced by the `DBMS_DATA_MINING.EXPORT_MODEL` procedure.","","If full model details are required, use the `DBMS_DATA_MINING.EXPORT_MODEL` and  `DBMS_DATA_MINING.IMPORT_MODEL` procedures.  Serialized model export support only models that produce scores. Specifically, it does not support Attribute Importance, Association Rules, Exponential Smoothing, or O-Cluster (although O-Cluster does support scoring). Use `DBMS_DATA_MINING.EXPORT_MODEL` to export these models and scenarios when the full model details are required.","","---","#### Deployment Scenarios","---","","The same machine learning algorithms are available in **both Autonomous Database and on-premises**. Users have the option to build models on premises and deploy to the cloud, and vice versa.","","Serialized models can also be deployed to OML Services, which provides REST endpoints hosted on Autonomous Database. These endpoints enable storing OML models and creating scoring endpoints. The REST API for OML Services supports both OML models and ONNX format models, and enables cognitive text functionality.","","In this notebook we demonstrate the following scenarios using `DBMS_DATA_MINING.EXPORT_SERMODEL` and `DBMS_DATA_MINING.IMPORT_SERMODEL`:","","* Migrating models between two schemas in the same database","* Migrating models between two separate database instances","    * Autonomous Database to Autonomous Database","    * Autonomous Database to Oracle Database","    * Oracle Database to Autonomous Database","    * Oracle Database to Oracle Database","","Copyright (c) 2026 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a>"],"enabled":true,"result":{"startTime":1734652314401,"interpreter":"md.medium","endTime":1734652314916,"results":[{"message":"<h1 id=\"exporting-and-importing-serialized-models\">Exporting and Importing Serialized Models<\/h1>\n<p>Oracle Machine Learning provides APIs to streamline the process of migrating models across databases and platforms. The focus of this notebook is exporting and importing native serialized models using the <code>DBMS_DATA_MINING.EXPORT_SERMODEL<\/code> and <code>DBMS_DATA_MINING.IMPORT_SERMODEL<\/code> procedures.<\/p>\n<hr />\n<h4 id=\"serialized-model-format\">Serialized model format<\/h4>\n<hr />\n<p>The serialized model format was introduced in Oracle Database 18c as a lightweight approach to support scoring. <code>DBMS_DATA_MINING.EXPORT_SERMODEL<\/code> exports a single model to a serialized BLOB so it can be imported and scored in a separate Oracle Machine Learning (OML) database instance or to OML Services. <code>DBMS_DATA_MINING.IMPORT_SERMODEL<\/code> takes the serialized BLOB and creates the model in the target database.<\/p>\n<p>As a result of building models, each model has a set of model detail views that provide information about the model such as model statistics for evaluation. These model detail views can be queried by the user. With serialized models, only the model data and metadata required for scoring are available in the serialized model, so it is more compact and transfers faster to the target environment than dump files produced by the <code>DBMS_DATA_MINING.EXPORT_MODEL<\/code> procedure.<\/p>\n<p>If full model details are required, use the <code>DBMS_DATA_MINING.EXPORT_MODEL<\/code> and  <code>DBMS_DATA_MINING.IMPORT_MODEL<\/code> procedures.  Serialized model export support only models that produce scores. Specifically, it does not support Attribute Importance, Association Rules, Exponential Smoothing, or O-Cluster (although O-Cluster does support scoring). Use <code>DBMS_DATA_MINING.EXPORT_MODEL<\/code> to export these models and scenarios when the full model details are required.<\/p>\n<hr />\n<h4 id=\"deployment-scenarios\">Deployment Scenarios<\/h4>\n<hr />\n<p>The same machine learning algorithms are available in <strong>both Autonomous Database and on-premises<\/strong>. Users have the option to build models on premises and deploy to the cloud, and vice versa.<\/p>\n<p>Serialized models can also be deployed to OML Services, which provides REST endpoints hosted on Autonomous Database. These endpoints enable storing OML models and creating scoring endpoints. The REST API for OML Services supports both OML models and ONNX format models, and enables cognitive text functionality.<\/p>\n<p>In this notebook we demonstrate the following scenarios using <code>DBMS_DATA_MINING.EXPORT_SERMODEL<\/code> and <code>DBMS_DATA_MINING.IMPORT_SERMODEL<\/code>:<\/p>\n<ul>\n<li>Migrating models between two schemas in the same database<\/li>\n<li>Migrating models between two separate database instances\n<ul>\n<li>Autonomous Database to Autonomous Database<\/li>\n<li>Autonomous Database to Oracle Database<\/li>\n<li>Oracle Database to Autonomous Database<\/li>\n<li>Oracle Database to Oracle Database<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<p>Copyright (c) 2026 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Scenario #1: Single database, different schemas ","message":["%md","","This example builds a model and exports it from one schema to another in the same database. The user that builds the model exports it as a serialized model using a BLOB column in a table, and the second user imports the model from that table into their schema. ","","Note, this is an uncommon use case because users can grant select privileges on models to other database users for scoring.","","This example applies to **both Autonomous Database and Oracle Database**."],"enabled":true,"result":{"startTime":1734652315356,"interpreter":"md.medium","endTime":1734652315778,"results":[{"message":"<p>This example builds a model and exports it from one schema to another in the same database. The user that builds the model exports it as a serialized model using a BLOB column in a table, and the second user imports the model from that table into their schema.<\/p>\n<p>Note, this is an uncommon use case because users can grant select privileges on models to other database users for scoring.<\/p>\n<p>This example applies to <strong>both Autonomous Database and Oracle Database<\/strong>.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Create a database table CARS using the mtcars data in R","message":["%r","","# suppress row order warnings","options(ore.warn.order=FALSE)","","# convert to a data frame","cars <- as.data.frame(mtcars) ","","# add case ID column ","cars$CID <- 1:nrow(cars)","","# convert variable names to upper case for SQL compatibility","names(cars) <- toupper(names(cars))","","# drop table if it exists","if (ore.exists(\"CARS\")) ore.drop(table=\"CARS\")","","# create database table","ore.create(cars, table=\"CARS\", overwrite=TRUE)","head(CARS)"],"enabled":true,"result":{"startTime":1734652316208,"interpreter":"r.medium","endTime":1734652321974,"results":[{"message":"<table class=\"dataframe\">\n<caption>A data.frame: 6 x 12<\/caption>\n<thead>\n\t<tr><th scope=col>MPG<\/th><th scope=col>CYL<\/th><th scope=col>DISP<\/th><th scope=col>HP<\/th><th scope=col>DRAT<\/th><th scope=col>WT<\/th><th scope=col>QSEC<\/th><th scope=col>VS<\/th><th scope=col>AM<\/th><th scope=col>GEAR<\/th><th scope=col>CARB<\/th><th scope=col>CID<\/th><\/tr>\n\t<tr><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;dbl&gt;<\/th><th scope=col>&lt;int&gt;<\/th><\/tr>\n<\/thead>\n<tbody>\n\t<tr><td>21.0<\/td><td>6<\/td><td>160<\/td><td>110<\/td><td>3.90<\/td><td>2.620<\/td><td>16.46<\/td><td>0<\/td><td>1<\/td><td>4<\/td><td>4<\/td><td>1<\/td><\/tr>\n\t<tr><td>21.0<\/td><td>6<\/td><td>160<\/td><td>110<\/td><td>3.90<\/td><td>2.875<\/td><td>17.02<\/td><td>0<\/td><td>1<\/td><td>4<\/td><td>4<\/td><td>2<\/td><\/tr>\n\t<tr><td>22.8<\/td><td>4<\/td><td>108<\/td><td> 93<\/td><td>3.85<\/td><td>2.320<\/td><td>18.61<\/td><td>1<\/td><td>1<\/td><td>4<\/td><td>1<\/td><td>3<\/td><\/tr>\n\t<tr><td>21.4<\/td><td>6<\/td><td>258<\/td><td>110<\/td><td>3.08<\/td><td>3.215<\/td><td>19.44<\/td><td>1<\/td><td>0<\/td><td>3<\/td><td>1<\/td><td>4<\/td><\/tr>\n\t<tr><td>18.7<\/td><td>8<\/td><td>360<\/td><td>175<\/td><td>3.15<\/td><td>3.440<\/td><td>17.02<\/td><td>0<\/td><td>0<\/td><td>3<\/td><td>2<\/td><td>5<\/td><\/tr>\n\t<tr><td>18.1<\/td><td>6<\/td><td>225<\/td><td>105<\/td><td>2.76<\/td><td>3.460<\/td><td>20.22<\/td><td>1<\/td><td>0<\/td><td>3<\/td><td>1<\/td><td>6<\/td><\/tr>\n<\/tbody>\n<\/table>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Drop, then build a model","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","DECLARE","  v_setlst DBMS_DATA_MINING.SETTING_LIST;","    ","BEGIN","  v_setlst('PREP_AUTO') := 'ON';","  v_setlst('ALGO_NAME') := 'ALGO_GENERALIZED_LINEAR_MODEL';","  v_setlst('GLMS_DIAGNOSTICS_TABLE_NAME') := 'GLMR_DIAG';","    ","  DBMS_DATA_MINING.CREATE_MODEL2(","    model_name          => 'GLM_MOD',","    mining_function     => 'REGRESSION',","    data_query          => 'SELECT * FROM CARS',","    set_list            =>  v_setlst,","    case_id_column_name => 'CID',","    target_column_name  => 'MPG');","END"],"enabled":true,"result":{"startTime":1734652322415,"interpreter":"script.medium","endTime":1734652327265,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View the model in the database","message":["","%sql","","SELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE ","FROM   ALL_MINING_MODELS ","WHERE  MODEL_NAME='GLM_MOD'"],"enabled":true,"result":{"startTime":1734652327690,"interpreter":"sql.medium","endTime":1734652328289,"results":[{"message":"MODEL_NAME\tMINING_FUNCTION\tALGORITHM\tCREATION_DATE\nGLM_MOD\tREGRESSION\tGENERALIZED_LINEAR_MODEL\t2024-12-19 23:52:04\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create a table to store the model","message":["%script","","BEGIN EXECUTE IMMEDIATE 'DROP TABLE MODEL_EXPORT';  -- drop table if it exists","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","CREATE TABLE MODEL_EXPORT(MY_MODEL BLOB"],"enabled":true,"result":{"startTime":1734652328727,"interpreter":"script.medium","endTime":1734652329242,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nTable MODEL_EXPORT created.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Export the  model to the table","message":["%script"," ","DECLARE","  BLOB_MODEL BLOB;","BEGIN","  DBMS_LOB.CREATETEMPORARY(BLOB_MODEL, FALSE);","  DBMS_DATA_MINING.EXPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD');","  INSERT INTO MODEL_EXPORT values (BLOB_MODEL);   -- serialized model BLOB saved in table MODEL_EXPORT","  commit;","  DBMS_LOB.FREETEMPORARY(BLOB_MODEL);","END"],"enabled":true,"result":{"startTime":1734652329670,"interpreter":"script.medium","endTime":1734652330144,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Confirm the model was exported by looking at the length of the BLOB","message":["%sql","","SELECT LENGTH(MY_MODEL) AS MODEL_LEN from MODEL_EXPOR"],"enabled":true,"result":{"startTime":1734652330560,"interpreter":"sql.medium","endTime":1734652332501,"results":[{"message":"MODEL_LEN\n2290\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Grant the second user access to the table","message":["%sql","","-- replace OMLUSER02 with the target OML user","","GRANT SELECT ON MODEL_EXPORT TO OMLUSER0"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Import the serialized model from the table in the target schema","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD'); -- drop the model if it exists","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","DECLARE","  BLOB_MODEL BLOB;","BEGIN","  SELECT MY_MODEL INTO BLOB_MODEL FROM MODEL_EXPORT;","  DBMS_DATA_MINING.IMPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD');","END;"],"enabled":true,"result":{"startTime":1734652332934,"interpreter":"script.medium","endTime":1734652333922,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Confirm the model was imported","message":["%sql","","SELECT * FROM ALL_MINING_MODELS WHERE MODEL_NAME='GLM_MOD'"],"enabled":true,"result":{"startTime":1734652334340,"interpreter":"sql.medium","endTime":1734652334786,"results":[{"message":"OWNER\tMODEL_NAME\tMINING_FUNCTION\tALGORITHM\tALGORITHM_TYPE\tCREATION_DATE\tBUILD_DURATION\tMODEL_SIZE\tPARTITIONED\tCOMMENTS\nOMLUSER\tGLM_MOD\tREGRESSION\tGENERALIZED_LINEAR_MODEL\tNATIVE\t2024-12-19 23:52:13\t\t0\tNO\t\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Model description","message":["%sql","","SELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE ","FROM   ALL_MINING_MODELS ","WHERE  MODEL_NAME='GLM_MOD'"],"enabled":true,"result":{"startTime":1734652335217,"interpreter":"sql.medium","endTime":1734652335662,"results":[{"message":"MODEL_NAME\tMINING_FUNCTION\tALGORITHM\tCREATION_DATE\nGLM_MOD\tREGRESSION\tGENERALIZED_LINEAR_MODEL\t2024-12-19 23:52:13\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Model settings","message":["%sql","","SELECT SETTING_NAME, SETTING_VALUE ","FROM   ALL_MINING_MODEL_SETTINGS ","WHERE  MODEL_NAME='GLM_MOD'"],"enabled":true,"result":{"startTime":1734652336081,"interpreter":"sql.medium","endTime":1734652336525,"results":[{"message":"SETTING_NAME\tSETTING_VALUE\nALGO_NAME\tALGO_GENERALIZED_LINEAR_MODEL\nPREP_AUTO\tON\nGLMS_FTR_GENERATION\tGLMS_FTR_GENERATION_DISABLE\nGLMS_CONF_LEVEL\t.95\nODMS_DETAILS\tODMS_ENABLE\nGLMS_FTR_SELECTION\tGLMS_FTR_SELECTION_DISABLE\nODMS_MISSING_VALUE_TREATMENT\tODMS_MISSING_VALUE_AUTO\nGLMS_DIAGNOSTICS_TABLE_NAME\tGLMR_DIAG\nODMS_SAMPLING\tODMS_SAMPLING_DISABLE\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Score the CARS data using the imported model","message":["%sql","","SELECT CID, ROUND(PREDICTION(GLM_MOD USING *), 1) AS PREDICTED_MPG, ","       MPG AS ACTUAL_MPG ","FROM   CARS ","ORDER BY CID;","FETCH FIRST 5 ROWS ONLY"],"enabled":true,"result":{"startTime":1734652336945,"interpreter":"sql.medium","endTime":1734652338102,"results":[{"message":"CID\tPREDICTED_MPG\tACTUAL_MPG\n1\t22.6\t21.0\n2\t22.1\t21.0\n3\t26.3\t22.8\n4\t21.2\t21.4\n5\t17.7\t18.7\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Granting select access to models","message":["%md","","An alternative to migrating models between schemas is to grant select privileges on the model for scoring. The following statement allows OMLUSER02 to score the CARS data on model *GLM_MOD*. ","","    GRANT SELECT ON MINING MODEL GLM_MOD TO OMLUSER02;"],"enabled":true,"result":{"startTime":1734652338553,"interpreter":"md.medium","endTime":1734652338958,"results":[{"message":"<p>An alternative to migrating models between schemas is to grant select privileges on the model for scoring. The following statement allows OMLUSER02 to score the CARS data on model <em>GLM_MOD<\/em>.<\/p>\n<pre><code>GRANT SELECT ON MINING MODEL GLM_MOD TO OMLUSER02;\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","---","## Scenario #2: Separate source and target databases ","---","","In this scenario, we use separate databases for the development and testing of the machine learning model and ultimately production. Here, data scientists build models in one environment, and when the machine learning model produces satisfactory results, it can be exported from the development database and imported into the production database."],"enabled":true,"result":{"startTime":1734652339390,"interpreter":"md.medium","endTime":1734652339808,"results":[{"message":"<p>In this scenario, we use separate databases for the development and testing of the machine learning model and ultimately production. Here, data scientists build models in one environment, and when the machine learning model produces satisfactory results, it can be exported from the development database and imported into the production database.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","### Prerequisites"],"enabled":true,"result":{"startTime":1734652340226,"interpreter":"md.medium","endTime":1734652340638,"results":[{"message":"<h3 id=\"prerequisites\">Prerequisites<\/h3>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create a procedure to write the model to a serialized BLOB ","message":["%md","","Define the `write_serialized_model` procedure to export a model as a serialized BLOB to a directory in the database environment."],"enabled":true,"result":{"startTime":1734652341068,"interpreter":"md.medium","endTime":1734652341475,"results":[{"message":"<p>Define the <code>write_serialized_model<\/code> procedure to export a model as a serialized BLOB to a directory in the database environment.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":" ","message":["%script","","CREATE OR REPLACE PROCEDURE write_serialized_model (v_blob blob, dirName varchar2, filName varchar2) IS","    v_output utl_file.file_type;","    v_amt binary_integer := 2000;","    v_raw raw(2000);","    v_pos binary_integer := 1;","    v_len binary_integer;","BEGIN","    v_output := utl_file.fopen(dirName, filName, 'wb', 32760);","    v_len := dbms_lob.getlength(v_blob);","WHILE (v_pos <= v_len) loop","  IF (v_len - v_pos + 1) < 2000 then","    v_amt := v_len - v_pos + 1;","  END IF;","  dbms_lob.read(v_blob,v_amt,v_pos,v_raw);","  utl_file.put_raw(v_output, v_raw);","  utl_file.fflush(v_output);","  v_pos := v_pos + v_amt;"," END LOOP;"," utl_file.fclose(v_output);","END;"],"enabled":true,"result":{"startTime":1734652341902,"interpreter":"script.medium","endTime":1734652342403,"results":[{"message":"\nProcedure WRITE_SERIALIZED_MODEL compiled\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"DBMS_CLOUD package","message":["%md","","To interact with other cloud services, the Oracle Autonomous Database Cloud service provides the `DBMS_CLOUD` package. This enables the database engine to transfer and store objects between Oracle Autonomous Database and Oracle Cloud Object Storage. Object Storage holds data as objects within *buckets*, i.e., containers, that are identified with a URI having the following format:","","    https://objectstorage.region.oraclecloud.com/v1/tenantname/bucketname/objectname","    ","A public bucket enables you to freely share data stored in Object Storage. Anyone with knowledge of the public bucket name and associated namespace can anonymously read data, list objects, or get the object metadata. Buckets are private by default, and the bucket properties must be explicitly set to make a bucket public. Note that anonymous operations to save data to a public bucket is not supported.","","Access to the objects stored within private buckets is protected. To access an object in the Oracle ADB Cloud service, one must to provide identification information stored into a credential object. Refer to the Autonomous Database User's Guide for more information on the `DBMS_CLOUD` procedure.","","<a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/load-data-cloud.html#GUID-07900054-CB65-490A-AF3C-39EF45505802\" target=\"_blank\">Oracle Autonomous Database User's Guide<\/a>"],"enabled":true,"result":{"startTime":1734652342832,"interpreter":"md.medium","endTime":1734652343240,"results":[{"message":"<p>To interact with other cloud services, the Oracle Autonomous Database Cloud service provides the <code>DBMS_CLOUD<\/code> package. This enables the database engine to transfer and store objects between Oracle Autonomous Database and Oracle Cloud Object Storage. Object Storage holds data as objects within <em>buckets<\/em>, i.e., containers, that are identified with a URI having the following format:<\/p>\n<pre><code>https://objectstorage.region.oraclecloud.com/v1/tenantname/bucketname/objectname\n<\/code><\/pre>\n<p>A public bucket enables you to freely share data stored in Object Storage. Anyone with knowledge of the public bucket name and associated namespace can anonymously read data, list objects, or get the object metadata. Buckets are private by default, and the bucket properties must be explicitly set to make a bucket public. Note that anonymous operations to save data to a public bucket is not supported.<\/p>\n<p>Access to the objects stored within private buckets is protected. To access an object in the Oracle ADB Cloud service, one must to provide identification information stored into a credential object. Refer to the Autonomous Database User's Guide for more information on the <code>DBMS_CLOUD<\/code> procedure.<\/p>\n<p><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/load-data-cloud.html#GUID-07900054-CB65-490A-AF3C-39EF45505802\" target=\"_blank\">Oracle Autonomous Database User's Guide<\/a><\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create cloud credential","message":["%md","","To start, create a cloud user credential in ADB to connect to Cloud Storage using the `DBMS_CLOUD.CREATE_CREDENTIAL` procedure. The `CREATE_CREDENTIAL` procedure creates a credential into the current schema. The username and password correspond to the OML user account credentials. In this example, we create a cloud credential for user *OMLUSER* with password *Welcome12345*."],"enabled":true,"result":{"startTime":1734652343663,"interpreter":"md.medium","endTime":1734652344069,"results":[{"message":"<p>To start, create a cloud user credential in ADB to connect to Cloud Storage using the <code>DBMS_CLOUD.CREATE_CREDENTIAL<\/code> procedure. The <code>CREATE_CREDENTIAL<\/code> procedure creates a credential into the current schema. The username and password correspond to the OML user account credentials. In this example, we create a cloud credential for user <em>OMLUSER<\/em> with password <em>Welcome12345<\/em>.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%script","","-- IMPORTANT: replace username and password with your OML username and password ","","BEGIN","  DBMS_CLOUD.CREATE_CREDENTIAL(","    credential_name => 'MY_CLOUD_CRED',","    username => 'OMLUSER',","    password => 'Welcome12345'","  );","END;"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Oracle Cloud pre-authenticated requests (PARs)","message":["%md","","","PARs are used to share and upload Object Storage data. ","","When you create a PAR, a unique PAR URL is generated. Users with this URL can access the resources identified in the PAR using the **DBMS_CLOUD** procedures ","and the standard HTTP tools `cURL` and `wget`.  ","","You can define PARs on both buckets and objects. Bucket PARs can be used to write data into a specific bucket, however object PARs can be used both to read and write ","data. When creating a PAR you need to specify a PAR name, the resource object or bucket, the authorized operations (read, write, read/write) and the PAR expiration date. ","","For example, here is a PAR defined on object *iris.csv* stored in the bucket *MY_DEMO*:","","    https://objectstorage.us-phoenix-1.oraclecloud.com/p/1evW9h43H9IjwkrlEJgCwaUZkj87buyNDWTc/n/samplenamespace/b/MY_DEMO/o/iris.csv","","Refer to the Oracle Cloud Infrastructure documentation for more information on PARs.","<a href=\"https://docs.cloud.oracle.com/en-us/iaas/Content/Object/Tasks/usingpreauthenticatedrequests.htm\" target=\"_blank\">Using Pre-Authenticated Requests<\/a>"],"enabled":true,"result":{"startTime":1734652344488,"interpreter":"md.medium","endTime":1734652344909,"results":[{"message":"<p>PARs are used to share and upload Object Storage data.<\/p>\n<p>When you create a PAR, a unique PAR URL is generated. Users with this URL can access the resources identified in the PAR using the <strong>DBMS_CLOUD<\/strong> procedures\nand the standard HTTP tools <code>cURL<\/code> and <code>wget<\/code>.<\/p>\n<p>You can define PARs on both buckets and objects. Bucket PARs can be used to write data into a specific bucket, however object PARs can be used both to read and write\ndata. When creating a PAR you need to specify a PAR name, the resource object or bucket, the authorized operations (read, write, read/write) and the PAR expiration date.<\/p>\n<p>For example, here is a PAR defined on object <em>iris.csv<\/em> stored in the bucket <em>MY_DEMO<\/em>:<\/p>\n<pre><code>https://objectstorage.us-phoenix-1.oraclecloud.com/p/1evW9h43H9IjwkrlEJgCwaUZkj87buyNDWTc/n/samplenamespace/b/MY_DEMO/o/iris.csv\n<\/code><\/pre>\n<p>Refer to the Oracle Cloud Infrastructure documentation for more information on PARs.\n<a href=\"https://docs.cloud.oracle.com/en-us/iaas/Content/Object/Tasks/usingpreauthenticatedrequests.htm\" target=\"_blank\">Using Pre-Authenticated Requests<\/a><\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Directory for persisting objects","message":["%md","","When exporting models from Autonomous Database, we persist a serialized model to the data pump directory prior to sending it to Object Storage. Autonomous Database includes a predefined data pump directory in the database where you can place files. You can also create directories, drop directories, and attach network file systems. Refer to the Autonomous Database User's Guide for more information:","","###### <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-database/adbsa/create-manage-directory.html#GUID-5EC418F4-2084-4884-8D1E-BACA56F143F9\" target=\"_blank\">Creating and Managing Directories on Autonomous Database<\/a>"],"enabled":true,"result":{"startTime":1734652345336,"interpreter":"md.medium","endTime":1734652345741,"results":[{"message":"<p>When exporting models from Autonomous Database, we persist a serialized model to the data pump directory prior to sending it to Object Storage. Autonomous Database includes a predefined data pump directory in the database where you can place files. You can also create directories, drop directories, and attach network file systems. Refer to the Autonomous Database User's Guide for more information:<\/p>\n<h6 id=\"creating-and-managing-directories-on-autonomous-database\"><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-database/adbsa/create-manage-directory.html#GUID-5EC418F4-2084-4884-8D1E-BACA56F143F9\" target=\"_blank\">Creating and Managing Directories on Autonomous Database<\/a><\/h6>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Required grants","message":["%md","","Apply the following grants as ADMIN to the OML user that will be importing and exporting models:","","    SQL> GRANT EXECUTE ON DBMS_CLOUD TO OMLUSER;                   -- grant access to run the procedures in the `DBMS_CLOUD` package","    SQL> GRANT READ, WRITE ON DIRECTORY DATA_PUMP_DIR TO OMLUSER;  -- grant read and write access to the data pump directory for saving objects"],"enabled":true,"result":{"startTime":1734652346159,"interpreter":"md.medium","endTime":1734652346567,"results":[{"message":"<p>Apply the following grants as ADMIN to the OML user that will be importing and exporting models:<\/p>\n<pre><code>SQL&gt; GRANT EXECUTE ON DBMS_CLOUD TO OMLUSER;                   -- grant access to run the procedures in the `DBMS_CLOUD` package\nSQL&gt; GRANT READ, WRITE ON DIRECTORY DATA_PUMP_DIR TO OMLUSER;  -- grant read and write access to the data pump directory for saving objects\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Export a serialized model from one Autonomous Database to another Autonomous Database","message":["%md","","1. Export the model from Autonomous Database to the data pump directory using `DBMS_DATA_MINING.EXPORT_SERMODEL`. Provide the name of the in-database model and define the name of the corresponding serialized model.","","2. Save the serialized model in Object Storage. Pass your cloud credential to the `DBMS_CLOUD.PUT_OBJECT` procedure, along with the model name, directory name, and the Oracle Cloud PAR as the `LOCATION_URI` parameter, along with the name of the serialized model. ","","In this example, the name of the in-database model is *GLM_MOD* and the name of the serialized model is *GLM_MOD.mod*."],"enabled":true,"result":{"startTime":1734652346989,"interpreter":"md.medium","endTime":1734652347399,"results":[{"message":"<ol>\n<li>\n<p>Export the model from Autonomous Database to the data pump directory using <code>DBMS_DATA_MINING.EXPORT_SERMODEL<\/code>. Provide the name of the in-database model and define the name of the corresponding serialized model.<\/p>\n<\/li>\n<li>\n<p>Save the serialized model in Object Storage. Pass your cloud credential to the <code>DBMS_CLOUD.PUT_OBJECT<\/code> procedure, along with the model name, directory name, and the Oracle Cloud PAR as the <code>LOCATION_URI<\/code> parameter, along with the name of the serialized model.<\/p>\n<\/li>\n<\/ol>\n<p>In this example, the name of the in-database model is <em>GLM_MOD<\/em> and the name of the serialized model is <em>GLM_MOD.mod<\/em>.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Drop, then build a model","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD');","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","DECLARE","  v_setlst DBMS_DATA_MINING.SETTING_LIST;","    ","BEGIN","  v_setlst('PREP_AUTO') := 'ON';","  v_setlst('ALGO_NAME') := 'ALGO_GENERALIZED_LINEAR_MODEL';","  v_setlst('GLMS_DIAGNOSTICS_TABLE_NAME') := 'GLMR_DIAG';","    ","  DBMS_DATA_MINING.CREATE_MODEL2(","    model_name          => 'GLM_MOD',","    mining_function     => 'REGRESSION',","    data_query          => 'SELECT * FROM CARS',","    set_list            =>  v_setlst,","    case_id_column_name => 'CID',","    target_column_name  => 'MPG');","END;"],"enabled":true,"result":{"startTime":1734652347823,"interpreter":"script.medium","endTime":1734652350873,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View model in the database","message":["%sql","","SELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE ","FROM   USER_MINING_MODELS ","WHERE  MODEL_NAME='GLM_MOD';"],"enabled":true,"result":{"startTime":1734652351297,"interpreter":"sql.medium","endTime":1734652351725,"results":[{"message":"MODEL_NAME\tMINING_FUNCTION\tALGORITHM\tCREATION_DATE\nGLM_MOD\tREGRESSION\tGENERALIZED_LINEAR_MODEL\t2024-12-19 23:52:28\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%script","","DECLARE","  MODNAME VARCHAR2(100) := 'GLM_MOD';","  SER_MODNAME VARCHAR2(100);","  LOCATION_URI VARCHAR2(200) := 'https://adwc4pm.objectstorage.us-ashburn-1.oci.customer-oci.com/p/eUs89dFd_m_5OoGJ1PLj50bS-glojzHXZAZ3csGg4Iw9kQwKHzkZ8jorPD0si_ls/n/adwc4pm/b/OML-Resources/o/'; ","  BLOB_MODEL BLOB;","","-----------------------------------------","-- Define a model name to store the model","-----------------------------------------"," ","BEGIN","  SELECT CONCAT(MODNAME,'.mod') INTO SER_MODNAME from dual;","  DBMS_OUTPUT.PUT_LINE('Serialized model will be exported with name: '||SER_MODNAME);","","-----------------------------------------------------------------------","-- Read the Serialized Model from Object Storage into a binary object","-----------------------------------------------------------------------","","  DBMS_LOB.CREATETEMPORARY(BLOB_MODEL, FALSE);","  DBMS_DATA_MINING.EXPORT_SERMODEL(BLOB_MODEL, MODNAME);   ","  ","----------------------------------------------------------------------","-- Convenience function to write a model to a BLOB","----------------------------------------------------------------------","","  write_serialized_model(BLOB_MODEL, 'DATA_PUMP_DIR', SER_MODNAME);  ","  DBMS_LOB.FREETEMPORARY(BLOB_MODEL);","","----------------------------------------------------------------------","-- Save serialized model in the data pump directory to Object Storage","----------------------------------------------------------------------","  ","  DBMS_CLOUD.PUT_OBJECT(                                            ","    credential_name => 'MY_CLOUD_CRED',","    object_uri => LOCATION_URI||SER_MODNAME,","    directory_name => 'DATA_PUMP_DIR',","\tfile_name => SER_MODNAME);\t","\t     ","    SELECT CONCAT(MODNAME,'.mod') INTO SER_MODNAME from dual;","    DBMS_OUTPUT.PUT_LINE('Serialized model saved in Object Storage with the name: '||SER_MODNAME);","END;"],"enabled":true,"result":{"startTime":1734652352148,"interpreter":"script.medium","endTime":1734652353003,"results":[{"message":"Serialized model will be exported with name: GLM_MOD.mod\nSerialized model saved in Object Storage with the name: GLM_MOD.mod\n\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"A note about OML Services","message":["%md","","At this point, the serialized model has been saved to Object Storage and can be imported into the target database. It can also be deployed to OML Services for scoring. For more information on deploying OML models to OML Services, see:","","<a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/use-case-oml.html\" target=\"_blank\">Deploy Oracle Machine Learning Models to OML Services<\/a>"],"enabled":true,"result":{"startTime":1734652353422,"interpreter":"md.medium","endTime":1734652353832,"results":[{"message":"<p>At this point, the serialized model has been saved to Object Storage and can be imported into the target database. It can also be deployed to OML Services for scoring. For more information on deploying OML models to OML Services, see:<\/p>\n<p><a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/omlss/omlss/use-case-oml.html\" target=\"_blank\">Deploy Oracle Machine Learning Models to OML Services<\/a><\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Import the serialized model","message":["%md","---","### Import the serialized model to the target Autonomous Database","---","","Import the model using the `DBMS_DATA_MINING.IMPORT_SERMODEL` procedure. Provide the name of the serialized model and the Oracle Cloud PAR corresponding to the exported serialized model."],"enabled":true,"result":{"startTime":1734652354268,"interpreter":"md.medium","endTime":1734652354679,"results":[{"message":"<p>Import the model using the <code>DBMS_DATA_MINING.IMPORT_SERMODEL<\/code> procedure. Provide the name of the serialized model and the Oracle Cloud PAR corresponding to the exported serialized model.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%script","","DECLARE","    SER_MODNAME VARCHAR2(100) := 'GLM_MOD.mod';","    MODNAME VARCHAR2(500);","    LOCATION_URI VARCHAR2(200) := 'https://adwc4pm.objectstorage.us-ashburn-1.oci.customer-oci.com/p/eUs89dFd_m_5OoGJ1PLj50bS-glojzHXZAZ3csGg4Iw9kQwKHzkZ8jorPD0si_ls/n/adwc4pm/b/OML-Resources/o/';","    BLOB_MODEL BLOB;","","BEGIN","    DBMS_OUTPUT.PUT_LINE('Serialized model name in Object Storage is: '||SER_MODNAME);","  ","--------------------------------------------------","-- Define a model name to save the imported model","--------------------------------------------------","","    SELECT UPPER(REGEXP_SUBSTR(SER_MODNAME, '[^.]+')) INTO MODNAME from dual;","    DBMS_OUTPUT.PUT_LINE('Model will be saved with name: '||MODNAME);","","------------------------------------------------------------------------","-- Read the serialized model from Object Storage into a binary variable","------------------------------------------------------------------------","","    BEGIN DBMS_DATA_MINING.DROP_MODEL(model_name => MODNAME);","    EXCEPTION WHEN OTHERS THEN NULL; END;","","    BLOB_MODEL := DBMS_CLOUD.GET_OBJECT(                            ","                      credential_name => 'MY_CLOUD_CRED',","                      object_uri => LOCATION_URI||SER_MODNAME);","-----------------------------------------------","-- Import the serialized model to the database","-----------------------------------------------                    ","  ","    DBMS_DATA_MINING.IMPORT_SERMODEL(BLOB_MODEL, MODNAME);","    DBMS_OUTPUT.PUT_LINE('New model successfully imported with name: '||MODNAME);","","END;"],"enabled":true,"result":{"startTime":1734652355096,"interpreter":"script.medium","endTime":1734652356171,"results":[{"message":"Serialized model name in Object Storage is: GLM_MOD.mod\nModel will be saved with name: GLM_MOD\nNew model successfully imported with name: GLM_MOD\n\n\nPL/SQL procedure successfully completed.\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Model description","message":["%sql","","SELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE FROM ALL_MINING_MODELS WHERE MODEL_NAME='GLM_MOD'"],"enabled":true,"result":{"startTime":1734652356593,"interpreter":"sql.medium","endTime":1734652357029,"results":[{"message":"MODEL_NAME\tMINING_FUNCTION\tALGORITHM\tCREATION_DATE\nGLM_MOD\tREGRESSION\tGENERALIZED_LINEAR_MODEL\t2024-12-19 23:52:36\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Model settings","message":["%sql","","SELECT SETTING_NAME, SETTING_VALUE ","FROM   ALL_MINING_MODEL_SETTINGS ","WHERE  MODEL_NAME='GLM_MOD'"],"enabled":true,"result":{"startTime":1734652357454,"interpreter":"sql.medium","endTime":1734652357893,"results":[{"message":"SETTING_NAME\tSETTING_VALUE\nALGO_NAME\tALGO_GENERALIZED_LINEAR_MODEL\nPREP_AUTO\tON\nGLMS_FTR_GENERATION\tGLMS_FTR_GENERATION_DISABLE\nGLMS_CONF_LEVEL\t.95\nODMS_DETAILS\tODMS_ENABLE\nGLMS_FTR_SELECTION\tGLMS_FTR_SELECTION_DISABLE\nODMS_MISSING_VALUE_TREATMENT\tODMS_MISSING_VALUE_AUTO\nGLMS_DIAGNOSTICS_TABLE_NAME\tGLMR_DIAG\nODMS_SAMPLING\tODMS_SAMPLING_DISABLE\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Score using the CARS table","message":["%sql","","SELECT CID, ROUND(PREDICTION(GLM_MOD USING *), 1) AS PREDICTED_MPG, ","       MPG AS ACTUAL_MPG ","FROM   CARS ORDER BY CID;","FETCH FIRST 5 ROWS ONLY"],"enabled":true,"result":{"startTime":1734652358319,"interpreter":"sql.medium","endTime":1734652358784,"results":[{"message":"CID\tPREDICTED_MPG\tACTUAL_MPG\n1\t22.6\t21.0\n2\t22.1\t21.0\n3\t26.3\t22.8\n4\t21.2\t21.4\n5\t17.7\t18.7\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Export a serialized model from an Autonomous Database and import into an Oracle Database","message":["%md","","1. Export a model to serialized format from Autonomous Database to Object Storage. For instructions, refer to the section titled \"Export a serialized model from one Autonomous Database to another Autonomous Database\" above. ","","2. Import the serialized model saved in Object Storage to Oracle Database:","   a. Download the serialized model from Object Storage to the target database server using the serialized model's Oracle Cloud PAR.","   b. In SQL, define the directory from which the serialized model will be imported.","   c. Import the model using `DBMS_DATA_MINING.IMPORT_SERMODEL`.","","In this example, the name of the in-database model is *GLM_MOD* and the name of the serialized model is *GLM_MOD*.","","The following commands will run in a SQL prompt on the database server or in a SQL Developer instance connected to the database server as the OML user:"],"enabled":true,"result":{"startTime":1734652359209,"interpreter":"md.medium","endTime":1734652359615,"results":[{"message":"<ol>\n<li>\n<p>Export a model to serialized format from Autonomous Database to Object Storage. For instructions, refer to the section titled &quot;Export a serialized model from one Autonomous Database to another Autonomous Database&quot; above.<\/p>\n<\/li>\n<li>\n<p>Import the serialized model saved in Object Storage to Oracle Database:\na. Download the serialized model from Object Storage to the target database server using the serialized model's Oracle Cloud PAR.\nb. In SQL, define the directory from which the serialized model will be imported.\nc. Import the model using <code>DBMS_DATA_MINING.IMPORT_SERMODEL<\/code>.<\/p>\n<\/li>\n<\/ol>\n<p>In this example, the name of the in-database model is <em>GLM_MOD<\/em> and the name of the serialized model is <em>GLM_MOD<\/em>.<\/p>\n<p>The following commands will run in a SQL prompt on the database server or in a SQL Developer instance connected to the database server as the OML user:<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Download the serialized model","message":["%md","","    $ wget https://adwc4pm.objectstorage.us-ashburn-1.oci.customer-oci.com/p/w7YxZS6CVkjScObhRTbPzttGgdJnaD5A8_S_9uHgXc3j2YOx5OZpuCqBfMjSXPoU/n/adwc4pm/b/OML-Resources/o/GLM_MOD.mod"],"enabled":true,"result":{"startTime":1734652360046,"interpreter":"md.medium","endTime":1734652360455,"results":[{"message":"<p>$ wget <a href=\"https://adwc4pm.objectstorage.us-ashburn-1.oci.customer-oci.com/p/w7YxZS6CVkjScObhRTbPzttGgdJnaD5A8_S_9uHgXc3j2YOx5OZpuCqBfMjSXPoU/n/adwc4pm/b/OML-Resources/o/GLM_MOD.mod\">https://adwc4pm.objectstorage.us-ashburn-1.oci.customer-oci.com/p/w7YxZS6CVkjScObhRTbPzttGgdJnaD5A8_S_9uHgXc3j2YOx5OZpuCqBfMjSXPoU/n/adwc4pm/b/OML-Resources/o/GLM_MOD.mod<\/a><\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Import the serialized model to the target database","message":["%md","    ","    ----------------------------","    -- Drop table if it exists","    ----------------------------","    BEGIN EXECUTE IMMEDIATE 'DROP TABLE MODEL_IMPORT';         ","    EXCEPTION WHEN OTHERS THEN NULL; END;","    /","    ","    ----------------------------","    -- Drop model if it exists","    ----------------------------","    BEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD');            ","    EXCEPTION WHEN OTHERS THEN NULL; END;","    /","    ","    ----------------------------------------------------","    -- Define directory where serialized model is saved","    ----------------------------------------------------","    CREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle';    ","   ","    -----------------------------------------------","    -- Create table to temporarily store the model","    -----------------------------------------------","    CREATE TABLE MODEL_IMPORT(MY_MODEL BLOB);  ","    ","     ---------------------------","     -- import serialized model","     --------------------------","    DECLARE","      BLOB_MODEL BLOB;","    BEGIN","      INSERT INTO MODEL_IMPORT values (BFILENAME('MYDIR','GLM_MOD.mod'));","      commit;","      SELECT MY_MODEL INTO BLOB_MODEL FROM MODEL_IMPORT;","      DBMS_DATA_MINING.IMPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD'); ","    END;","    /","","    Test the model:","    -----------------------------","    -- Verify model was imported","     ----------------------------","    SELECT * FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';    ","    -----------------------------","    -- Model description","     ----------------------------","    SELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';  ","    -----------------------------","    -- Model settings","     ----------------------------","    SELECT SETTING_NAME, SETTING_VALUE FROM ALL_MINING_MODEL_SETTINGS WHERE MODEL_NAME='GLM_MOD'; ","    -----------------------------","    -- Perform scoring","     ----------------------------","    SELECT CID, ROUND(PREDICTION(GLM_MOD USING *), 1)  ","    AS PREDICTED_MPG, MPG AS ACTUAL_MPG FROM CARS ORDER BY CID;"],"enabled":true,"result":{"startTime":1734652360884,"interpreter":"md.medium","endTime":1734652361313,"results":[{"message":"<hr />\n<pre><code>-- Drop table if it exists\n----------------------------\nBEGIN EXECUTE IMMEDIATE 'DROP TABLE MODEL_IMPORT';         \nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n----------------------------\n-- Drop model if it exists\n----------------------------\nBEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD');            \nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n----------------------------------------------------\n-- Define directory where serialized model is saved\n----------------------------------------------------\nCREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle';    \n\n-----------------------------------------------\n-- Create table to temporarily store the model\n-----------------------------------------------\nCREATE TABLE MODEL_IMPORT(MY_MODEL BLOB);  \n\n ---------------------------\n -- import serialized model\n --------------------------\nDECLARE\n  BLOB_MODEL BLOB;\nBEGIN\n  INSERT INTO MODEL_IMPORT values (BFILENAME('MYDIR','GLM_MOD.mod'));\n  commit;\n  SELECT MY_MODEL INTO BLOB_MODEL FROM MODEL_IMPORT;\n  DBMS_DATA_MINING.IMPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD'); \nEND;\n/\n\nTest the model:\n-----------------------------\n-- Verify model was imported\n ----------------------------\nSELECT * FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';    \n-----------------------------\n-- Model description\n ----------------------------\nSELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';  \n-----------------------------\n-- Model settings\n ----------------------------\nSELECT SETTING_NAME, SETTING_VALUE FROM ALL_MINING_MODEL_SETTINGS WHERE MODEL_NAME='GLM_MOD'; \n-----------------------------\n-- Perform scoring\n ----------------------------\nSELECT CID, ROUND(PREDICTION(GLM_MOD USING *), 1)  \nAS PREDICTED_MPG, MPG AS ACTUAL_MPG FROM CARS ORDER BY CID;\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":" Export a serialized model from an Oracle Database and import into an Autonomous Database","message":["%md","","1. Export the model to a serialized BLOB from Oracle Database to the database server Operating System.","   a. Define the `write_serialized_model` procedure under \"Prerequisites\" to export a model as a serialized BLOB to a directory.","   b. Define the directory where the serialized model will be exported in SQL.","   c. Export the model using `DBMS_DATA_MINING.EXPORT_SERMODEL`.","","2. To import the model into Autonomous Database:","   a. Upload the exported model to the Object Storage bucket associated with your Autonomous Database.","   b. Generate a PAR corresponding to the serialized model file in Object Storage.","   c. Import the model using `DBMS_DATA_MINING.IMPORT_SERMODEL` as shown in the section above.","","In this example, the name of the in-database model is *GLM_MOD* and the name of the serialized model is *GLM_MOD.mod*.","","The following commands will run in a SQL prompt on the database server or in a SQL Developer instance connected to the database server as the OML user:"],"enabled":true,"result":{"startTime":1734652361751,"interpreter":"md.medium","endTime":1734652362162,"results":[{"message":"<ol>\n<li>\n<p>Export the model to a serialized BLOB from Oracle Database to the database server Operating System.\na. Define the <code>write_serialized_model<\/code> procedure under &quot;Prerequisites&quot; to export a model as a serialized BLOB to a directory.\nb. Define the directory where the serialized model will be exported in SQL.\nc. Export the model using <code>DBMS_DATA_MINING.EXPORT_SERMODEL<\/code>.<\/p>\n<\/li>\n<li>\n<p>To import the model into Autonomous Database:\na. Upload the exported model to the Object Storage bucket associated with your Autonomous Database.\nb. Generate a PAR corresponding to the serialized model file in Object Storage.\nc. Import the model using <code>DBMS_DATA_MINING.IMPORT_SERMODEL<\/code> as shown in the section above.<\/p>\n<\/li>\n<\/ol>\n<p>In this example, the name of the in-database model is <em>GLM_MOD<\/em> and the name of the serialized model is <em>GLM_MOD.mod<\/em>.<\/p>\n<p>The following commands will run in a SQL prompt on the database server or in a SQL Developer instance connected to the database server as the OML user:<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Export model from Oracle Database","message":["%md","","    --------------------------------------------------------","    -- define directory where serialized model will be saved","    --------------------------------------------------------","    CREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle';           ","","    DECLARE","       -------------------------------------","       -- name of the model to be imported","       -------------------------------------","      MODNAME VARCHAR2(100) := 'GLM_MOD';                       ","      SER_MODNAME VARCHAR2(100);","      BLOB_MODEL BLOB;","    BEGIN","      DBMS_LOB.CREATETEMPORARY(BLOB_MODEL, FALSE);","      SELECT CONCAT(MODNAME,'.mod') INTO SER_MODNAME from dual;","       ---------------------------","       -- export serialized model","       ---------------------------","      DBMS_DATA_MINING.EXPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD');  ","       ---------------------------------------------------","       -- Convenience function to write a model to a BLOB","       ---------------------------------------------------","      write_serialized_model(BLOB_MODEL, 'MYDIR', SER_MODNAME);    ","      DBMS_LOB.FREETEMPORARY(BLOB_MODEL);","    END;","    /"],"enabled":true,"result":{"startTime":1734652362590,"interpreter":"md.medium","endTime":1734652363004,"results":[{"message":"<hr />\n<pre><code>-- define directory where serialized model will be saved\n--------------------------------------------------------\nCREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle';           \n\nDECLARE\n   -------------------------------------\n   -- name of the model to be imported\n   -------------------------------------\n  MODNAME VARCHAR2(100) := 'GLM_MOD';                       \n  SER_MODNAME VARCHAR2(100);\n  BLOB_MODEL BLOB;\nBEGIN\n  DBMS_LOB.CREATETEMPORARY(BLOB_MODEL, FALSE);\n  SELECT CONCAT(MODNAME,'.mod') INTO SER_MODNAME from dual;\n   ---------------------------\n   -- export serialized model\n   ---------------------------\n  DBMS_DATA_MINING.EXPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD');  \n   ---------------------------------------------------\n   -- Convenience function to write a model to a BLOB\n   ---------------------------------------------------\n  write_serialized_model(BLOB_MODEL, 'MYDIR', SER_MODNAME);    \n  DBMS_LOB.FREETEMPORARY(BLOB_MODEL);\nEND;\n/\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Export a serialized model from an Oracle Database and import to another Oracle Database","message":["%md","","","1. Export the model to a serialized BLOB from Oracle Database to the database server Operating System.","   a. Define the `write_serialized_model` procedure under \u201cPrerequisites\u201d to export a model as a serialized BLOB to a directory.","   b. Define the directory where the serialized model will be exported in SQL.","   c. Export the model using `DBMS_DATA_MINING.EXPORT_SERMODEL`.","","2. Import the serialized model to the target Oracle Database","   a. Download the serialized model to the target database server.","   b. In SQL, define the directory from which the serialized model will be imported.","   c. Import the model using `DBMS_DATA_MINING.IMPORT_SERMODEL`.","","In this example, the name of the in-database model is *GLM_MOD* and the name of the serialized model is *GLM_MOD.mod*.","","The following commands will run in a SQL prompt on the database server or in a SQL Developer instance connected to the database server as the OML user:"],"enabled":true,"result":{"startTime":1734652363427,"interpreter":"md.medium","endTime":1734652363837,"results":[{"message":"<ol>\n<li>\n<p>Export the model to a serialized BLOB from Oracle Database to the database server Operating System.\na. Define the <code>write_serialized_model<\/code> procedure under \u201cPrerequisites\u201d to export a model as a serialized BLOB to a directory.\nb. Define the directory where the serialized model will be exported in SQL.\nc. Export the model using <code>DBMS_DATA_MINING.EXPORT_SERMODEL<\/code>.<\/p>\n<\/li>\n<li>\n<p>Import the serialized model to the target Oracle Database\na. Download the serialized model to the target database server.\nb. In SQL, define the directory from which the serialized model will be imported.\nc. Import the model using <code>DBMS_DATA_MINING.IMPORT_SERMODEL<\/code>.<\/p>\n<\/li>\n<\/ol>\n<p>In this example, the name of the in-database model is <em>GLM_MOD<\/em> and the name of the serialized model is <em>GLM_MOD.mod<\/em>.<\/p>\n<p>The following commands will run in a SQL prompt on the database server or in a SQL Developer instance connected to the database server as the OML user:<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Export the model to a file on the database server","message":["%md","","    ----------------------------------------------------","    -- Define directory where serialized model is saved","    ----------------------------------------------------","    CREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle';       ","","    DECLARE","      MODNAME VARCHAR2(100) := 'GLM_MOD';","      SER_MODNAME VARCHAR2(100);","      BLOB_MODEL BLOB;","    BEGIN","      DBMS_LOB.CREATETEMPORARY(BLOB_MODEL, FALSE);","      SELECT CONCAT(MODNAME,'.mod') INTO SER_MODNAME from dual;","      ---------------------------","      -- export serialized model ","      ---------------------------","      DBMS_DATA_MINING.EXPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD'); ","      ---------------------------------------------------","      -- convenience function to write a model to a BLOB","      ---------------------------------------------------","      write_serialized_model(BLOB_MODEL, 'MYDIR', SER_MODNAME);   ","      DBMS_LOB.FREETEMPORARY(BLOB_MODEL);","    END;","    /"],"enabled":true,"result":{"startTime":1734652364279,"interpreter":"md.medium","endTime":1734652364692,"results":[{"message":"<hr />\n<pre><code>-- Define directory where serialized model is saved\n----------------------------------------------------\nCREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle';       \n\nDECLARE\n  MODNAME VARCHAR2(100) := 'GLM_MOD';\n  SER_MODNAME VARCHAR2(100);\n  BLOB_MODEL BLOB;\nBEGIN\n  DBMS_LOB.CREATETEMPORARY(BLOB_MODEL, FALSE);\n  SELECT CONCAT(MODNAME,'.mod') INTO SER_MODNAME from dual;\n  ---------------------------\n  -- export serialized model \n  ---------------------------\n  DBMS_DATA_MINING.EXPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD'); \n  ---------------------------------------------------\n  -- convenience function to write a model to a BLOB\n  ---------------------------------------------------\n  write_serialized_model(BLOB_MODEL, 'MYDIR', SER_MODNAME);   \n  DBMS_LOB.FREETEMPORARY(BLOB_MODEL);\nEND;\n/\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Copy the serialized model to the target database server and import the model","message":["%md","","    ---------------------------","    -- Drop table if it exists","    ---------------------------","    BEGIN EXECUTE IMMEDIATE 'DROP TABLE MODEL_IMPORT';           ","    EXCEPTION WHEN OTHERS THEN NULL; END;","    /","    ","    ---------------------------","    -- Drop model if it exists","    ---------------------------","    BEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD');             ","    EXCEPTION WHEN OTHERS THEN NULL; END;","    /","    ","    ----------------------------------------------------","    -- Define directory where serialized model is saved","    ----------------------------------------------------","    CREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle'; ","    ","    -----------------------------------------------","    -- Create table to temporarily store the model","    -----------------------------------------------","    CREATE TABLE MODEL_IMPORT(MY_MODEL BLOB)                     ","","    DECLARE","      BLOB_MODEL BLOB;","    BEGIN","      INSERT INTO MODEL_IMPORT values (BFILENAME('MYDIR','GLM_MOD.mod'));","      commit;","      SELECT MY_MODEL INTO BLOB_MODEL FROM MODEL_IMPORT;","      --------------------------","      -- Import serialized model","      --------------------------","      DBMS_DATA_MINING.IMPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD');  ","    END;","    /","","    Test the model:","    -----------------------------","    -- Verify model was imported","     ----------------------------","    SELECT * FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';    ","    -----------------------------","    -- Model description","     ----------------------------","    SELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';  ","    -----------------------------","    -- Model settings","     ----------------------------","    SELECT SETTING_NAME, SETTING_VALUE FROM ALL_MINING_MODEL_SETTINGS WHERE MODEL_NAME='GLM_MOD'; ","    -----------------------------","    -- Perform scoring","     ----------------------------","    SELECT CID, ROUND(PREDICTION(GLM_MOD USING *), 1)  ","    AS PREDICTED_MPG, MPG AS ACTUAL_MPG FROM CARS ORDER BY CID;"],"enabled":true,"result":{"startTime":1734652365119,"interpreter":"md.medium","endTime":1734652365562,"results":[{"message":"<hr />\n<pre><code>-- Drop table if it exists\n---------------------------\nBEGIN EXECUTE IMMEDIATE 'DROP TABLE MODEL_IMPORT';           \nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n---------------------------\n-- Drop model if it exists\n---------------------------\nBEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD');             \nEXCEPTION WHEN OTHERS THEN NULL; END;\n/\n\n----------------------------------------------------\n-- Define directory where serialized model is saved\n----------------------------------------------------\nCREATE OR REPLACE DIRECTORY MYDIR AS '/home/oracle'; \n\n-----------------------------------------------\n-- Create table to temporarily store the model\n-----------------------------------------------\nCREATE TABLE MODEL_IMPORT(MY_MODEL BLOB)                     \n\nDECLARE\n  BLOB_MODEL BLOB;\nBEGIN\n  INSERT INTO MODEL_IMPORT values (BFILENAME('MYDIR','GLM_MOD.mod'));\n  commit;\n  SELECT MY_MODEL INTO BLOB_MODEL FROM MODEL_IMPORT;\n  --------------------------\n  -- Import serialized model\n  --------------------------\n  DBMS_DATA_MINING.IMPORT_SERMODEL(BLOB_MODEL, 'GLM_MOD');  \nEND;\n/\n\nTest the model:\n-----------------------------\n-- Verify model was imported\n ----------------------------\nSELECT * FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';    \n-----------------------------\n-- Model description\n ----------------------------\nSELECT MODEL_NAME, MINING_FUNCTION, ALGORITHM, CREATION_DATE FROM USER_MINING_MODELS WHERE MODEL_NAME='GLM_MOD';  \n-----------------------------\n-- Model settings\n ----------------------------\nSELECT SETTING_NAME, SETTING_VALUE FROM ALL_MINING_MODEL_SETTINGS WHERE MODEL_NAME='GLM_MOD'; \n-----------------------------\n-- Perform scoring\n ----------------------------\nSELECT CID, ROUND(PREDICTION(GLM_MOD USING *), 1)  \nAS PREDICTED_MPG, MPG AS ACTUAL_MPG FROM CARS ORDER BY CID;\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Clean up"],"enabled":true,"result":{"startTime":1734652365990,"interpreter":"md.medium","endTime":1734652366392,"results":[{"message":"<h2 id=\"clean-up\">Clean up<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Drop Cloud credential (optional)","message":["%script","","BEGIN","  DBMS_CLOUD.DROP_CREDENTIAL(","    credential_name => 'MY_CLOUD_CRED');","END;","/"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Drop tables (optional)","message":["%script","","BEGIN EXECUTE IMMEDIATE 'DROP TABLE CARS';          -- drop table CARS if it exists","EXCEPTION WHEN OTHERS THEN NULL; END;","/","BEGIN EXECUTE IMMEDIATE 'DROP TABLE MODEL_EXPORT';  -- drop table MODEL_EXPORT if it exists","EXCEPTION WHEN OTHERS THEN NULL; END;","/","BEGIN EXECUTE IMMEDIATE 'DROP TABLE MODEL_IMPORT';  -- drop table MODEL_IMPORT if it exists","EXCEPTION WHEN OTHERS THEN NULL; END;","/"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":"Drop model(optional)","message":["%script","","BEGIN DBMS_DATA_MINING.DROP_MODEL('GLM_MOD'); -- drop the model if it exists","EXCEPTION WHEN OTHERS THEN NULL; END;"],"enabled":false,"result":null,"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":null,"row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":null},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"," "," ## End Script"],"enabled":true,"result":{"startTime":1734652366816,"interpreter":"md.medium","endTime":1734652367216,"results":[{"message":"<h2 id=\"end-script\">End Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1734652367648,"interpreter":"md.medium","endTime":1734652368057,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]