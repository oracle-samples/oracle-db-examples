[{"layout":null,"template":null,"templateConfig":null,"name":"OML4SQL Anomaly Detection MSET","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1737998275003,"interpreter":"md.low","endTime":1737998275541,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","# Oracle Machine Learning MSET-SPRT Algorithm for Anomaly Detection","","The Multivariate State Estimation Technique-Sequential Probability Ratio Test (MSET-SPRT) algorithm is a nonlinear, nonparametric anomaly detection technique for monitoring critical processes.","","The DBMS_DATA_MINING.ALGO_MSET_SPRT algorithm detects subtle anomalies while producing minimal false alarms. It calibrates expected behavior from available, historical data of the normal operational sequence of monitored signals. It incorporates the learned behavior of the system into a persistent MSET-SPRT model. You can apply the model to new records to detect anomalous behavior.","","MSET is a nonlinear, nonparametric anomaly detection machine learning technique that calibrates the expected behavior of a system based on historical data from the normal operational sequence of monitored signals. It incorporates the learned behavior of a system into a persistent model that represents the normal estimated behavior. You can deploy the model to evaluate a subsequent stream of live signal vectors using OML4SQL scoring functions. To form a hypothesis as to the overall health of the system, these functions calculate the difference between the estimated and the actual signal values (residuals) and use SPRT calculations to determine whether any of the signals have become degraded.","","To build a good model, MSET requires sufficient historical data that adequately captures all normal modes of behavior of the system. Incomplete data results in false alerts when the system enters a mode of operation that was poorly represented in the historical data. MSET assumes that the characteristics of the data being monitored do not change over time. Once deployed, MSET is a stationary model and does not evolve as it monitors a data stream.","","Both MSET and SPRT operate on continuous time-ordered sensor data. If the raw data stream needs to be pre-processed or sampled, you must do that before you pass the data to the MSET-SPRT model.","","The ALGO_MSET_SPRT algorithm is designated as a classification machine learning function. It generates a model in which each data row is labeled as either normal or anomalous. For anomalous predictions, the prediction details provide a list of the sensors that show the anomaly and a weight.","","When creating an MSET-SPRT model with the DBMS_DATA_MINING.CREATE_MODEL function, use the case_id argument to provide a unique row identifier for the time-ordered data that the algorithm requires. The build is then able to sort the training data and create windows for sampling and variance estimation. If you do not provide a case_id, then an exception occurs.","","MSET-SPRT supports only numeric data. An exception occurs if other column types are in the build data.","","When the number of sensors is very high, MSET-SPRT leverages random projections to improve the scalability and robustness of the algorithm. Random projections is a technique that reduces dimensionality while preserving pairwise distances. By randomly projecting the sensor data, the problem is solved in a distance-preserving, lower-dimension space. The MSET hypothesis testing approach is applied on the projected data where each random projection can be viewed as a Monte Carlo simulation of system health. The overall probability of an anomaly follows a binomial distribution with the number of projections as the number of trials and the number of alerting projections as the number of successes.","","","Copyright (c) 2025 Oracle Corporation                             ","###### [The Universal Permissive License (UPL), Version 1.0](https://oss.oracle.com/licenses/upl/)","---"],"enabled":true,"result":{"startTime":1737998276028,"interpreter":"md.low","endTime":1737998276544,"results":[{"message":"<h1 id=\"oracle-machine-learning-mset-sprt-algorithm-for-anomaly-detection\">Oracle Machine Learning MSET-SPRT Algorithm for Anomaly Detection<\/h1>\n<p>The Multivariate State Estimation Technique-Sequential Probability Ratio Test (MSET-SPRT) algorithm is a nonlinear, nonparametric anomaly detection technique for monitoring critical processes.<\/p>\n<p>The DBMS_DATA_MINING.ALGO_MSET_SPRT algorithm detects subtle anomalies while producing minimal false alarms. It calibrates expected behavior from available, historical data of the normal operational sequence of monitored signals. It incorporates the learned behavior of the system into a persistent MSET-SPRT model. You can apply the model to new records to detect anomalous behavior.<\/p>\n<p>MSET is a nonlinear, nonparametric anomaly detection machine learning technique that calibrates the expected behavior of a system based on historical data from the normal operational sequence of monitored signals. It incorporates the learned behavior of a system into a persistent model that represents the normal estimated behavior. You can deploy the model to evaluate a subsequent stream of live signal vectors using OML4SQL scoring functions. To form a hypothesis as to the overall health of the system, these functions calculate the difference between the estimated and the actual signal values (residuals) and use SPRT calculations to determine whether any of the signals have become degraded.<\/p>\n<p>To build a good model, MSET requires sufficient historical data that adequately captures all normal modes of behavior of the system. Incomplete data results in false alerts when the system enters a mode of operation that was poorly represented in the historical data. MSET assumes that the characteristics of the data being monitored do not change over time. Once deployed, MSET is a stationary model and does not evolve as it monitors a data stream.<\/p>\n<p>Both MSET and SPRT operate on continuous time-ordered sensor data. If the raw data stream needs to be pre-processed or sampled, you must do that before you pass the data to the MSET-SPRT model.<\/p>\n<p>The ALGO_MSET_SPRT algorithm is designated as a classification machine learning function. It generates a model in which each data row is labeled as either normal or anomalous. For anomalous predictions, the prediction details provide a list of the sensors that show the anomaly and a weight.<\/p>\n<p>When creating an MSET-SPRT model with the DBMS_DATA_MINING.CREATE_MODEL function, use the case_id argument to provide a unique row identifier for the time-ordered data that the algorithm requires. The build is then able to sort the training data and create windows for sampling and variance estimation. If you do not provide a case_id, then an exception occurs.<\/p>\n<p>MSET-SPRT supports only numeric data. An exception occurs if other column types are in the build data.<\/p>\n<p>When the number of sensors is very high, MSET-SPRT leverages random projections to improve the scalability and robustness of the algorithm. Random projections is a technique that reduces dimensionality while preserving pairwise distances. By randomly projecting the sensor data, the problem is solved in a distance-preserving, lower-dimension space. The MSET hypothesis testing approach is applied on the projected data where each random projection can be viewed as a Monte Carlo simulation of system health. The overall probability of an anomaly follows a binomial distribution with the number of projections as the number of trials and the number of alerting projections as the number of successes.<\/p>\n<p>Copyright (c) 2025 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information ...","message":["%md","","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://www.oracle.com/goto/ml-classification\" target=\"_blank\">OML Classification<\/a>","* <a href=\"https://www.oracle.com/goto/ml-mset-sprt\" target=\"_blank\">OML MSET-SPRT<\/a>"],"enabled":true,"result":{"startTime":1737998277034,"interpreter":"md.low","endTime":1737998277499,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a><\/li>\n<li><a href=\"https://www.oracle.com/goto/ml-classification\" target=\"_blank\">OML Classification<\/a><\/li>\n<li><a href=\"https://www.oracle.com/goto/ml-mset-sprt\" target=\"_blank\">OML MSET-SPRT<\/a><\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","##  MSET-SPRT algorithm for multi-variate time-series anomaly detection","","#### SAMPLE PROBLEM","Given the two-variate time series data, the daily sold quantity and amount from January 1, 1998 to December 31, 1999, predict the anomalies of sold data from January 1, 2000 to December 31 2001.","","#### DATA SETUP","The data for this sample is from SH Schema, specifically, subtables of sh.sales.","","Two views are created based on sh.sales:","--  mset_build_sh_data (build data)","--  mset_test_sh_data  (test data)","","---"],"enabled":true,"result":{"startTime":1737998319855,"interpreter":"md.low","endTime":1737998320404,"results":[{"message":"<h2 id=\"mset-sprt-algorithm-for-multi-variate-time-series-anomaly-detection\">MSET-SPRT algorithm for multi-variate time-series anomaly detection<\/h2>\n<h4 id=\"sample-problem\">SAMPLE PROBLEM<\/h4>\n<p>Given the two-variate time series data, the daily sold quantity and amount from January 1, 1998 to December 31, 1999, predict the anomalies of sold data from January 1, 2000 to December 31 2001.<\/p>\n<h4 id=\"data-setup\">DATA SETUP<\/h4>\n<p>The data for this sample is from SH Schema, specifically, subtables of sh.sales.<\/p>\n<p>Two views are created based on sh.sales:\n--  mset_build_sh_data (build data)\n--  mset_test_sh_data  (test data)<\/p>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Initial Cleanup","message":["%script","","-- Cleanup old settings table","BEGIN EXECUTE IMMEDIATE 'DROP TABLE mset_sh_settings';","EXCEPTION WHEN OTHERS THEN NULL; END;","/","","-- Cleanup old model with the same name","BEGIN DBMS_DATA_MINING.DROP_MODEL('MSET_SH_MODEL');","EXCEPTION WHEN OTHERS THEN NULL; END;","/"],"enabled":true,"result":{"startTime":1737998278902,"interpreter":"script.low","endTime":1737998281294,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create TRAIN data View (mset_build_sh_data)","message":["%sql","","-- Create training multivariate time series data from year 1998 and 1999","CREATE OR replace VIEW mset_build_sh_data ","AS SELECT time_id, sum(quantity_sold) quantity, ","  sum(amount_sold) amount from (SELECT * FROM sh.sales WHERE ","  time_id <= '30-DEC-99') GROUP BY time_id ORDER BY time_id;","  "],"enabled":true,"result":{"startTime":1737998281760,"interpreter":"sql.low","endTime":1737998282295,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create TEST data View (mset_test_sh_data)","message":["%sql","","-- Create testing multivariate time series data from year 2000-2001 ","CREATE OR replace VIEW mset_test_sh_data ","  AS SELECT time_id, sum(quantity_sold) quantity, sum(amount_sold) ","    amount FROM (SELECT * FROM sh.sales WHERE time_id > '30-DEC-99') ","    GROUP BY time_id ORDER BY time_id;     ","    "],"enabled":true,"result":{"startTime":1737998282771,"interpreter":"sql.low","endTime":1737998283273,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","### Visualize the data","---"],"enabled":true,"result":{"startTime":1737998283756,"interpreter":"md.low","endTime":1737998284207,"results":[{"message":"<h3 id=\"visualize-the-data\">Visualize the data<\/h3>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"TRAIN AMOUNT data from 1998-1999","message":["%sql","","select QUANTITY, TIME_ID from mset_build_sh_data","fetch first 10 rows only"],"enabled":true,"result":{"startTime":1737998284677,"interpreter":"sql.low","endTime":1737998285243,"results":[{"message":"QUANTITY\tTIME_ID\n327\t1998-01-01 00:00:00\n313\t1998-01-02 00:00:00\n69\t1998-01-03 00:00:00\n566\t1998-01-04 00:00:00\n259\t1998-01-05 00:00:00\n132\t1998-01-06 00:00:00\n634\t1998-01-07 00:00:00\n317\t1998-01-08 00:00:00\n447\t1998-01-09 00:00:00\n564\t1998-01-10 00:00:00\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"TRAIN AMOUNT data from 1998-1999","message":["%sql","","select AMOUNT, TIME_ID from mset_build_sh_data","fetch first 10 rows only"],"enabled":true,"result":{"startTime":1737998285703,"interpreter":"sql.low","endTime":1737998286267,"results":[{"message":"AMOUNT\tTIME_ID\n15406.48\t1998-01-01 00:00:00\n19333.41\t1998-01-02 00:00:00\n34392.76\t1998-01-03 00:00:00\n32013.28\t1998-01-04 00:00:00\n128209.37\t1998-01-05 00:00:00\n4148.08\t1998-01-06 00:00:00\n52989.75\t1998-01-07 00:00:00\n22838.89\t1998-01-08 00:00:00\n20505.11\t1998-01-09 00:00:00\n184725.56\t1998-01-10 00:00:00\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"TEST QUANTITY data from 2000-2001","message":["%sql","","select QUANTITY, TIME_ID from mset_test_sh_data","fetch first 10 rows only"],"enabled":true,"result":{"startTime":1737998286738,"interpreter":"sql.low","endTime":1737998287269,"results":[{"message":"QUANTITY\tTIME_ID\n310\t1999-12-31 00:00:00\n153\t2000-01-01 00:00:00\n711\t2000-01-02 00:00:00\n34\t2000-01-03 00:00:00\n757\t2000-01-04 00:00:00\n149\t2000-01-05 00:00:00\n149\t2000-01-06 00:00:00\n780\t2000-01-07 00:00:00\n755\t2000-01-08 00:00:00\n299\t2000-01-09 00:00:00\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"TEST AMOUNT data from 2000-2001","message":["%sql","","select AMOUNT, TIME_ID from mset_test_sh_data","fetch first 10 rows only"],"enabled":true,"result":{"startTime":1737998287731,"interpreter":"sql.low","endTime":1737998288257,"results":[{"message":"AMOUNT\tTIME_ID\n69522.67\t1999-12-31 00:00:00\n1773.74\t2000-01-01 00:00:00\n24778.16\t2000-01-02 00:00:00\n40605.5\t2000-01-03 00:00:00\n29957.97\t2000-01-04 00:00:00\n4760.24\t2000-01-05 00:00:00\n1704.16\t2000-01-06 00:00:00\n69144.65\t2000-01-07 00:00:00\n27957.61\t2000-01-08 00:00:00\n9960.59\t2000-01-09 00:00:00\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","### Build a model using MSET","---"],"enabled":true,"result":{"startTime":1737998585862,"interpreter":"md.low","endTime":1737998586299,"results":[{"message":"<h3 id=\"build-a-model-using-mset\">Build a model using MSET<\/h3>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{\"height\":300,\"lastColumns\":[],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"raw","title":"Establish the Settings for the MSET algorithm","message":["%script","","-- Create setting table        ","CREATE TABLE mset_sh_settings(setting_name VARCHAR2(30), ","                             setting_value VARCHAR2(128));","-- Populate setting table","BEGIN","-- Select MSET-SPRT as the algorithm","  INSERT INTO mset_sh_settings VALUES(dbms_data_mining.algo_name, dbms_data_mining.algo_mset_sprt);","-- Turn on automatic data preparation   ","  INSERT INTO mset_sh_settings VALUES(dbms_data_mining.prep_auto, dbms_data_mining.prep_auto_on);","-- Set memory vector","  INSERT INTO mset_sh_settings VALUES(dbms_data_mining.mset_memory_vectors, 100);","-- Set alpha","  INSERT INTO mset_sh_settings VALUES(dbms_data_mining.MSET_ALPHA_PROB, 0.1);","-- Set alert count","  INSERT INTO mset_sh_settings VALUES(dbms_data_mining.MSET_ALERT_COUNT, 3);","-- Set alert window","  INSERT INTO mset_sh_settings VALUES(dbms_data_mining.MSET_ALERT_WINDOW, 5);  ","-- Examples of other possible settings are:","-- (dbms_data_mining.mset_beta_prob, 0.1)","-- (dbms_data_mining.mset_adb_height, 0.01)","-- (dbms_data_mining.mset_std_tolerance, 3)","-- (dbms_data_mining.mset_heldaside, 500)","  commit;  ","END;"],"enabled":true,"result":{"startTime":1737998289647,"interpreter":"script.low","endTime":1737998290173,"results":[{"message":"\nTable MSET_SH_SETTINGS created.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Build the MSET model","message":["%script","","-- Build the MSET model","BEGIN","  dbms_data_mining.create_model(","    model_name          => 'MSET_SH_MODEL',","    mining_function     => 'CLASSIFICATION',","    data_table_name     => 'mset_build_sh_data',","    case_id_column_name => 'time_id',","    target_column_name  => '',","    settings_table_name => 'MSET_SH_SETTINGS');","END;"],"enabled":true,"result":{"startTime":1737998290635,"interpreter":"script.low","endTime":1737998292405,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","### Review the Model Settings and Signature","---"],"enabled":true,"result":{"startTime":1737998292872,"interpreter":"md.low","endTime":1737998293303,"results":[{"message":"<h3 id=\"review-the-model-settings-and-signature\">Review the Model Settings and Signature<\/h3>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show the MSET model settings","message":["%sql","","SELECT setting_name, setting_value","FROM   user_mining_model_settings","WHERE  model_name = 'MSET_SH_MODEL'","ORDER  BY setting_name;"],"enabled":true,"result":{"startTime":1737998293773,"interpreter":"sql.low","endTime":1737998294279,"results":[{"message":"SETTING_NAME\tSETTING_VALUE\nALGO_NAME\tALGO_MSET_SPRT\nMSET_ADB_HEIGHT\t.05\nMSET_ALERT_COUNT\t3\nMSET_ALERT_WINDOW\t5\nMSET_ALPHA_PROB\t.1\nMSET_BETA_PROB\t.1\nMSET_HELDASIDE\t10000\nMSET_MEMORY_VECTORS\t100\nMSET_STD_TOLERANCE\t3\nODMS_DETAILS\tODMS_ENABLE\nODMS_MISSING_VALUE_TREATMENT\tODMS_MISSING_VALUE_AUTO\nODMS_RANDOM_SEED\t0\nODMS_SAMPLING\tODMS_SAMPLING_DISABLE\nPREP_AUTO\tON\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show the MSET model signature","message":["%sql","","SELECT   attribute_name, attribute_type","FROM     user_mining_model_attributes","WHERE    model_name = 'MSET_SH_MODEL'","ORDER BY attribute_name;","  "],"enabled":true,"result":{"startTime":1737998294745,"interpreter":"sql.low","endTime":1737998295222,"results":[{"message":"ATTRIBUTE_NAME\tATTRIBUTE_TYPE\nAMOUNT\tNUMERICAL\nQUANTITY\tNUMERICAL\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show the MSET model views","message":["%sql","","SELECT   view_name, view_type FROM user_mining_model_views","WHERE    model_name='MSET_SH_MODEL'","ORDER BY view_name;","  "],"enabled":true,"result":{"startTime":1737998295689,"interpreter":"sql.low","endTime":1737998296186,"results":[{"message":"VIEW_NAME\tVIEW_TYPE\nDM$VCMSET_SH_MODEL\tScoring Cost Matrix\nDM$VGMSET_SH_MODEL\tGlobal Name-Value Pairs\nDM$VNMSET_SH_MODEL\tNormalization and Missing Value Handling\nDM$VSMSET_SH_MODEL\tComputed Settings\nDM$VTMSET_SH_MODEL\tClassification Targets\nDM$VWMSET_SH_MODEL\tModel Build Alerts\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show the Global diagnostics","message":["%sql","","SELECT   name, to_char(numeric_value, '99999') numeric_value, string_value ","FROM     DM$VGMSET_SH_MODEL","ORDER BY name;","  "],"enabled":true,"result":{"startTime":1737998296654,"interpreter":"sql.low","endTime":1737998297137,"results":[{"message":"NAME\tNUMERIC_VALUE\tSTRING_VALUE\nNUM_ROWS\t   729\t\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","### Applying the MSET model to predict future anomalies","Predicting anomalies of daily sold data from year 2000 to 2001","","---"],"enabled":true,"result":{"startTime":1737998297615,"interpreter":"md.low","endTime":1737998298055,"results":[{"message":"<h3 id=\"applying-the-mset-model-to-predict-future-anomalies\">Applying the MSET model to predict future anomalies<\/h3>\n<p>Predicting anomalies of daily sold data from year 2000 to 2001<\/p>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Predicting anomalies between 15-Dec and 25-Dec of 2001","message":["%sql","","-- \"prediction\" = 1 is normal, while \"prediction\" = 0 is an anomaly","","SELECT time_id, ","       prediction(mset_sh_model using *) over (ORDER BY time_id) prediction, ","       prediction_probability (mset_sh_model using *) over (ORDER BY time_id) prob","FROM (SELECT * ","      FROM   mset_test_sh_data  ","      WHERE  time_id > '15-DEC-01' AND time_id <= '25-DEC-01') ","ORDER BY time_id;","       "],"enabled":true,"result":{"startTime":1737998298532,"interpreter":"sql.low","endTime":1737998299048,"results":[{"message":"TIME_ID\tPREDICTION\tPROB\n2001-12-16 00:00:00\t1\t1.0\n2001-12-17 00:00:00\t1\t0.8333333333333334\n2001-12-18 00:00:00\t1\t0.6666666666666667\n2001-12-19 00:00:00\t0\t0.5\n2001-12-20 00:00:00\t0\t0.5\n2001-12-21 00:00:00\t0\t0.5\n2001-12-22 00:00:00\t0\t0.5\n2001-12-23 00:00:00\t1\t0.6666666666666667\n2001-12-24 00:00:00\t1\t0.8333333333333334\n2001-12-25 00:00:00\t1\t0.8333333333333334\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display Anomalies in TEST years (2000/2001)","message":["%sql","","SELECT time_id, pred ","FROM (SELECT time_id, ","             prediction(mset_sh_model using *) over (ORDER BY time_id) pred ","      FROM   mset_test_sh_data) ","WHERE pred = 0;  ","        "],"enabled":true,"result":{"startTime":1737998299531,"interpreter":"sql.low","endTime":1737998300120,"results":[{"message":"TIME_ID\tPRED\n2000-09-21 00:00:00\t0\n2000-09-22 00:00:00\t0\n2001-12-19 00:00:00\t0\n2001-12-20 00:00:00\t0\n2001-12-21 00:00:00\t0\n2001-12-22 00:00:00\t0\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Display total anomaly count for 2000 and 2001","message":["%sql","","SELECT pred, count(pred), min(prob), max(prob) ","FROM (SELECT prediction(mset_sh_model using *) over (ORDER BY time_id) pred, ","             prediction_probability(mset_sh_model using *) over (ORDER BY time_id) prob ","      FROM mset_test_sh_data ) ","GROUP BY pred ","ORDER BY pred;","  "],"enabled":true,"result":{"startTime":1737998300579,"interpreter":"sql.low","endTime":1737998301164,"results":[{"message":"PRED\tCOUNT(PRED)\tMIN(PROB)\tMAX(PROB)\n0\t6\t0.5\t0.5\n1\t725\t0.6666666666666667\t1.0\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Display anomly rate (anomalies/total)","message":["%sql","  ","SELECT ROUND(1 - sum(correct)/count(*),6) as anomalyrate","FROM (SELECT DECODE(pred, 1, 1) CORRECT","      FROM (SELECT prediction(mset_sh_model using *) over (ORDER BY time_id) pred","            FROM mset_test_sh_data ) a ) b;","    "],"enabled":true,"result":{"startTime":1737998301631,"interpreter":"sql.low","endTime":1737998302231,"results":[{"message":"ANOMALYRATE\n0.008208\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","## End of script","---"],"enabled":true,"result":{"startTime":1737998302715,"interpreter":"md.low","endTime":1737998303168,"results":[{"message":"<h2 id=\"end-of-script\">End of script<\/h2>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1737998303633,"interpreter":"md.low","endTime":1737998304083,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]