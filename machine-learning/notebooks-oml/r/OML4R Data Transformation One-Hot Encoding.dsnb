[{"layout":null,"isRunnable":true,"template":null,"templateConfig":null,"isEditable":true,"name":"OML4R Data Transformation One-Hot Encoding","description":null,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1736276279471,"interpreter":"md.low","endTime":1736276280001,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML4R Data Transformation: One-Hot Encoding","In this notebook, we demonstrate how to perform one-hot encoding using OML4R using the customer insurance lifetime value dataset, which contains customer financial information, lifetime value, and whether or not the customer bought insurance.","","The dataset `CUSTOMER_INSURANCE_LTV` is generated by the `\"OML Run-me-first\"` notebook, which `MUST` be run before this notebook.","","###### IMPORTANT: The `\"OML Run-me-first\"` notebook is available under the menu `Templates -> Examples` and is a pre-requisite to the current notebook.","","","**Note**: If the user plans to use the in-database algorithms, one hot encoding is automatically applied for those algorithms requiring it. The in-databae algorithms automatically explode the categorical columns and fit the model on the prepared data internally. For more details, see <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/generalized-linear-model.html#GUID-19B8E133-0029-4892-88BB-3E1C9E83EB12\" target=\"_blank\">Data Preparation for GLM<\/a>","","Copyright (c) 2026 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a>"],"enabled":true,"result":{"startTime":1738092570660,"interpreter":"md.low","endTime":1738092570875,"results":[{"message":"<h1 id=\"oml4r-data-transformation-one-hot-encoding\">OML4R Data Transformation: One-Hot Encoding<\/h1>\n<p>In this notebook, we demonstrate how to perform one-hot encoding using OML4R using the customer insurance lifetime value dataset, which contains customer financial information, lifetime value, and whether or not the customer bought insurance.<\/p>\n<p>The dataset <code>CUSTOMER_INSURANCE_LTV<\/code> is generated by the <code>&quot;OML Run-me-first&quot;<\/code> notebook, which <code>MUST<\/code> be run before this notebook.<\/p>\n<h6 id=\"important-the-oml-run-me-first-notebook-is-available-under-the-menu-templates---examples-and-is-a-pre-requisite-to-the-current-notebook\">IMPORTANT: The <code>&quot;OML Run-me-first&quot;<\/code> notebook is available under the menu <code>Templates -&gt; Examples<\/code> and is a pre-requisite to the current notebook.<\/h6>\n<p><strong>Note<\/strong>: If the user plans to use the in-database algorithms, one hot encoding is automatically applied for those algorithms requiring it. The in-databae algorithms automatically explode the categorical columns and fit the model on the prepared data internally. For more details, see <a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4sql/21/dmcon/generalized-linear-model.html#GUID-19B8E133-0029-4892-88BB-3E1C9E83EB12\" target=\"_blank\">Data Preparation for GLM<\/a><\/p>\n<p>Copyright (c) 2026 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md ","","<a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4r/2.0.0/oreug/prepare-and-explore-data-database.html\" target=\"_blank\">OML4R documentation on Data Preparation<\/a>"],"enabled":true,"result":{"startTime":1736276281390,"interpreter":"md.low","endTime":1736276281850,"results":[{"message":"<p><a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4r/2.0.0/oreug/prepare-and-explore-data-database.html\" target=\"_blank\">OML4R documentation on Data Preparation<\/a><\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Import R libraries","message":["%r","","library(ORE)","library(OREdplyr)","options(ore.warn.order=FALSE)"],"enabled":true,"result":{"startTime":1736276282312,"interpreter":"r.low","endTime":1736276287751,"results":[{"message":"\nAttaching package: \u2018OREdplyr\u2019\n\n\nThe following objects are masked from \u2018package:dplyr\u2019:\n\n    arrange, arrange_, count, count_, cume_dist, dense_rank, desc,\n    distinct, distinct_, filter, filter_, first, full_join, group_by,\n    group_by_, group_size, groups, inner_join, last, left_join,\n    min_rank, mutate, mutate_, n, n_distinct, n_groups, nth, ntile,\n    percent_rank, rename, rename_, right_join, row_number, sample_frac,\n    sample_n, select, select_, slice, slice_, summarise, summarise_,\n    tally, top_n, transmute, transmute_, ungroup\n\n\nThe following object is masked from \u2018package:stats\u2019:\n\n    filter\n\n\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Get a proxy object to CUSTOMER_INSURANCE_LTV and subset of columns","message":["%r","","ore.sync(query = c(\"CUST_DF\" = \"SELECT * FROM CUSTOMER_INSURANCE_LTV\"))","ore.attach()","","CUST_CAT_DF <- CUST_DF[, c(\"CUSTOMER_ID\", \"MARITAL_STATUS\", \"STATE\", \"GENDER\", \"REGION\")]","","z.show(head(CUST_CAT_DF, 5))"],"enabled":true,"result":{"startTime":1736276288201,"interpreter":"r.low","endTime":1736276288814,"results":[{"message":"CUSTOMER_ID\tMARITAL_STATUS\tSTATE\tGENDER\tREGION\nCU15154                   \tSINGLE\tCA                        \tM                         \tWest\nCU15155                   \tSINGLE\tNY                        \tM                         \tNorthEast\nCU15157                   \tMARRIED\tMI                        \tM                         \tMidwest\nCU15286                   \tMARRIED\tUT                        \tF                         \tSouthwest\nCU15287                   \tMARRIED\tUT                        \tF                         \tSouthwest\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create function for one hot encoding","message":["%r ","","encode <- function(DF, ids, col) {","  uniqueValues <- ore.pull(unique(DF[col])) # Get the unique values of column col","  RESULT <- cbind(ids, DF[col]) # RESULT begins as ids and col to be encoded","","  # Rename columns","  col_index <- which(colnames(RESULT) == col)","  colnames(RESULT)[col_index] <- \"target_col\""," ","  # Add One Hot Encoded columns to RESULT","  for (x in 1:nrow(uniqueValues)){","    RESULT <- cbind(RESULT, new_col = ifelse(RESULT$target_col == uniqueValues[x,], 1, 0)) # Add encoded column","    # Rename encoded column","    index <- which(colnames(RESULT) == \"new_col\")","    colnames(RESULT)[index] <- paste(col, gsub(\" \", \"\", uniqueValues[x,1]), sep='.')","  }"," ","  # Now that One Hot Encoded columns have been added, remove original column","  RESULT <- RESULT[-c(col_index)]"," ","  return(RESULT)","}"],"enabled":true,"result":{"startTime":1736276289266,"interpreter":"r.low","endTime":1736276289766,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Apply one hot encoding to MARITAL_STATUS column and check the transformed data","message":["%r","","rownames(CUST_CAT_DF) <- CUST_CAT_DF$CUSTOMER_ID # Ordering rows of CUST_CAT_DF before applying function","","ONEHOT_DF <- encode(CUST_CAT_DF, CUST_CAT_DF['CUSTOMER_ID'], \"MARITAL_STATUS\")","","z.show(head(ONEHOT_DF))"],"enabled":true,"result":{"startTime":1736276290224,"interpreter":"r.low","endTime":1736276291342,"results":[{"message":"CUSTOMER_ID\tMARITAL_STATUS.OTHER\tMARITAL_STATUS.DIVORCED\tMARITAL_STATUS.MARRIED\tMARITAL_STATUS.SINGLE\tMARITAL_STATUS.WIDOWED\nCU1                       \t1\t0\t0\t0\t0\nCU10                      \t0\t1\t0\t0\t0\nCU1000                    \t0\t0\t1\t0\t0\nCU10000                   \t0\t0\t1\t0\t0\nCU10001                   \t0\t1\t0\t0\t0\nCU10003                   \t0\t1\t0\t0\t0\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Apply one-hot encoding to all selected categorical columns","message":["%r","","RES_DF <- CUST_CAT_DF[\"CUSTOMER_ID\"]","","for (col in colnames(CUST_CAT_DF)[-c(1)]){","  ","  ONEHOT_DF <- encode(CUST_CAT_DF, CUST_CAT_DF[\"CUSTOMER_ID\"], col)","  ","  RES_DF <- full_join(RES_DF, ONEHOT_DF)","}","","rownames(RES_DF) <- 1:nrow(RES_DF) # Renaming rows of RES_DF","","z.show(head(RES_DF))"],"enabled":true,"result":{"startTime":1736276291791,"interpreter":"r.low","endTime":1736276295365,"results":[{"message":"CUSTOMER_ID\tMARITAL_STATUS.OTHER\tMARITAL_STATUS.DIVORCED\tMARITAL_STATUS.MARRIED\tMARITAL_STATUS.SINGLE\tMARITAL_STATUS.WIDOWED\tSTATE.WA\tSTATE.MN\tSTATE.NY\tSTATE.CA\tSTATE.FL\tSTATE.MI\tSTATE.NV\tSTATE.NM\tSTATE.DC\tSTATE.WI\tSTATE.MS\tSTATE.IL\tSTATE.AL\tSTATE.CO\tSTATE.OH\tSTATE.MO\tSTATE.OR\tSTATE.TX\tSTATE.LA\tSTATE.NC\tSTATE.AZ\tSTATE.UT\tSTATE.OK\tSTATE.AK\tGENDER.F\tGENDER.M\tREGION.West\tREGION.NorthEast\tREGION.South\tREGION.Midwest\tREGION.Southwest\nCU1                       \t1\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t0\t1\t0\t0\t0\t0\nCU10                      \t0\t1\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t0\t1\t0\t0\t0\t0\nCU1000                    \t0\t0\t1\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t0\t1\t0\t0\t0\nCU10000                   \t0\t0\t1\t0\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t1\t0\t0\t0\t0\nCU10001                   \t0\t1\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t1\t0\t0\nCU10003                   \t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t0\t1\t0\t0\t0\t0\t1\t0\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1736276295817,"interpreter":"md.low","endTime":1736276296263,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1736276296720,"interpreter":"md.low","endTime":1736276297157,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"7","snapshot":false,"tags":null}]