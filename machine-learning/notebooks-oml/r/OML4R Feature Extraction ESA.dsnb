[{"layout":null,"template":null,"templateConfig":null,"name":"OML4R Feature Extraction ESA","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1736286869770,"interpreter":"md.low","endTime":1736286870189,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","# Explicit Semantic Analysis (ESA) for Text Analytics","","Explicit Semantic Analysis (ESA) is an unsupervised algorithm for feature extraction of explicit features based on an existing knowledge base. ESA assists in understanding the meaning of a section of text as a combination of concepts found in the text. Compared to other techniques such as Latent Dirichlet Association (LDA) or Term Frequency-Inverse Document Frequency (TF-IDF), ESA improves text document categorization by calculating `semantic relatedness` (how similar in meaning two words or pieces of text are to each other) between the documents and a set of topics that are explicitly defined and described by humans.","","The Oracle Machine Learning for R function *ore.odmESA* extracts text-based features from a corpus of documents and performs document similarity comparisons. All processing occurs inside Oracle Autonomous Database.","","In this notebook, we cover the basic usage of ESA, where we extract topics from the comments provided. ",""," - Create a small sample dataset"," - Use the ESA Model to predict a feature vector on test data"," - Identify top features"," - Document similarity"," - Change model settings","","Copyright (c) 2025 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1736286870621,"interpreter":"md.low","endTime":1736286871039,"results":[{"message":"<h1 id=\"explicit-semantic-analysis-esa-for-text-analytics\">Explicit Semantic Analysis (ESA) for Text Analytics<\/h1>\n<p>Explicit Semantic Analysis (ESA) is an unsupervised algorithm for feature extraction of explicit features based on an existing knowledge base. ESA assists in understanding the meaning of a section of text as a combination of concepts found in the text. Compared to other techniques such as Latent Dirichlet Association (LDA) or Term Frequency-Inverse Document Frequency (TF-IDF), ESA improves text document categorization by calculating <code>semantic relatedness<\/code> (how similar in meaning two words or pieces of text are to each other) between the documents and a set of topics that are explicitly defined and described by humans.<\/p>\n<p>The Oracle Machine Learning for R function <em>ore.odmESA<\/em> extracts text-based features from a corpus of documents and performs document similarity comparisons. All processing occurs inside Oracle Autonomous Database.<\/p>\n<p>In this notebook, we cover the basic usage of ESA, where we extract topics from the comments provided.<\/p>\n<ul>\n<li>Create a small sample dataset<\/li>\n<li>Use the ESA Model to predict a feature vector on test data<\/li>\n<li>Identify top features<\/li>\n<li>Document similarity<\/li>\n<li>Change model settings<\/li>\n<\/ul>\n<p>Copyright (c) 2025 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md","","* <a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a>","* <a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a>","* <a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a>","* <a href=\"https://www.oracle.com/goto/ml-explicit-semantic-analysis\" target=\"_blank\">OML Explicit Semantic Analysis"],"enabled":true,"result":{"startTime":1736286871461,"interpreter":"md.low","endTime":1736286871873,"results":[{"message":"<ul>\n<li><a href=\"https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/index.html\" target=\"_blank\">Oracle ADB Documentation<\/a><\/li>\n<li><a href=\"https://github.com/oracle-samples/oracle-db-examples/tree/main/machine-learning\" target=\"_blank\">OML folder on Oracle GitHub<\/a><\/li>\n<li><a href=\"https://www.oracle.com/machine-learning\" target=\"_blank\">OML Web Page<\/a><\/li>\n<li><a href=\"https://www.oracle.com/goto/ml-explicit-semantic-analysis\" target=\"_blank\">OML Explicit Semantic Analysis<\/li>\n<\/ul>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Import libraries and set display options","message":["%r","","library(ORE)","options(ore.warn.order=FALSE)"],"enabled":true,"result":{"startTime":1736286872288,"interpreter":"r.low","endTime":1736286877333,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Create and view data","message":["%r","","TITLE <- c('Aids in Africa: Planning for a long war',","                'Mars rover maneuvers for rim shot',","                'Mars express confirms presence of water at Mars south pole',","                'NASA announces major Mars rover finding',","                'Drug access, Asia threat in focus at AIDS summit',","                'NASA Mars Odyssey THEMIS image: typical crater',","                'Road blocks for Aids')","","ID <- 1:length(TITLE)","","df <- data.frame(ID, TITLE)","ESA_TXT <- ore.push(df)","","z.show(ESA_TXT)"],"enabled":true,"result":{"startTime":1736286877752,"interpreter":"r.low","endTime":1736286878427,"results":[{"message":"ID\tTITLE\n1\tAids in Africa: Planning for a long war\n2\tMars rover maneuvers for rim shot\n3\tMars express confirms presence of water at Mars south pole\n4\tNASA announces major Mars rover finding\n5\tDrug access, Asia threat in focus at AIDS summit\n6\tNASA Mars Odyssey THEMIS image: typical crater\n7\tRoad blocks for Aids\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create a policy for text indexing","message":["%r","","# Drop the text policy if it exists","ore.exec(paste(\"Begin ctx_ddl.drop_policy('ESA_TXT_POLICY'); ","                EXCEPTION WHEN others THEN null; END;\",sep=\"\"))","","# Create text policy","ore.exec(\"Begin ctx_ddl.create_policy('ESA_TXT_POLICY'); End;\")"],"enabled":true,"result":{"startTime":1736286878863,"interpreter":"r.low","endTime":1736286879660,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Specify model settings","message":["%r","","odm <- list(case_id_column_name     = \"ID\", ","            ODMS_TEXT_POLICY_NAME   = \"ESA_TXT_POLICY\", ","            ODMS_TEXT_MIN_DOCUMENTS = 1, ","            ESAS_MIN_ITEMS          = 1, ","            model_name              = 'ESA_MOD')","","ctx <- list(TITLE = \"TEXT(POLICY_NAME:ESA_TXT_POLICY)(TOKEN_TYPE:STEM)\")"],"enabled":true,"result":{"startTime":1736286880095,"interpreter":"r.low","endTime":1736286880571,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create an ESA model object ","message":["%r","","# Delete model if it exists","ore.exec(paste(\"BEGIN DBMS_DATA_MINING.DROP_MODEL(model_name=> '\", 'ESA_MOD', \"'); ","EXCEPTION WHEN others THEN null; END;\",sep=\"\"))","","# Create model","esa_mod <- ore.odmESA(~TITLE, ESA_TXT, odm.settings = odm, ctx.settings = ctx)"],"enabled":true,"result":{"startTime":1736286880987,"interpreter":"r.low","endTime":1736286882634,"results":[{"message":"Warning message:\n\u201cThe created mining model ESA_MOD is explicitly named. ORE does not manage this mining model's life cycle.\u201d\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View the model settings","message":["%r","","z.show(settings(esa_mod))"],"enabled":true,"result":{"startTime":1736286883071,"interpreter":"r.low","endTime":1736286883609,"results":[{"message":"SETTING_NAME\tSETTING_VALUE\tSETTING_TYPE\nALGO_NAME\tALGO_EXPLICIT_SEMANTIC_ANALYS\tINPUT\nESAS_MIN_ITEMS\t1\tINPUT\nESAS_TOPN_FEATURES\t1000\tDEFAULT\nESAS_VALUE_THRESHOLD\t.00000001\tDEFAULT\nODMS_DETAILS\tODMS_ENABLE\tDEFAULT\nODMS_MISSING_VALUE_TREATMENT\tODMS_MISSING_VALUE_AUTO\tDEFAULT\nODMS_SAMPLING\tODMS_SAMPLING_DISABLE\tDEFAULT\nODMS_TEXT_MAX_FEATURES\t300000\tDEFAULT\nODMS_TEXT_MIN_DOCUMENTS\t1\tINPUT\nODMS_TEXT_POLICY_NAME\tESA_TXT_POLICY\tINPUT\nPREP_AUTO\tON\tINPUT\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{\"height\":300,\"lastColumns\":[],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"raw","title":"Show the model details","message":["%r","","summary(esa_mod)"],"enabled":true,"result":{"startTime":1736286884033,"interpreter":"r.low","endTime":1736286884816,"results":[{"message":"\nCall:\nore.odmESA(formula = ~TITLE, data = ESA_TXT, odm.settings = odm, \n    ctx.settings = ctx)\n\nSettings: \n                                               value\nmin.items                                          1\ntopn.features                                   1000\nvalue.threshold                            .00000001\nodms.details                             odms.enable\nodms.missing.value.treatment odms.missing.value.auto\nodms.sampling                  odms.sampling.disable\nodms.text.max.features                        300000\nodms.text.min.documents                            1\nodms.text.policy.name                 ESA_TXT_POLICY\nprep.auto                                         ON\n\nFeatures: \n   FEATURE_ID  ATTRIBUTE_NAME ATTRIBUTE_VALUE COEFFICIENT\n1           1    TITLE.AFRICA            <NA>   0.4885556\n2           1      TITLE.AIDS            <NA>   0.2127293\n3           1      TITLE.LONG            <NA>   0.4885556\n4           1  TITLE.PLANNING            <NA>   0.4885556\n5           1       TITLE.WAR            <NA>   0.4885556\n6           2 TITLE.MANEUVERS            <NA>   0.5347384\n7           2      TITLE.MARS            <NA>   0.1537831\n8           2       TITLE.RIM            <NA>   0.5347384\n9           2     TITLE.ROVER            <NA>   0.3442607\n10          2      TITLE.SHOT            <NA>   0.5347384\n11          3  TITLE.CONFIRMS            <NA>   0.4020610\n12          3   TITLE.EXPRESS            <NA>   0.4020610\n13          3      TITLE.MARS            <NA>   0.1734405\n14          3      TITLE.POLE            <NA>   0.4020610\n15          3  TITLE.PRESENCE            <NA>   0.4020610\n16          3     TITLE.SOUTH            <NA>   0.4020610\n17          3     TITLE.WATER            <NA>   0.4020610\n18          4 TITLE.ANNOUNCES            <NA>   0.5056155\n19          4   TITLE.FINDING            <NA>   0.5056155\n20          4     TITLE.MAJOR            <NA>   0.5056155\n21          4      TITLE.MARS            <NA>   0.1454077\n22          4      TITLE.NASA            <NA>   0.3255116\n23          4     TITLE.ROVER            <NA>   0.3255116\n24          5    TITLE.ACCESS            <NA>   0.4019471\n25          5      TITLE.AIDS            <NA>   0.1750178\n26          5      TITLE.ASIA            <NA>   0.4019471\n27          5      TITLE.DRUG            <NA>   0.4019471\n28          5     TITLE.FOCUS            <NA>   0.4019471\n29          5    TITLE.SUMMIT            <NA>   0.4019471\n30          5    TITLE.THREAT            <NA>   0.4019471\n31          6    TITLE.CRATER            <NA>   0.4265110\n32          6     TITLE.IMAGE            <NA>   0.4265110\n33          6      TITLE.MARS            <NA>   0.1226584\n34          6      TITLE.NASA            <NA>   0.2745847\n35          6   TITLE.ODYSSEY            <NA>   0.4265110\n36          6    TITLE.THEMIS            <NA>   0.4265110\n37          6   TITLE.TYPICAL            <NA>   0.4265110\n38          7      TITLE.AIDS            <NA>   0.2942601\n39          7    TITLE.BLOCKS            <NA>   0.6757999\n40          7      TITLE.ROAD            <NA>   0.6757999","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show the model details for each feature","message":["%r","","esa_mod$features$COEFFICIENT <- round(esa_mod$features$COEFFICIENT, digits=4)","z.show(head(esa_mod$features, 10))"],"enabled":true,"result":{"startTime":1736286885468,"interpreter":"r.low","endTime":1736286885938,"results":[{"message":"FEATURE_ID\tATTRIBUTE_NAME\tATTRIBUTE_VALUE\tCOEFFICIENT\n1\tTITLE.AFRICA\tNA\t0.4886\n1\tTITLE.AIDS\tNA\t0.2127\n1\tTITLE.LONG\tNA\t0.4886\n1\tTITLE.PLANNING\tNA\t0.4886\n1\tTITLE.WAR\tNA\t0.4886\n2\tTITLE.MANEUVERS\tNA\t0.5347\n2\tTITLE.MARS\tNA\t0.1538\n2\tTITLE.RIM\tNA\t0.5347\n2\tTITLE.ROVER\tNA\t0.3443\n2\tTITLE.SHOT\tNA\t0.5347\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View the model name using ALL_MINING_MODELS view","message":["%sql","","SELECT * from all_mining_models WHERE ALGORITHM = 'EXPLICIT_SEMANTIC_ANALYS'"],"enabled":true,"result":{"startTime":1736286886353,"interpreter":"sql.low","endTime":1736286888297,"results":[{"message":"OWNER\tMODEL_NAME\tMINING_FUNCTION\tALGORITHM\tALGORITHM_TYPE\tCREATION_DATE\tBUILD_DURATION\tMODEL_SIZE\tPARTITIONED\tCOMMENTS\nOMLUSER\tESA_MOD\tFEATURE_EXTRACTION\tEXPLICIT_SEMANTIC_ANALYS\tNATIVE\t2025-01-07 21:54:41\t\t0\tNO\t\nOMLUSER\tWIKI_MODEL\tFEATURE_EXTRACTION\tEXPLICIT_SEMANTIC_ANALYS\tNATIVE\t2024-12-19 21:17:32\t0\t0\tNO\t\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"View model name using USER_MINING_MODELS view","message":["%sql","","SELECT * from user_mining_models where model_name = 'ESA_MOD'"],"enabled":true,"result":{"startTime":1736286888731,"interpreter":"sql.low","endTime":1736286889233,"results":[{"message":"MODEL_NAME\tMINING_FUNCTION\tALGORITHM\tALGORITHM_TYPE\tCREATION_DATE\tBUILD_DURATION\tMODEL_SIZE\tPARTITIONED\tCOMMENTS\nESA_MOD\tFEATURE_EXTRACTION\tEXPLICIT_SEMANTIC_ANALYS\tNATIVE\t2025-01-07 21:54:41\t\t0\tNO\t\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Make predictions on data","message":["%r","","esa_pred <- predict(esa_mod, ESA_TXT, type = \"class\", supplemental.cols = c(\"ID\", \"TITLE\"))","z.show(esa_pred)"],"enabled":true,"result":{"startTime":1736286889678,"interpreter":"r.low","endTime":1736286890367,"results":[{"message":"ID\tTITLE\tFEATURE_ID\n1\tAids in Africa: Planning for a long war\t1\n2\tMars rover maneuvers for rim shot\t2\n3\tMars express confirms presence of water at Mars south pole\t3\n4\tNASA announces major Mars rover finding\t4\n5\tDrug access, Asia threat in focus at AIDS summit\t5\n6\tNASA Mars Odyssey THEMIS image: typical crater\t6\n7\tRoad blocks for Aids\t7\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Feature compare titles","message":["%r","","z.show(feature_compare(esa_mod, ESA_TXT, compare.cols = c('TITLE'), supplemental.cols = c('TITLE')))"],"enabled":true,"result":{"startTime":1736286890792,"interpreter":"r.low","endTime":1736286891318,"results":[{"message":"TITLE_A\tTITLE_B\tSIMILARITY\nAids in Africa: Planning for a long war\tMars rover maneuvers for rim shot\t0\nAids in Africa: Planning for a long war\tMars express confirms presence of water at Mars south pole\t0\nAids in Africa: Planning for a long war\tNASA announces major Mars rover finding\t0\nAids in Africa: Planning for a long war\tDrug access, Asia threat in focus at AIDS summit\t0.0312418916816983\nAids in Africa: Planning for a long war\tNASA Mars Odyssey THEMIS image: typical crater\t0\nAids in Africa: Planning for a long war\tRoad blocks for Aids\t0.0645255975774246\nMars rover maneuvers for rim shot\tMars express confirms presence of water at Mars south pole\t0.0233983356418543\nMars rover maneuvers for rim shot\tNASA announces major Mars rover finding\t0.16186140052623\nMars rover maneuvers for rim shot\tDrug access, Asia threat in focus at AIDS summit\t0\nMars rover maneuvers for rim shot\tNASA Mars Odyssey THEMIS image: typical crater\t0.0204226257202758\nMars rover maneuvers for rim shot\tRoad blocks for Aids\t0\nMars express confirms presence of water at Mars south pole\tNASA announces major Mars rover finding\t0.0215906984781613\nMars express confirms presence of water at Mars south pole\tDrug access, Asia threat in focus at AIDS summit\t0\nMars express confirms presence of water at Mars south pole\tNASA Mars Odyssey THEMIS image: typical crater\t0.0171430558490882\nMars express confirms presence of water at Mars south pole\tRoad blocks for Aids\t0\nNASA announces major Mars rover finding\tDrug access, Asia threat in focus at AIDS summit\t0\nNASA announces major Mars rover finding\tNASA Mars Odyssey THEMIS image: typical crater\t0.119051964176864\nNASA announces major Mars rover finding\tRoad blocks for Aids\t0\nDrug access, Asia threat in focus at AIDS summit\tNASA Mars Odyssey THEMIS image: typical crater\t0\nDrug access, Asia threat in focus at AIDS summit\tRoad blocks for Aids\t0.0496393530793489\nNASA Mars Odyssey THEMIS image: typical crater\tRoad blocks for Aids\t0\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Change the settings and create new model","message":["%r","","new_setting <- list(case_id_column_name = \"ID\", ","                    ODMS_TEXT_POLICY_NAME = \"ESA_TXT_POLICY\",","                    ESAS_VALUE_THRESHOLD = 0.0001, ","                    ODMS_TEXT_MAX_FEATURES = 3, ","                    ESAS_MIN_ITEMS = 1,","                    ESAS_TOPN_FEATURES = 3,","                    model_name = 'ESA_MOD_2')","                    "],"enabled":true,"result":{"startTime":1736286891746,"interpreter":"r.low","endTime":1736286892219,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create the model with new settings - 2 features maximum ","message":["%r","","# Delete if ESA model exists, then create it","","ore.exec(paste(\"BEGIN DBMS_DATA_MINING.DROP_MODEL(model_name=> '\", 'ESA_MOD_2', \"'); ","  EXCEPTION WHEN others THEN null; END;\",sep=\"\"))","","esa_mod2 <- ore.odmESA(~TITLE, ESA_TXT, odm.settings = new_setting, ctx.settings = ctx)"],"enabled":true,"result":{"startTime":1736286892656,"interpreter":"r.low","endTime":1736286893903,"results":[{"message":"Warning message:\n\u201cThe created mining model ESA_MOD_2 is explicitly named. ORE does not manage this mining model's life cycle.\u201d\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"List ESA model views","message":["%sql","","SELECT view_name, view_type FROM user_mining_model_views","WHERE model_name='ESA_MOD_2'","ORDER BY view_name;"],"enabled":true,"result":{"startTime":1736286894319,"interpreter":"sql.low","endTime":1736286894786,"results":[{"message":"VIEW_NAME\tVIEW_TYPE\nDM$VAESA_MOD_2\tExplicit Semantic Analysis Matrix\nDM$VFESA_MOD_2\tExplicit Semantic Analysis Features\nDM$VGESA_MOD_2\tGlobal Name-Value Pairs\nDM$VNESA_MOD_2\tNormalization and Missing Value Handling\nDM$VSESA_MOD_2\tComputed Settings\nDM$VWESA_MOD_2\tModel Build Alerts\nDM$VXESA_MOD_2\tText Features\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"The VA view shows associations among features (topics) and words","message":["%md","","*ATTRIBUTE_SUBNAME* refers to words, or tokens. The strength of the associations is measured by *COEFFICIENT*. Higher coefficient values indicate a stronger association."],"enabled":true,"result":{"startTime":1736286895202,"interpreter":"md.low","endTime":1736286895605,"results":[{"message":"<p><em>ATTRIBUTE_SUBNAME<\/em> refers to words, or tokens. The strength of the associations is measured by <em>COEFFICIENT<\/em>. Higher coefficient values indicate a stronger association.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%sql","","SELECT * from DM$VAESA_MOD_2;"],"enabled":true,"result":{"startTime":1736286896025,"interpreter":"sql.low","endTime":1736286896481,"results":[{"message":"PARTITION_NAME\tFEATURE_ID\tATTRIBUTE_NAME\tATTRIBUTE_SUBNAME\tATTRIBUTE_VALUE\tCOEFFICIENT\n\t1\tTITLE\tAIDS\t\t1.0\n\t2\tTITLE\tMARS\t\t1.0\n\t3\tTITLE\tMARS\t\t1.0\n\t4\tTITLE\tMARS\t\t1.0\n\t5\tTITLE\tAIDS\t\t1.0\n\t7\tTITLE\tAIDS\t\t1.0\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Show the associations for selected words","message":["%sql","","SELECT ATTRIBUTE_SUBNAME, count(ATTRIBUTE_SUBNAME) FROM DM$VAESA_MOD_2","WHERE ATTRIBUTE_SUBNAME='MARS'","GROUP BY ATTRIBUTE_SUBNAME"],"enabled":true,"result":{"startTime":1736286896901,"interpreter":"sql.low","endTime":1736286897395,"results":[{"message":"ATTRIBUTE_SUBNAME\tCOUNT(ATTRIBUTE_SUBNAME)\nMARS\t3\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":"[{\"raw\":{\"height\":300,\"lastColumns\":[],\"version\":1}}]","hideInIFrame":false,"selectedVisualization":"raw","title":"View the help file for ESA","message":["%r","","help(\"ore.odmESA\")"],"enabled":true,"result":{"startTime":1736286897815,"interpreter":"r.low","endTime":1736286898494,"results":[{"message":"ore.odmESA                package:OREdm                R Documentation\n\nIn-Database Explicit Semantic Analysis Models\n\nDescription:\n\n     Creates an Explicit Semantic Analysis model for feature extraction\n     using Oracle Data Mining in Oracle Database 12.2 or later.\n\nUsage:\n\n     ore.odmESA(formula,                        \n             data, \n             auto.data.prep = TRUE,\n             na.action = na.pass,\n             odm.settings = NULL,\n             ctx.settings = NULL)\n     \n     ## S3 method for class 'ore.odmESA'\n     features(object,...)\n     \n     ## S3 method for class 'ore.odmESA'\n     feature_compare(object,\n       newdata,\n       compare.cols = NULL,\n       supplemental.cols = NULL)\n     \n     ## S3 method for class 'ore.odmESA'\n     predict(object,\n       newdata,                \n       supplemental.cols = NULL,\n       type = c(\"class\",\"raw\"),\n       na.action = na.pass,\n       topN = NULL,...)\n     \nArguments:\n\n formula: An object of class \u2018formula\u2019 (or one that can be coerced to\n          that class): a symbolic description of the model to be\n          fitted. For details of the model specification, see\n          'Details'.\n\n    data: An \u2018ore.frame\u2019 object used for model building.\n\nauto.data.prep: A logical value that specifies whether Oracle Data\n          Mining should invoke automatic data preparation for the\n          build.\n\nna.action: A function to use for handling missing values, either\n          \u2018na.pass\u2019 to allow missing values or \u2018na.omit\u2019 to remove rows\n          with missing values. The default value is \u2018na.pass\u2019.\n\nodm.settings: Same as \u2018odm.settings\u2019 in \u2018ore.odmKMeans\u2019.  In addition,\n          to perform text mining, parameter \u2018CASE_ID_COLUMN_NAME\u2019 must\n          specify the name of the column containing unique identifiers.\n          Parameters \u2018ODMS_TEXT_POLICY_NAME\u2019,\n          \u2018ODMS_TEXT_MIN_DOCUMENTS\u2019, and \u2018ODMS_TEXT_MAX_FEATURES\u2019 can\n          be used to specify the name of a valid Oracle text policy,\n          the minimal number of documents in which echo token occurs,\n          and the maximum number of distinct features for text mining,\n          respectively.\n\nctx.settings: Same as \u2018ctx.settings\u2019 in \u2018ore.odmKMeans\u2019.\n\n  object: An object of type \u2018ore.odmESA\u2019.\n\n newdata: Data used for scoring.\n\ncompare.cols: Columns used to compare the features.  All the columns\n          are used by default.\n\nsupplemental.cols: Columns to include in the output.\n\n    type: If set to \u2018\"raw\"\u2019, provides the probability for each feature\n          returned. If set to \u2018\"class\"\u2019, the feature with the maximum\n          probability is returned.\n\n    topN: A positive integer that restricts the set of features to\n          those that have one of the specified number of highest\n          probability values.\n\n     ...: Additional arguments affecting the predictions produced.\n\nDetails:\n\n     Explicit Semantic Analysis (ESA) is a feature extraction\n     algorithm.  ESA does not discover latent features but instead uses\n     explicit features based on an existing knowledge base.\n\n     Explicit knowledge often exists in text form. Multiple knowledge\n     bases are available as collections of text documents. These\n     knowledge bases can be generic, for example, Wikipedia, or\n     domain-specific. Data preparation transforms the text into vectors\n     that capture attribute-concept associations.\n\nValue:\n\n     An object of class \"ore.odmESA\" includes the following components:\n\n    name: The name of the in-database model.\n\nsettings: A \u2018data.frame\u2019 of settings used to build the model.\n\nattributes: A \u2018data.frame\u2019 of attributes used to build the model.\n\n formula: The \u2018formula\u2019 used for the model fitted.\n\n    call: The matched call.\n     The function \u2018features\u2019 returns an \u2018ore.frame\u2019 that describes each\n     feature extracted. The columns are:\n\nFEATURE_ID: The numeric identifier associated with the feature.\n\nATTRIBUTE_NAME: The name of the attribute.\n\nATTRIBUTE_VALUE: The value of the attribute.\n\nCOEFFICIENT: The coefficient associated with the attribute in a\n          particular feature.\n     The function \u2018feature_compare\u2019 returns an \u2018ore.frame\u2019 containing a\n     \u2018SIMILARITY\u2019 column that measures relatedness and supplementary\n     columns if specified.\n\nAuthor(s):\n\n     Oracle\n\n     Maintainer: Oracle <email: oracle-r-enterprise@oracle.com>\n\nReferences:\n\n     Oracle R Enterprise\n\n     Oracle Data Mining Concepts\n\n     Oracle Data Mining User's Guide\n\nSee Also:\n\n     \u2018ore.odmSVD\u2019, \u2018ore.odmNMF\u2019, \u2018partitions\u2019\n\nExamples:\n\n       title <- c('Aids in Africa: Planning for a long war',\n                  'Mars rover maneuvers for rim shot',\n                  'Mars express confirms presence of water at Mars south pole',\n                  'NASA announces major Mars rover finding',\n                  'Drug access, Asia threat in focus at AIDS summit',\n                  'NASA Mars Odyssey THEMIS image: typical crater',\n                  'Road blocks for Aids')\n     \n       # TEXT contents in character column\n       df <- data.frame(CUST_ID = seq(length(title)), TITLE = title)\n       ESA_TEXT <- ore.push(df)\n     \n       # TEXT contains in clob column\n       attr(df$TITLE, \"ora.type\") <- \"clob\"\n       ESA_TEXT_CLOB <- ore.push(df)\n     \n       # create text policy (CTXSYS.CTX_DDL privilege is required)\n       ore.exec(\"Begin ctx_ddl.create_policy('ESA_TXTPOL'); End;\")\n     \n       # specify TEXT POLICY_NAME, MIN_DOCUMENTS, MAX_FEATURES and\n       # ESA algorithm settings in odm.settings\n       esa.mod <- ore.odmESA(~ TITLE, data = ESA_TEXT_CLOB,\n         odm.settings = list(case_id_column_name = \"CUST_ID\",\n                             ODMS_TEXT_POLICY_NAME = \"ESA_TXTPOL\",\n                             ODMS_TEXT_MIN_DOCUMENTS = 1,\n                             ODMS_TEXT_MAX_FEATURES = 3,\n                             ESAS_MIN_ITEMS = 1,\n                             ESAS_VALUE_THRESHOLD = 0.0001,\n                             ESAS_TOPN_FEATURES = 3))\n       class(esa.mod)\n       summary(esa.mod)\n       settings(esa.mod)\n       features(esa.mod)\n       predict(esa.mod, ESA_TEXT, type = \"class\", supplemental.cols = \"TITLE\")\n     \n       # use ctx.settings to specify a character column as TEXT and \n       # the same above settings as well as TOKEN_TYPE \n       esa.mod2 <- ore.odmESA(~ TITLE, data = ESA_TEXT,\n         odm.settings = list(case_id_column_name = \"CUST_ID\", ESAS_MIN_ITEMS = 1),\n         ctx.settings = list(TITLE = \n           \"TEXT(POLICY_NAME:ESA_TXTPOL)(TOKEN_TYPE:STEM)(MIN_DOCUMENTS:1)(MAX_FEATURES:3)\"))\n       summary(esa.mod2)\n       settings(esa.mod2)\n       features(esa.mod2)\n       predict(esa.mod2, ESA_TEXT_CLOB, type = \"class\", supplemental.cols = \"TITLE\")\n     \n       ore.exec(\"Begin ctx_ddl.drop_policy('ESA_TXTPOL'); End;\")\n     ","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Clean-up","message":["%script","","BEGIN","  DBMS_DATA_MINING.DROP_MODEL(model_name => 'ESA_MOD');","  EXCEPTION WHEN others THEN null;","END;","/","BEGIN","  DBMS_DATA_MINING.DROP_MODEL(model_name => 'ESA_MOD_2');","  EXCEPTION WHEN others THEN null;","END;","/"],"enabled":true,"result":{"startTime":1736286898918,"interpreter":"script.low","endTime":1736286900969,"results":[{"message":"\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n\nPL/SQL procedure successfully completed.\n\n\n---------------------------\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1736286901404,"interpreter":"md.low","endTime":1736286901818,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1736286902243,"interpreter":"md.low","endTime":1736286902662,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]