[{"layout":null,"template":null,"templateConfig":null,"name":"OML4R Data Transformation Categorical Recode","description":null,"readOnly":false,"type":"low","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":["%md"," "],"enabled":true,"result":{"startTime":1736276033321,"interpreter":"md.low","endTime":1736276033774,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# OML4R Data Transformation: recode categorical variables","","In this notebook, we demonstrate how to recode a categorical string variable to a numeric variable and string-to-string recoding using OML4R.","","Using the customer insurance lifetime value data set, which contains customer financial information, lifetime value, ","and whether or not the customer bought insurance, we show how to convert a categorical variable with each distinct level/value coded to an integer data type. Note that ***ore.recode***, which supports this transformation, can also be used to recode string values as illustrated in the last example. ","","The dataset CUSTOMER_INSURANCE_LTV is generated by the \"OML Run-me-first\" notebook, which MUST be run before this notebook.","","---","","###### IMPORTANT: The `\"OML Run-me-first\"` notebook is available under the menu `Templates -> Examples` and is a prerequisite to the current notebook.","","---","","Copyright (c) 2026 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1736276034225,"interpreter":"md.low","endTime":1736276034669,"results":[{"message":"<h1 id=\"oml4r-data-transformation-recode-categorical-variables\">OML4R Data Transformation: recode categorical variables<\/h1>\n<p>In this notebook, we demonstrate how to recode a categorical string variable to a numeric variable and string-to-string recoding using OML4R.<\/p>\n<p>Using the customer insurance lifetime value data set, which contains customer financial information, lifetime value,\nand whether or not the customer bought insurance, we show how to convert a categorical variable with each distinct level/value coded to an integer data type. Note that <em><strong>ore.recode<\/strong><\/em>, which supports this transformation, can also be used to recode string values as illustrated in the last example.<\/p>\n<p>The dataset CUSTOMER_INSURANCE_LTV is generated by the &quot;OML Run-me-first&quot; notebook, which MUST be run before this notebook.<\/p>\n<hr />\n<h6 id=\"important-the-oml-run-me-first-notebook-is-available-under-the-menu-templates---examples-and-is-a-prerequisite-to-the-current-notebook\">IMPORTANT: The <code>&quot;OML Run-me-first&quot;<\/code> notebook is available under the menu <code>Templates -&gt; Examples<\/code> and is a prerequisite to the current notebook.<\/h6>\n<hr />\n<p>Copyright (c) 2026 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"For more information...","message":["%md","","<a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4r/2.0.0/oreug/prepare-and-explore-data-database.html\" target=\"_blank\">OML4R documentation on Data Preparation<\/a>"],"enabled":true,"result":{"startTime":1736276035117,"interpreter":"md.low","endTime":1736276035553,"results":[{"message":"<p><a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4r/2.0.0/oreug/prepare-and-explore-data-database.html\" target=\"_blank\">OML4R documentation on Data Preparation<\/a><\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Import R libraries","message":["%r","","library(ORE)","library(OREdplyr)","options(ore.warn.order=FALSE)"],"enabled":true,"result":{"startTime":1736276036011,"interpreter":"r.low","endTime":1736276036517,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Overview of the data","message":["%r","","ore.sync(query = c(\"CUST_DF\" = \"select * from CUSTOMER_INSURANCE_LTV\"))","ore.attach()","z.show(head(CUST_DF, 5))"],"enabled":true,"result":{"startTime":1736276036971,"interpreter":"r.low","endTime":1736276037498,"results":[{"message":"The following object is masked _by_ .GlobalEnv:\n\n    CUST_DF\n\n\nThe following object is masked _by_ .GlobalEnv:\n\n    CUST_DF\n\n\n\n","type":"TEXT"},{"message":"MARITAL_STATUS\tSTATE\tCREDIT_BALANCE\tCUSTOMER_TENURE\tMORTGAGE_AMOUNT\tBANK_FUNDS\tNUM_DEPENDENTS\tHAS_CHILDREN\tINCOME\tCUSTOMER_ID\tGENDER\tPROFESSION\tCREDIT_CARD_LIMITS\tREGION\tHOME_OWNERSHIP\tNUM_ONLINE_TRANS\tBUY_INSURANCE\tMONTHLY_CHECKS\tNUM_TRANS_KIOSK\tAGE\tMONEY_MONTLY_OVERDRAWN\tLTV\tTOTAL_AUTOM_PAYMENTS\tNUM_TRANS_TELLER\tCHECKING_BALANCE\tNUM_TRANS_ATM\tLTV_BIN\tFIRST_NAME\tNUM_MORTGAGES\tCAR_OWNERSHIP\tLAST_NAME\nSINGLE\t4\t0\t3\t0\t0\t3\t0\t65871\tCU15154                   \tM                         \tNurse\t1000\tWest\t0\t0\tNo\t0\t1\t24\t53.06\t14367.75\t0\t0\t25\t0\tMEDIUM\tGAYLE\t0\t0\tDURANT\nSINGLE\t17\t0\t4\t0\t290\t4\t0\t68747\tCU15155                   \tM                         \tProgrammer/Developer\t700\tNorthEast\t0\t0\tYes\t1\t1\t35\t53.84\t14686.75\t287\t2\t25\t4\tMEDIUM\tQUINTON\t0\t1\tMASSEY\nMARRIED\t10\t0\t3\t1000\t550\t3\t0\t68684\tCU15157                   \tM                         \tProgrammer/Developer\t1000\tMidwest\t1\t1000\tYes\t14\t1\t26\t53.48\t25271\t132\t2\t25\t4\tHIGH\tANIBAL\t1\t1\tJIMENEZ\nMARRIED\t22\t0\t5\t1200\t1000\t5\t0\t59354\tCU15286                   \tF                         \tFireman\t2500\tSouthwest\t1\t1200\tNo\t4\t5\t24\t53.08\t19738.5\t628\t3\t619\t1\tMEDIUM\tJUNITA\t1\t1\tROBERTSON\nMARRIED\t22\t0\t4\t1800\t0\t3\t0\t84801\tCU15287                   \tF                         \tPROF-26\t2500\tSouthwest\t1\t1800\tNo\t0\t5\t47\t53.06\t31900.25\t0\t0\t25\t0\tVERY HIGH\tCHASITY\t1\t1\tELLIS\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Check the unique states by count","message":["%r","","output <- count(CUST_DF, STATE)","colnames(output)[2] <- \"count\"","z.show(arrange(output, count))"],"enabled":true,"result":{"startTime":1736276037960,"interpreter":"r.low","endTime":1736276038528,"results":[{"message":"STATE\tcount\n3\t11\n1\t18\n9\t40\n2\t46\n19\t48\n15\t49\n12\t51\n21\t85\n5\t108\n18\t132\n24\t148\n23\t154\n13\t165\n20\t233\n8\t237\n14\t238\n22\t304\n6\t413\n11\t453\n16\t488\n7\t558\n10\t2402\n4\t2964\n17\t4535\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Replace the state names with integers","message":["%r","","# Get vector of unique values in STATE column and create vector of integers to replace with.","state_names <- ore.pull(c(unique(CUST_DF$STATE)))","state_nums <- c(1:length(state_names))","","# Set STATE column to ore.character datatype before replacement.","CUST_DF$STATE <- as.ore.character(CUST_DF$STATE)","","# Replace the state names. ","CUST_DF$STATE <- ore.recode(CUST_DF$STATE, state_names, state_nums)"],"enabled":true,"result":{"startTime":1736276038978,"interpreter":"r.low","endTime":1736276039481,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Check the unique states encoded as integers","message":["%r","","output <- arrange(count(CUST_DF, STATE), n)","colnames(output)[2] <- \"count\"","","class(output$STATE)","z.show(output)"],"enabled":true,"result":{"startTime":1736276039939,"interpreter":"r.low","endTime":1736276040505,"results":[{"message":"'ore.numeric'\n","type":"HTML"},{"message":"STATE\tcount\n3\t11\n1\t18\n9\t40\n2\t46\n19\t48\n15\t49\n12\t51\n21\t85\n5\t108\n18\t132\n24\t148\n23\t154\n13\t165\n20\t233\n8\t237\n14\t238\n22\t304\n6\t413\n11\t453\n16\t488\n7\t558\n10\t2402\n4\t2964\n17\t4535\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Simple example recoding string values on a vector","message":["%r","","vec <- ore.push(c(\"a\", \"b\", NA, \"a\", \"c\", NA, \"e\"))","","cat(class(vec), \"\\n\")","","ore.recode(vec, c(\"a\", \"b\", \"c\"), c(\"able\", \"baker\", \"charlie\"))"],"enabled":true,"result":{"startTime":1736276040965,"interpreter":"r.low","endTime":1736276041540,"results":[{"message":"ore.character \n[1] \"able\"    \"baker\"   NA        \"able\"    \"charlie\" NA        NA       ","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Recode to multiple columns with different values","message":["%r","","ore.recode(vec, c(\"a\", \"b\", \"c\"),","            cbind(lower = c(\"able\", \"baker\", \"charlie\"),","                  upper = c(\"ABLE\", \"BAKER\", \"CHARLIE\")))"],"enabled":true,"result":{"startTime":1736276042001,"interpreter":"r.low","endTime":1736276042568,"results":[{"message":"<table class=\"dataframe\">\n<caption>A data.frame: 7 x 2<\/caption>\n<thead>\n\t<tr><th scope=col>lower<\/th><th scope=col>upper<\/th><\/tr>\n\t<tr><th scope=col>&lt;chr&gt;<\/th><th scope=col>&lt;chr&gt;<\/th><\/tr>\n<\/thead>\n<tbody>\n\t<tr><td>able   <\/td><td>ABLE   <\/td><\/tr>\n\t<tr><td>baker  <\/td><td>BAKER  <\/td><\/tr>\n\t<tr><td>NA     <\/td><td>NA     <\/td><\/tr>\n\t<tr><td>able   <\/td><td>ABLE   <\/td><\/tr>\n\t<tr><td>charlie<\/td><td>CHARLIE<\/td><\/tr>\n\t<tr><td>NA     <\/td><td>NA     <\/td><\/tr>\n\t<tr><td>NA     <\/td><td>NA     <\/td><\/tr>\n<\/tbody>\n<\/table>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1736276043024,"interpreter":"md.low","endTime":1736276043465,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md"],"enabled":true,"result":{"startTime":1736276043944,"interpreter":"md.low","endTime":1736276044404,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]