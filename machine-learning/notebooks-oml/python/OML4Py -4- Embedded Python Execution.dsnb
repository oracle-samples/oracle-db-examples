[{"layout":"zeppelin","template":null,"templateConfig":null,"name":"OML4Py -4- Embedded Python Execution","description":null,"readOnly":false,"type":"medium","paragraphs":[{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1737141736712,"interpreter":"md.medium","endTime":1737141737189,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","# Oracle Machine Learning for Python - Embedded Python Execution","","***Oracle Machine Learning for Python*** (OML4Py) makes the open source Python scripting language and environment ready for the enterprise and big data. Designed for problems involving both large and small data volumes, OML4Py integrates Python with Oracle Autonomous Database, allowing users to run Python commands and scripts for statistical, machine learning, and visualization analyses on database tables and views using Python syntax. Many familiar Python functions are overloaded that translate Python behavior into SQL for running in-database, as well as new automatic machine learning capabilities.","","In this notebook, we highlight using OML4Py Embedded Python Execution. We first build a linear model in Python directly, then create a function that will use Python engines spawned by the Autonomous Database environment.","","Copyright (c) 2026 Oracle Corporation ","###### <a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a>","---"],"enabled":true,"result":{"startTime":1737141737665,"interpreter":"md.medium","endTime":1737141738131,"results":[{"message":"<h1 id=\"oracle-machine-learning-for-python---embedded-python-execution\">Oracle Machine Learning for Python - Embedded Python Execution<\/h1>\n<p><em><strong>Oracle Machine Learning for Python<\/strong><\/em> (OML4Py) makes the open source Python scripting language and environment ready for the enterprise and big data. Designed for problems involving both large and small data volumes, OML4Py integrates Python with Oracle Autonomous Database, allowing users to run Python commands and scripts for statistical, machine learning, and visualization analyses on database tables and views using Python syntax. Many familiar Python functions are overloaded that translate Python behavior into SQL for running in-database, as well as new automatic machine learning capabilities.<\/p>\n<p>In this notebook, we highlight using OML4Py Embedded Python Execution. We first build a linear model in Python directly, then create a function that will use Python engines spawned by the Autonomous Database environment.<\/p>\n<p>Copyright (c) 2026 Oracle Corporation<\/p>\n<h6 id=\"the-universal-permissive-license-upl-version-10\"><a href=\"https://oss.oracle.com/licenses/upl/\" target=\"_blank\">The Universal Permissive License (UPL), Version 1.0<\/a><\/h6>\n<hr />\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Import libraries supporting OML4Py and create data table","","To use OML4Py, first import the package ***oml***. ","","Users can get online help using Python's help function and specifying the function of interest."],"enabled":true,"result":{"startTime":1737141738612,"interpreter":"md.medium","endTime":1737141739080,"results":[{"message":"<h2 id=\"import-libraries-supporting-oml4py-and-create-data-table\">Import libraries supporting OML4Py and create data table<\/h2>\n<p>To use OML4Py, first import the package <em><strong>oml<\/strong><\/em>.<\/p>\n<p>Users can get online help using Python's help function and specifying the function of interest.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Import libraries","message":["%python","","import warnings","warnings.filterwarnings('ignore')","","import oml"],"enabled":true,"result":{"startTime":1737141739589,"interpreter":"python.medium","endTime":1737141740043,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":4,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Create a table for the IRIS data","message":["%python","","from sklearn.datasets import load_iris","from sklearn import linear_model","import pandas as pd","","iris = load_iris()","x = pd.DataFrame(iris.data, ","                 columns = [\"SEPAL_LENGTH\", \"SEPAL_WIDTH\", \"PETAL_LENGTH\", \"PETAL_WIDTH\"])","y = pd.DataFrame(list(map(lambda x: {0:'setosa', 1: 'versicolor', 2:'virginica'}[x], iris.target)), ","                 columns = ['SPECIES'])","iris_df = pd.concat([x,y], axis=1)","","try:","    oml.drop(table=\"IRIS\")","except:","    pass","IRIS = oml.create(iris_df, table=\"IRIS\")","IRIS.head(4)"],"enabled":true,"result":{"startTime":1737141740540,"interpreter":"python.medium","endTime":1737141741319,"results":[{"message":"   SEPAL_LENGTH  SEPAL_WIDTH  PETAL_LENGTH  PETAL_WIDTH     SPECIES\n0           4.6          3.6             1          0.2      setosa\n1           5.1          2.5             3          1.1  versicolor\n2           6.0          2.2             4          1.0  versicolor\n3           5.8          2.6             4          1.2  versicolor\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":8,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Build and score a linear model from sklearn directly in Python","","A best practice with embedded Python execution is to validate your Python script, and then your user-defined function before invoking the embedded Python APIs. The next few paragraphs exercise the functionality we want."],"enabled":true,"result":{"startTime":1737141741786,"interpreter":"md.medium","endTime":1737141742246,"results":[{"message":"<h2 id=\"build-and-score-a-linear-model-from-sklearn-directly-in-python\">Build and score a linear model from sklearn directly in Python<\/h2>\n<p>A best practice with embedded Python execution is to validate your Python script, and then your user-defined function before invoking the embedded Python APIs. The next few paragraphs exercise the functionality we want.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","from sklearn import linear_model","lm = linear_model.LinearRegression()","X = iris_df[[\"PETAL_WIDTH\"]]","y = iris_df[[\"PETAL_LENGTH\"]]","mod = lm.fit(X, y)","print(\"Model:\",mod)"],"enabled":true,"result":{"startTime":1737141742741,"interpreter":"python.medium","endTime":1737141743228,"results":[{"message":"Model: LinearRegression()\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","pred = mod.predict(iris_df[[\"PETAL_WIDTH\"]])","pred[0:10]"],"enabled":true,"result":{"startTime":1737141743709,"interpreter":"python.medium","endTime":1737141744170,"results":[{"message":"array([[1.52954613],\n       [1.52954613],\n       [1.52954613],\n       [1.52954613],\n       [1.52954613],\n       [1.97553423],\n       [1.75254018],\n       [1.52954613],\n       [1.52954613],\n       [1.30655208]])\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Assess model quality","","Assess model quality using mean squared error and R^2 and generate a scatterplot of the data along with a plot of the regression line."],"enabled":true,"result":{"startTime":1737141744671,"interpreter":"md.medium","endTime":1737141745131,"results":[{"message":"<h2 id=\"assess-model-quality\">Assess model quality<\/h2>\n<p>Assess model quality using mean squared error and R^2 and generate a scatterplot of the data along with a plot of the regression line.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Compute quality metrics","message":["%python","","from sklearn.metrics import mean_squared_error, r2_score","","print('Coefficients: ', mod.coef_)","print(\"Mean squared error: %.2f\"","      % mean_squared_error(iris_df[[\"PETAL_LENGTH\"]], pred))","","print('Variance score (1 is perfect prediction): %.2f' % r2_score(iris_df[[\"PETAL_LENGTH\"]], ","       pred))"],"enabled":true,"result":{"startTime":1737141745612,"interpreter":"python.medium","endTime":1737141746096,"results":[{"message":"Coefficients:  [[2.2299405]]\nMean squared error: 0.23\nVariance score (1 is perfect prediction): 0.93\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Scatterplot with regression line for petal dimensions","message":["%python","","import matplotlib.pyplot as plt","","plt.scatter(iris_df.loc[:,\"PETAL_WIDTH\"], iris_df.loc[:,\"PETAL_LENGTH\"])","plt.plot(iris_df[[\"PETAL_WIDTH\"]], pred, color='blue', linewidth=3)","plt.grid(True)","plt.title('Prediction of Petal Length')","","plt.xlabel('Petal Width')","plt.ylabel('Petal Length')","","plt.show()"],"enabled":true,"result":{"startTime":1737141746573,"interpreter":"python.medium","endTime":1737141747034,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Build this same model using embedded Python execution","","Using embedded Python execution, let's build the same linear model, but spawned Python engines under control of the Autonomous Database environment. First, we'll define our function, ***build_lm_1***, that returns the model as the result. We refer to this as a \"user-defined function.\" As we did above, we'll go further and score the training data and plot the model against the data points. Note that embedded Python execution can return images as well as structured content in the Python API. In the SQL API, as you'll see in another script, you choose between structured data, images, or XML output.","","We run this function to ensure it returns what we expect. In this case, both an image and a model."],"enabled":true,"result":{"startTime":1737141747499,"interpreter":"md.medium","endTime":1737141747957,"results":[{"message":"<h2 id=\"build-this-same-model-using-embedded-python-execution\">Build this same model using embedded Python execution<\/h2>\n<p>Using embedded Python execution, let's build the same linear model, but spawned Python engines under control of the Autonomous Database environment. First, we'll define our function, <em><strong>build_lm_1<\/strong><\/em>, that returns the model as the result. We refer to this as a &quot;user-defined function.&quot; As we did above, we'll go further and score the training data and plot the model against the data points. Note that embedded Python execution can return images as well as structured content in the Python API. In the SQL API, as you'll see in another script, you choose between structured data, images, or XML output.<\/p>\n<p>We run this function to ensure it returns what we expect. In this case, both an image and a model.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Define a function to build model, score data, and plot values","message":["%python","","def build_lm_1(dat):","    import oml","    from sklearn import linear_model","    import matplotlib.pyplot as plt","","    lm = linear_model.LinearRegression()","    X = dat[[\"PETAL_WIDTH\"]]","    y = dat[[\"PETAL_LENGTH\"]]","    mod = lm.fit(X, y)","    ","    pred = mod.predict(dat[[\"PETAL_WIDTH\"]])","    plt.scatter(dat.loc[:,\"PETAL_WIDTH\"], dat.loc[:,\"PETAL_LENGTH\"])","    plt.plot(dat[[\"PETAL_WIDTH\"]], pred, color='blue', linewidth=3)","    plt.grid(True)","    plt.title('Prediction of Petal Length')","    ","    plt.xlabel('Petal Width')","    plt.ylabel('Petal Length')","    plt.show()","    return mod"],"enabled":true,"result":{"startTime":1737141748436,"interpreter":"python.medium","endTime":1737141748899,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Invoke user-defined Python function","message":["%python","","mod = build_lm_1(iris_df)"],"enabled":true,"result":{"startTime":1737141749360,"interpreter":"python.medium","endTime":1737141749852,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":6,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"View returned model object","message":["%python","","print(\"\\nType:\",type(mod), \"\\n\")","print(\"Model:\",mod)","print(\"Coefficient\", mod.coef_) "],"enabled":true,"result":{"startTime":1737141750331,"interpreter":"python.medium","endTime":1737141750797,"results":[{"message":"\nType: <class 'sklearn.linear_model._base.LinearRegression'> \n\nModel: LinearRegression()\nCoefficient [[2.2299405]]\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Use the `table_apply` function","","The ***table_apply*** function takes the proxy object *IRIS* as input data and loads that data to the user-defined function as a pandas DataFrame. The user-defined function is passed as a Python string. We see that the model comes back as an OML object, which we can pull to the client and see that it's the linear model. We also display the image automatically."],"enabled":true,"result":{"startTime":1737141751259,"interpreter":"md.medium","endTime":1737141751729,"results":[{"message":"<h2 id=\"use-the-table_apply-function\">Use the <code>table_apply<\/code> function<\/h2>\n<p>The <em><strong>table_apply<\/strong><\/em> function takes the proxy object <em>IRIS<\/em> as input data and loads that data to the user-defined function as a pandas DataFrame. The user-defined function is passed as a Python string. We see that the model comes back as an OML object, which we can pull to the client and see that it's the linear model. We also display the image automatically.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","mod = oml.table_apply(data=IRIS, func = build_lm_1)","","print(\"Type:\",type(mod))","print(\"Model:\",mod)","print(\"Coefficient\", mod.coef_)"],"enabled":true,"result":{"startTime":1737141752189,"interpreter":"python.medium","endTime":1737141752712,"results":[{"message":"Type: <class 'sklearn.linear_model._base.LinearRegression'>\nModel: LinearRegression()\nCoefficient [[2.2299405]]\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Use the in-Database Python script repository","","We can also save this user-defined function in the Python script repository and invoke this function by providing the function name string."],"enabled":true,"result":{"startTime":1737141753180,"interpreter":"md.medium","endTime":1737141753631,"results":[{"message":"<h2 id=\"use-the-in-database-python-script-repository\">Use the in-Database Python script repository<\/h2>\n<p>We can also save this user-defined function in the Python script repository and invoke this function by providing the function name string.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%python","","build_lm_1_str = \"\"\"def build_lm_1(dat):","    import oml","    from sklearn import linear_model","    import matplotlib.pyplot as plt","","    lm = linear_model.LinearRegression()","    X = dat[[\"PETAL_WIDTH\"]]","    y = dat[[\"PETAL_LENGTH\"]]","    mod = lm.fit(X, y)","    ","    pred = mod.predict(dat[[\"PETAL_WIDTH\"]])","    plt.scatter(dat.loc[:,\"PETAL_WIDTH\"], dat.loc[:,\"PETAL_LENGTH\"])","    plt.plot(dat[[\"PETAL_WIDTH\"]], pred, color='blue', linewidth=3)","    plt.grid(True)","    plt.title('Prediction of Petal Length')","    ","    plt.xlabel('Petal Width')","    plt.ylabel('Petal Length')","    plt.show()","    return mod\"\"\""],"enabled":true,"result":{"startTime":1737141754111,"interpreter":"python.medium","endTime":1737141754586,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Overwrite Script and list contents of Python script repository","message":["%python","","oml.script.create(\"build_lm_1\", build_lm_1_str, overwrite = True)","","z.show(oml.script.dir('build_lm_1'))"],"enabled":true,"result":{"startTime":1737141755044,"interpreter":"python.medium","endTime":1737141755536,"results":[{"message":"name\tscript\tdescription\tdate\nbuild_lm_1\tdef build_lm_1(dat):     import oml     from sklearn import linear_model     import matplotlib.pyplot as plt      lm = linear_model.LinearRegression()     X = dat[[\"PETAL_WIDTH\"]]     y = dat[[\"PETAL_LENGTH\"]]     mod = lm.fit(X, y)          pred = mod.predict(dat[[\"PETAL_WIDTH\"]])     plt.scatter(dat.loc[:,\"PETAL_WIDTH\"], dat.loc[:,\"PETAL_LENGTH\"])     plt.plot(dat[[\"PETAL_WIDTH\"]], pred, color='blue', linewidth=3)     plt.grid(True)     plt.title('Prediction of Petal Length')          plt.xlabel('Petal Width')     plt.ylabel('Petal Length')     plt.show()     return mod\tNone\t2025-01-17 19:22:35\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## The value passed to `func` can also be a string","","Notice the value to ***func*** is now a string, not a Python function object, however, the results are the same."],"enabled":true,"result":{"startTime":1737141756016,"interpreter":"md.medium","endTime":1737141756469,"results":[{"message":"<h2 id=\"the-value-passed-to-func-can-also-be-a-string\">The value passed to <code>func<\/code> can also be a string<\/h2>\n<p>Notice the value to <em><strong>func<\/strong><\/em> is now a string, not a Python function object, however, the results are the same.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","res = oml.table_apply(data=IRIS, func = 'build_lm_1', graphics=True)","res"],"enabled":true,"result":{"startTime":1737141756933,"interpreter":"python.medium","endTime":1737141759937,"results":[{"message":"LinearRegression()\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","print(\"\\nModel:\",res.dat)","print(\"\\nCoefficients:\", res.dat.coef_)"],"enabled":true,"result":{"startTime":1737141760419,"interpreter":"python.medium","endTime":1737141760876,"results":[{"message":"\nModel: LinearRegression()\n\nCoefficients: [[2.2299405]]\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Use `row_apply` and `group_apply` to process chuncks of rows in parallel","","The ***row_apply*** function can be used to invoke a user-defined function on chunks of rows, which is useful to perform scoring in parallel for native Python models. In this example, the user-defined function ***score_lm_1*** takes a pandas DataFrame and a linear model. The ***row_apply*** invocation takes as arguments the proxy object *IRIS*, that we want 10 rows scored at a time (resulting in 15 function invocations), the user-defined functions, the linear model object, and that we want the result to be returned as a single table.","","For illustrative purposes, you can also use the ***group_apply*** function to partition the data according to one or more columns and score as well, passing the model as an argument."],"enabled":true,"result":{"startTime":1737141761338,"interpreter":"md.medium","endTime":1737141761796,"results":[{"message":"<h2 id=\"use-row_apply-and-group_apply-to-process-chuncks-of-rows-in-parallel\">Use <code>row_apply<\/code> and <code>group_apply<\/code> to process chuncks of rows in parallel<\/h2>\n<p>The <em><strong>row_apply<\/strong><\/em> function can be used to invoke a user-defined function on chunks of rows, which is useful to perform scoring in parallel for native Python models. In this example, the user-defined function <em><strong>score_lm_1<\/strong><\/em> takes a pandas DataFrame and a linear model. The <em><strong>row_apply<\/strong><\/em> invocation takes as arguments the proxy object <em>IRIS<\/em>, that we want 10 rows scored at a time (resulting in 15 function invocations), the user-defined functions, the linear model object, and that we want the result to be returned as a single table.<\/p>\n<p>For illustrative purposes, you can also use the <em><strong>group_apply<\/strong><\/em> function to partition the data according to one or more columns and score as well, passing the model as an argument.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":"Create used-defined Python function to score data","message":["%python","","def score_lm_1(dat, model):","    import pandas as pd","    from sklearn import linear_model","    pred = model.predict(dat[[\"PETAL_WIDTH\"]])","    return pd.concat([dat[['SPECIES', 'PETAL_LENGTH']], ","                      pd.DataFrame(pred, columns=['PRED_PETAL_LENGTH'])], axis=1)"],"enabled":true,"result":{"startTime":1737141762251,"interpreter":"python.medium","endTime":1737141762715,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Score data in parallel using DataFrame proxy object, returning  scores with data also as proxy object","message":["%python","","res = oml.row_apply(IRIS, rows=10, func=score_lm_1, model=mod, ","                    func_value=pd.DataFrame([('a', 1, 1)], ","                                            columns=['SPECIES', 'PETAL_LENGTH', 'PRED_PETAL_LENGTH']))","z.show(res.head())"],"enabled":true,"result":{"startTime":1737141763189,"interpreter":"python.medium","endTime":1737141764667,"results":[{"message":"SPECIES\tPETAL_LENGTH\tPRED_PETAL_LENGTH\nsetosa\t1\t1\nsetosa\t1\t1\nsetosa\t1\t1\nsetosa\t1\t2\nsetosa\t1\t2\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":"Illustrate using 'group apply' with same user-defined function","message":["%python","","res = oml.group_apply(IRIS, index=IRIS[['SPECIES']], func=score_lm_1, model=mod, ","                    func_value=pd.DataFrame([('a', 1, 1)], ","                                            columns=['SPECIES', 'PETAL_LENGTH', 'PRED_PETAL_LENGTH']))","","z.show(res.head())"],"enabled":true,"result":{"startTime":1737141765131,"interpreter":"python.medium","endTime":1737141767410,"results":[{"message":"SPECIES\tPETAL_LENGTH\tPRED_PETAL_LENGTH\nsetosa\t1\t1\nsetosa\t1\t1\nsetosa\t1\t1\nsetosa\t1\t2\nsetosa\t1\t2\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Build one model per `SPECIES` using `group_apply`","","A better use of ***group_apply*** - the ability to automatically split the table data based on values in one or more columns - is for model building. The user-defined function is then invoked on each group. The function ***group_apply*** makes this easy, as well as specifying the desired number of parallel Python engines using the ***parallel*** argument.","","Here, we build three models, one specific to each species, and return them as a dictionary."],"enabled":true,"result":{"startTime":1737141767874,"interpreter":"md.medium","endTime":1737141768311,"results":[{"message":"<h2 id=\"build-one-model-per-species-using-group_apply\">Build one model per <code>SPECIES<\/code> using <code>group_apply<\/code><\/h2>\n<p>A better use of <em><strong>group_apply<\/strong><\/em> - the ability to automatically split the table data based on values in one or more columns - is for model building. The user-defined function is then invoked on each group. The function <em><strong>group_apply<\/strong><\/em> makes this easy, as well as specifying the desired number of parallel Python engines using the <em><strong>parallel<\/strong><\/em> argument.<\/p>\n<p>Here, we build three models, one specific to each species, and return them as a dictionary.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","","def build_lm_g(dat):","    import oml","    from sklearn import linear_model","","    lm = linear_model.LinearRegression()","    X = dat[[\"PETAL_WIDTH\"]]","    y = dat[[\"PETAL_LENGTH\"]]","    mod = lm.fit(X, y)","   ","    return mod","","mod = oml.group_apply(IRIS[:,[\"PETAL_LENGTH\",\"PETAL_WIDTH\",\"SPECIES\"]], ","                      index=oml.DataFrame(IRIS['SPECIES']), ","                      func=build_lm_g, parallel=2,","                      oml_connect = True)","print(\"Type:\",type(mod))","mod"],"enabled":true,"result":{"startTime":1737141768783,"interpreter":"python.medium","endTime":1737141770660,"results":[{"message":"Type: <class 'dict'>\n{'virginica': LinearRegression(), 'setosa': LinearRegression(), 'versicolor': LinearRegression()}\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Change the UDF to store the models inside the python datastore","","Next, change the user-defined function to save each model in a datastore - instead of returning it - and return ***True*** instead. The datastore allows storing Python objects in the database under the provided name. The object assumes the name it is assigned in Python, here \"mod_\" and the corresponding Species value."],"enabled":true,"result":{"startTime":1737141771116,"interpreter":"md.medium","endTime":1737141771558,"results":[{"message":"<h2 id=\"change-the-udf-to-store-the-models-inside-the-python-datastore\">Change the UDF to store the models inside the python datastore<\/h2>\n<p>Next, change the user-defined function to save each model in a datastore - instead of returning it - and return <em><strong>True<\/strong><\/em> instead. The datastore allows storing Python objects in the database under the provided name. The object assumes the name it is assigned in Python, here &quot;mod_&quot; and the corresponding Species value.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%python","","def build_lm_2(dat, dsname):","    import oml","    from sklearn import linear_model","    lm = linear_model.LinearRegression()","    X = dat[[\"PETAL_WIDTH\"]]","    y = dat[[\"PETAL_LENGTH\"]]","    lm.fit(X, y)","    name = \"mod_\" + dat.loc[dat.index[0],'SPECIES']","    oml.ds.save(objs = {name: lm}, name=dsname, append=True) ","    return name"],"enabled":true,"result":{"startTime":1737141772024,"interpreter":"python.medium","endTime":1737141772476,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Replace an existing python datastore with the output of `group_apply`","","If the datastore exists, we delete it so that the ***group_apply*** function completes successfully. The ***group_apply*** function takes the data, the ***index*** parameter that specifies the column or columns to partition on, the user-defined function, and that we wish to automatically connect to the database from the Python engine. Connecting to the database is necessary when using the datastore functionality.","","We then print the outcome, which contains a dictionary of three elements each assigned the model object name.","","When we load the datastore, we get the three models loaded into the client Python engine, assigned to their respective variables. For example we could request to see the model specifically built for the \"versicolor\" species."],"enabled":true,"result":{"startTime":1737141772935,"interpreter":"md.medium","endTime":1737141773387,"results":[{"message":"<h2 id=\"replace-an-existing-python-datastore-with-the-output-of-group_apply\">Replace an existing python datastore with the output of <code>group_apply<\/code><\/h2>\n<p>If the datastore exists, we delete it so that the <em><strong>group_apply<\/strong><\/em> function completes successfully. The <em><strong>group_apply<\/strong><\/em> function takes the data, the <em><strong>index<\/strong><\/em> parameter that specifies the column or columns to partition on, the user-defined function, and that we wish to automatically connect to the database from the Python engine. Connecting to the database is necessary when using the datastore functionality.<\/p>\n<p>We then print the outcome, which contains a dictionary of three elements each assigned the model object name.<\/p>\n<p>When we load the datastore, we get the three models loaded into the client Python engine, assigned to their respective variables. For example we could request to see the model specifically built for the &quot;versicolor&quot; species.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","try:","    oml.ds.delete('ds-1')","except:","    print(\"Datastore not found\")","    ","res = oml.group_apply(IRIS[:,[\"PETAL_LENGTH\",\"PETAL_WIDTH\",\"SPECIES\"]], ","                      index=oml.DataFrame(IRIS['SPECIES']), ","                      func=build_lm_2, dsname=\"ds-1\",","                      oml_connect = True)","print(\"Outcome:\",res)"],"enabled":true,"result":{"startTime":1737141773849,"interpreter":"python.medium","endTime":1737141777032,"results":[{"message":"Outcome: {'virginica': 'mod_virginica', 'setosa': 'mod_setosa', 'versicolor': 'mod_versicolor'}\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Leveraging third-party packages in Embedded Python Execution","","Embedded Python execution can also leverage functions from third-party packages. These packages need to be installed on the database server machine, but can then be used inside the user-defined function as shown here using ***LinearSVC***.","","Again, we create this script in the Python script repository and then invoke it by name using ***table_apply***. We then pull the model to the client and view its type."],"enabled":true,"result":{"startTime":1737141777494,"interpreter":"md.medium","endTime":1737141777937,"results":[{"message":"<h2 id=\"leveraging-third-party-packages-in-embedded-python-execution\">Leveraging third-party packages in Embedded Python Execution<\/h2>\n<p>Embedded Python execution can also leverage functions from third-party packages. These packages need to be installed on the database server machine, but can then be used inside the user-defined function as shown here using <em><strong>LinearSVC<\/strong><\/em>.<\/p>\n<p>Again, we create this script in the Python script repository and then invoke it by name using <em><strong>table_apply<\/strong><\/em>. We then pull the model to the client and view its type.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%python","","fit = \"\"\"def fit(data):","","    from sklearn.svm import LinearSVC","    x = data.drop('SPECIES', axis = 1).values","    y = data['SPECIES']","    mod =  LinearSVC().fit(x, y)","    return mod\"\"\"","","oml.script.create(\"sk_svc_fit\", fit, overwrite = True)","","z.show(oml.script.dir(['build_lm_1','sk_svc_fit']))"],"enabled":true,"result":{"startTime":1737141778399,"interpreter":"python.medium","endTime":1737141778888,"results":[{"message":"name\tscript\tdescription\tdate\nbuild_lm_1\tdef build_lm_1(dat):     import oml     from sklearn import linear_model     import matplotlib.pyplot as plt      lm = linear_model.LinearRegression()     X = dat[[\"PETAL_WIDTH\"]]     y = dat[[\"PETAL_LENGTH\"]]     mod = lm.fit(X, y)          pred = mod.predict(dat[[\"PETAL_WIDTH\"]])     plt.scatter(dat.loc[:,\"PETAL_WIDTH\"], dat.loc[:,\"PETAL_LENGTH\"])     plt.plot(dat[[\"PETAL_WIDTH\"]], pred, color='blue', linewidth=3)     plt.grid(True)     plt.title('Prediction of Petal Length')          plt.xlabel('Petal Width')     plt.ylabel('Petal Length')     plt.show()     return mod\tNone\t2025-01-17 19:22:35\nsk_svc_fit\tdef fit(data):      from sklearn.svm import LinearSVC     x = data.drop('SPECIES', axis = 1).values     y = data['SPECIES']     mod =  LinearSVC().fit(x, y)     return mod\tNone\t2025-01-17 19:22:58\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":"Invoke function on all data in DataFrame proxy object","message":["%python","","mod = oml.table_apply(data=IRIS, ","                      func = 'sk_svc_fit',","                      oml_input_type=\"pandas.DataFrame\")","print(\"Type:\",type(mod))","print('Coefficients: \\n', mod.coef_)"],"enabled":true,"result":{"startTime":1737141779343,"interpreter":"python.medium","endTime":1737141780819,"results":[{"message":"Type: <class 'sklearn.svm._classes.LinearSVC'>\nCoefficients: \n [[ 0.18344977  0.4549369  -0.81495365 -0.43357339]\n [ 0.05524625 -0.9008946   0.40923385 -0.9606271 ]\n [-0.85048831 -0.98657611  1.38090768  1.86511359]]\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":true,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Using a third-party package for prediction","","The model can now be used normally, e.g., to predict outcomes."],"enabled":true,"result":{"startTime":1737141781289,"interpreter":"md.medium","endTime":1737141781744,"results":[{"message":"<h2 id=\"using-a-third-party-package-for-prediction\">Using a third-party package for prediction<\/h2>\n<p>The model can now be used normally, e.g., to predict outcomes.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","pred = mod.predict(iris_df.drop('SPECIES', axis = 1).values)","pred2 = pred.reshape((-1,1))","pred2[0:10]"],"enabled":true,"result":{"startTime":1737141782206,"interpreter":"python.medium","endTime":1737141782667,"results":[{"message":"array([['setosa'],\n       ['setosa'],\n       ['setosa'],\n       ['setosa'],\n       ['setosa'],\n       ['setosa'],\n       ['setosa'],\n       ['setosa'],\n       ['setosa'],\n       ['setosa']], dtype=object)\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Assessing model quality with a third-party package","","Let's assess model quality using a confusion matrix computed from the ***sklearn.metrics*** function confusion_matrix."],"enabled":true,"result":{"startTime":1737141783144,"interpreter":"md.medium","endTime":1737141783598,"results":[{"message":"<h2 id=\"assessing-model-quality-with-a-third-party-package\">Assessing model quality with a third-party package<\/h2>\n<p>Let's assess model quality using a confusion matrix computed from the <em><strong>sklearn.metrics<\/strong><\/em> function confusion_matrix.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","from sklearn.metrics import confusion_matrix","","conf_mat = confusion_matrix(iris_df[[\"SPECIES\"]], pred2)","conf_mat"],"enabled":true,"result":{"startTime":1737141784070,"interpreter":"python.medium","endTime":1737141784531,"results":[{"message":"array([[50,  0,  0],\n       [ 0, 47,  3],\n       [ 0,  2, 48]])\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Simple `group_apply` for counting each species","","The ***group_apply*** function can be used for simple or complex computations. For example, here it is used to simply count the number of each species in the data set."],"enabled":true,"result":{"startTime":1737141785000,"interpreter":"md.medium","endTime":1737141785443,"results":[{"message":"<h2 id=\"simple-group_apply-for-counting-each-species\">Simple <code>group_apply<\/code> for counting each species<\/h2>\n<p>The <em><strong>group_apply<\/strong><\/em> function can be used for simple or complex computations. For example, here it is used to simply count the number of each species in the data set.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"table","title":null,"message":["%python","","def group_count(dat):","  import pandas as pd","  return pd.DataFrame([(dat[\"SPECIES\"][0], dat.shape[0])],","                      columns = [\"SPECIES\", \"CNT\"])","","index = oml.DataFrame(IRIS['SPECIES'])","res = oml.group_apply(IRIS, index, func=group_count,","                      oml_input_type=\"pandas.DataFrame\",","                      func_value=pd.DataFrame([('a', 1)],","                                              columns=[\"SPECIES\", \"CNT\"]))","z.show(res)"],"enabled":true,"result":{"startTime":1737141785906,"interpreter":"python.medium","endTime":1737141788304,"results":[{"message":"SPECIES\tCNT\nvirginica\t50\nsetosa\t50\nversicolor\t50\n","type":"TABLE"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Using `index_apply` for repeated invocations","","The ***index_apply*** function allows the same function to invoked a specified number of times. ","The first argument to the user-defined function is an index number for the function execution. ","For example, if the \"times\" argument is 12, each function invocation will receive a distinct value between 1 and 10. ","This can be used, e.g., for selecting behavior within the function or setting a random seed for Monte Carlo analysis."],"enabled":true,"result":{"startTime":1737141788767,"interpreter":"md.medium","endTime":1737141789215,"results":[{"message":"<h2 id=\"using-index_apply-for-repeated-invocations\">Using <code>index_apply<\/code> for repeated invocations<\/h2>\n<p>The <em><strong>index_apply<\/strong><\/em> function allows the same function to invoked a specified number of times.\nThe first argument to the user-defined function is an index number for the function execution.\nFor example, if the &quot;times&quot; argument is 12, each function invocation will receive a distinct value between 1 and 10.\nThis can be used, e.g., for selecting behavior within the function or setting a random seed for Monte Carlo analysis.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","def compute_random_mean(index):","    import numpy as np","    import scipy","    from statistics import mean ","    np.random.seed(index)","    res = np.random.random((100,1))*10","    return mean(res[1])","","print(\"Test: \", compute_random_mean(3))","","res = oml.index_apply(times=12, func=compute_random_mean)","res"],"enabled":true,"result":{"startTime":1737141789684,"interpreter":"python.medium","endTime":1737141790253,"results":[{"message":"Test:  7.081478226181048\n[7.203244934421581, 0.25926231827891333, 7.081478226181048, 5.4723224917572235, 8.707323061773764, 3.3197980530117723, 7.7991879224011464, 9.68540662820932, 5.018745921487388, 0.207519493594015, 0.19475241487624584, 7.400496965154048]\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Multiple images returned from embedded Python execution","","Here, we create a function ***RandomRedDots*** that creates a simple DataFrame and generates two plots of random red dots. We create a function in the Python Script Repository named \"RandomRedDots\", and then run the native Python function."],"enabled":true,"result":{"startTime":1737141790724,"interpreter":"md.medium","endTime":1737141791171,"results":[{"message":"<h2 id=\"multiple-images-returned-from-embedded-python-execution\">Multiple images returned from embedded Python execution<\/h2>\n<p>Here, we create a function <em><strong>RandomRedDots<\/strong><\/em> that creates a simple DataFrame and generates two plots of random red dots. We create a function in the Python Script Repository named &quot;RandomRedDots&quot;, and then run the native Python function.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","RandomRedDots = \"\"\"def RandomRedDots (num_dots_1 = 100, num_dots_2 = 10):","    import numpy as np","    import pandas as pd","    import matplotlib.pyplot as plt","       ","    d = {'id': range(1,10), 'val': [x/100 for x in range(1,10)]}","    df = pd.DataFrame(data=d)","    plt.scatter(range(0,num_dots_1), np.random.rand(100),c='r')","    plt.title(\"Random Red Dots\")","    plt.show()","    plt.scatter(range(0,num_dots_2), np.random.rand(10),c='r')","    plt.title(\"Random Red Dots\")","    plt.show()","    return df\"\"\"","","oml.script.create(\"RandomRedDots\", func=RandomRedDots, is_global=True, overwrite=True)","","print(RandomRedDots)"],"enabled":true,"result":{"startTime":1737141791635,"interpreter":"python.medium","endTime":1737141792099,"results":[{"message":"def RandomRedDots (num_dots_1 = 100, num_dots_2 = 10):\n    import numpy as np\n    import pandas as pd\n    import matplotlib.pyplot as plt\n       \n    d = {'id': range(1,10), 'val': [x/100 for x in range(1,10)]}\n    df = pd.DataFrame(data=d)\n    plt.scatter(range(0,num_dots_1), np.random.rand(100),c='r')\n    plt.title(\"Random Red Dots\")\n    plt.show()\n    plt.scatter(range(0,num_dots_2), np.random.rand(10),c='r')\n    plt.title(\"Random Red Dots\")\n    plt.show()\n    return df\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Use of the `graphics` flag","","If we simply invoke the named function, we see that the result is an OML object. Notice that we do not see images."],"enabled":true,"result":{"startTime":1737141792578,"interpreter":"md.medium","endTime":1737141793017,"results":[{"message":"<h2 id=\"use-of-the-graphics-flag\">Use of the <code>graphics<\/code> flag<\/h2>\n<p>If we simply invoke the named function, we see that the result is an OML object. Notice that we do not see images.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","res = oml.do_eval(func=\"RandomRedDots\")","print(\"Type: \", type(res))","","res"],"enabled":true,"result":{"startTime":1737141793481,"interpreter":"python.medium","endTime":1737141793977,"results":[{"message":"Type:  <class 'pandas.core.frame.DataFrame'>\n   id   val\n0   1  0.01\n1   2  0.02\n2   3  0.03\n3   4  0.04\n4   5  0.05\n5   6  0.06\n6   7  0.07\n7   8  0.08\n8   9  0.09\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Returning graphics","","To ensure we get the plots, we need to modify the function using the `graphics` flag."],"enabled":true,"result":{"startTime":1737141794446,"interpreter":"md.medium","endTime":1737141794892,"results":[{"message":"<h2 id=\"returning-graphics\">Returning graphics<\/h2>\n<p>To ensure we get the plots, we need to modify the function using the <code>graphics<\/code> flag.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","res = oml.do_eval(func=\"RandomRedDots\", graphics=True)","print(\"Type: \", type(res))","","res"],"enabled":true,"result":{"startTime":1737141795350,"interpreter":"python.medium","endTime":1737141796003,"results":[{"message":"Type:  <class 'oml.embed.data_image._DataImage'>\n   id   val\n0   1  0.01\n1   2  0.02\n2   3  0.03\n3   4  0.04\n4   5  0.05\n5   6  0.06\n6   7  0.07\n7   8  0.08\n8   9  0.09\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Example invocation via REST API with the `graphicsFlag`","","Invoke the *RandomRedDots* function from the REST API with *graphicsFlag* to *true*:","","    $ curl -X POST --header \"Authorization: Bearer <token>\" --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{\"graphicsFlag\":true}' \"<omlserver>/oml/api/py-scripts/v1/do-eval/RandomRedDots\""],"enabled":true,"result":{"startTime":1737141796474,"interpreter":"md.medium","endTime":1737141796925,"results":[{"message":"<h2 id=\"example-invocation-via-rest-api-with-the-graphicsflag\">Example invocation via REST API with the <code>graphicsFlag<\/code><\/h2>\n<p>Invoke the <em>RandomRedDots<\/em> function from the REST API with <em>graphicsFlag<\/em> to <em>true<\/em>:<\/p>\n<pre><code>$ curl -X POST --header &quot;Authorization: Bearer &lt;token&gt;&quot; --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{&quot;graphicsFlag&quot;:true}' &quot;&lt;omlserver&gt;/oml/api/py-scripts/v1/do-eval/RandomRedDots&quot;\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## A second option generating separate figures: RandomRedDots2","","Here, we create separate figure objects, add subplots, and then create the scatter plot. We'll store this in the script repository as \"RandomRedDots2\" and ","invoke the function to see the results. As expected, we get both plots.","","Now, when we invoke \"RandomRedDots2\" using embedded Python execution, we get both plots shown in the result."],"enabled":true,"result":{"startTime":1737141797385,"interpreter":"md.medium","endTime":1737141797834,"results":[{"message":"<h2 id=\"a-second-option-generating-separate-figures-randomreddots2\">A second option generating separate figures: RandomRedDots2<\/h2>\n<p>Here, we create separate figure objects, add subplots, and then create the scatter plot. We'll store this in the script repository as &quot;RandomRedDots2&quot; and\ninvoke the function to see the results. As expected, we get both plots.<\/p>\n<p>Now, when we invoke &quot;RandomRedDots2&quot; using embedded Python execution, we get both plots shown in the result.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","RandomRedDots2 = \"\"\"def RandomRedDots2 (num_dots_1 = 100, num_dots_2 = 10):","    import numpy as np","    import pandas as pd","    import matplotlib.pyplot as plt  ","","    d = {'id': range(1,10), 'val': [x/100 for x in range(1,10)]}","    df = pd.DataFrame(data=d)","    fig = plt.figure(1)","    ax = fig.add_subplot(111)","    ax.scatter(range(0,num_dots_1), np.random.rand(num_dots_1),c='r')","    fig.suptitle(\"Random Red Dots\")","","    fig2 = plt.figure(2)","    ax2 = fig2.add_subplot(111)","    ax2.scatter(range(0,num_dots_2), np.random.rand(num_dots_2),c='r')","    fig2.suptitle(\"Random Red Dots\")","    return df\"\"\"","","oml.script.create(\"RandomRedDots2\", func=RandomRedDots2, is_global=True, overwrite=True)","","print(RandomRedDots2)"],"enabled":true,"result":{"startTime":1737141798314,"interpreter":"python.medium","endTime":1737141798804,"results":[{"message":"def RandomRedDots2 (num_dots_1 = 100, num_dots_2 = 10):\n    import numpy as np\n    import pandas as pd\n    import matplotlib.pyplot as plt  \n\n    d = {'id': range(1,10), 'val': [x/100 for x in range(1,10)]}\n    df = pd.DataFrame(data=d)\n    fig = plt.figure(1)\n    ax = fig.add_subplot(111)\n    ax.scatter(range(0,num_dots_1), np.random.rand(num_dots_1),c='r')\n    fig.suptitle(\"Random Red Dots\")\n\n    fig2 = plt.figure(2)\n    ax2 = fig2.add_subplot(111)\n    ax2.scatter(range(0,num_dots_2), np.random.rand(num_dots_2),c='r')\n    fig2.suptitle(\"Random Red Dots\")\n    return df\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","res = oml.do_eval(func=\"RandomRedDots2\", num_dots_1 = 600, num_dots_2 = 200, graphics = True)","","print(type(res))","","res"],"enabled":true,"result":{"startTime":1737141799263,"interpreter":"python.medium","endTime":1737141799976,"results":[{"message":"<class 'oml.embed.data_image._DataImage'>\n   id   val\n0   1  0.01\n1   2  0.02\n2   3  0.03\n3   4  0.04\n4   5  0.05\n5   6  0.06\n6   7  0.07\n7   8  0.08\n8   9  0.09\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Equivalent invocation via REST API for RandomRedDots2","","Here is the equivalent REST API call","    ","    curl -X POST --header \"Authorization: Bearer <token>\" --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{\"graphicsFlag\":true}' \"<omlserver>/oml/api/py-scripts/v1/do-eval/RandomRedDots2\""],"enabled":true,"result":{"startTime":1737141800451,"interpreter":"md.medium","endTime":1737141800893,"results":[{"message":"<h2 id=\"equivalent-invocation-via-rest-api-for-randomreddots2\">Equivalent invocation via REST API for RandomRedDots2<\/h2>\n<p>Here is the equivalent REST API call<\/p>\n<pre><code>curl -X POST --header &quot;Authorization: Bearer &lt;token&gt;&quot; --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{&quot;graphicsFlag&quot;:true}' &quot;&lt;omlserver&gt;/oml/api/py-scripts/v1/do-eval/RandomRedDots2&quot;\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## A third option with a single plot with subplots: RandomRedDots3","","","Another way to approach this is to create a single plot composed to two subplots. This approach is somewhat simpler, but yields only a single image. Generating two images may be desired when using the SQL API so that each image is returned as a separate row. See the SQL API demo script for an example."],"enabled":true,"result":{"startTime":1737141801376,"interpreter":"md.medium","endTime":1737141801826,"results":[{"message":"<h2 id=\"a-third-option-with-a-single-plot-with-subplots-randomreddots3\">A third option with a single plot with subplots: RandomRedDots3<\/h2>\n<p>Another way to approach this is to create a single plot composed to two subplots. This approach is somewhat simpler, but yields only a single image. Generating two images may be desired when using the SQL API so that each image is returned as a separate row. See the SQL API demo script for an example.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","RandomRedDots3 = \"\"\"def RandomRedDots3 (num_dots_1 = 100, num_dots_2 = 10):","    import numpy as np","    import pandas as pd","    import matplotlib.pyplot as plt","","    d = {'id': range(1,10), 'val': [x/100 for x in range(1,10)]}","    df = pd.DataFrame(data=d)","","    plt.subplot(2,1, 1)","    plt.scatter(range(0,num_dots_1), np.random.rand(num_dots_1),c='r')","    plt.title(\"Random Red Dots\")","","    plt.subplot(2, 1, 2)","    plt.scatter(range(0,num_dots_2), np.random.rand(num_dots_2),c='r')","    plt.title(\"Random Red Dots\")","    return df\"\"\"","","oml.script.create(\"RandomRedDots3\", func=RandomRedDots3, is_global=True, overwrite=True)","oml.do_eval(func=\"RandomRedDots3\", graphics=True)"],"enabled":true,"result":{"startTime":1737141802303,"interpreter":"python.medium","endTime":1737141802911,"results":[{"message":"   id   val\n0   1  0.01\n1   2  0.02\n2   3  0.03\n3   4  0.04\n4   5  0.05\n5   6  0.06\n6   7  0.07\n7   8  0.08\n8   9  0.09\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Equivalent invocation via REST API for RandomRedDots3","","Here is the equivalent REST API call:","","    $ curl -X POST --header \"Authorization: Bearer <token>\" --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{\"graphicsFlag\":true}' \"<omlserver>/oml/api/py-scripts/v1/do-eval/RandomRedDots3\""],"enabled":true,"result":{"startTime":1737141803378,"interpreter":"md.medium","endTime":1737141803822,"results":[{"message":"<h2 id=\"equivalent-invocation-via-rest-api-for-randomreddots3\">Equivalent invocation via REST API for RandomRedDots3<\/h2>\n<p>Here is the equivalent REST API call:<\/p>\n<pre><code>$ curl -X POST --header &quot;Authorization: Bearer &lt;token&gt;&quot; --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{&quot;graphicsFlag&quot;:true}' &quot;&lt;omlserver&gt;/oml/api/py-scripts/v1/do-eval/RandomRedDots3&quot;\n<\/code><\/pre>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Returning only the structured contents","","We can also return only the structured contents as an OML DataFrame, which keeps the result in the database - returning a proxy object to the result. We pull the results to the notebook explicitly to display it locally."],"enabled":true,"result":{"startTime":1737141804295,"interpreter":"md.medium","endTime":1737141804750,"results":[{"message":"<h2 id=\"returning-only-the-structured-contents\">Returning only the structured contents<\/h2>\n<p>We can also return only the structured contents as an OML DataFrame, which keeps the result in the database - returning a proxy object to the result. We pull the results to the notebook explicitly to display it locally.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","import pandas as pd","res = oml.do_eval(func=RandomRedDots, func_value=pd.DataFrame({\"id\":[0],\"val\":[0]}))","type(res)","","res.pull()"],"enabled":true,"result":{"startTime":1737141805229,"interpreter":"python.medium","endTime":1737141806192,"results":[{"message":"   id  val\n0   1    0\n1   2    0\n2   3    0\n3   4    0\n4   5    0\n5   6    0\n6   7    0\n7   8    0\n8   9    0\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## Loading the python script from the repository","","Finally, note that a function stored in the Python Script Repository can be loaded back in the Python client engine, we can view its source, and finally invoke the function."],"enabled":true,"result":{"startTime":1737141806680,"interpreter":"md.medium","endTime":1737141807127,"results":[{"message":"<h2 id=\"loading-the-python-script-from-the-repository\">Loading the python script from the repository<\/h2>\n<p>Finally, note that a function stored in the Python Script Repository can be loaded back in the Python client engine, we can view its source, and finally invoke the function.<\/p>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"raw","title":null,"message":["%python","","random_red_dots = oml.script.load('RandomRedDots2')","","print(random_red_dots.get_source())","random_red_dots()"],"enabled":true,"result":{"startTime":1737141807600,"interpreter":"python.medium","endTime":1737141808103,"results":[{"message":"def RandomRedDots2 (num_dots_1 = 100, num_dots_2 = 10):\n    import numpy as np\n    import pandas as pd\n    import matplotlib.pyplot as plt  \n\n    d = {'id': range(1,10), 'val': [x/100 for x in range(1,10)]}\n    df = pd.DataFrame(data=d)\n    fig = plt.figure(1)\n    ax = fig.add_subplot(111)\n    ax.scatter(range(0,num_dots_1), np.random.rand(num_dots_1),c='r')\n    fig.suptitle(\"Random Red Dots\")\n\n    fig2 = plt.figure(2)\n    ax2 = fig2.add_subplot(111)\n    ax2.scatter(range(0,num_dots_2), np.random.rand(num_dots_2),c='r')\n    fig2.suptitle(\"Random Red Dots\")\n    return df\n   id   val\n0   1  0.01\n1   2  0.02\n2   3  0.03\n3   4  0.04\n4   5  0.05\n5   6  0.06\n6   7  0.07\n7   8  0.08\n8   9  0.09\n","type":"TEXT"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":false,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":false,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":"html","title":null,"message":["%md","","## End of Script"],"enabled":true,"result":{"startTime":1737141808615,"interpreter":"md.medium","endTime":1737141809061,"results":[{"message":"<h2 id=\"end-of-script\">End of Script<\/h2>\n","type":"HTML"}],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":12,"hideResult":false,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"},{"col":0,"visualizationConfig":null,"hideInIFrame":false,"selectedVisualization":null,"title":null,"message":[],"enabled":true,"result":{"startTime":1737141809543,"interpreter":"md.medium","endTime":1737141809994,"results":[],"taskStatus":"SUCCESS","forms":"[]","status":"SUCCESS"},"sizeX":0,"hideCode":true,"width":0,"hideResult":true,"dynamicFormParams":"{}","row":0,"hasTitle":false,"hideVizConfig":true,"hideGutter":true,"relations":[],"forms":"[]"}],"version":"6","snapshot":false,"tags":null}]