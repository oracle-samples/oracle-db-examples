{"paragraphs":[{"text":"%md\n\n# Oracle Machine Learning for Python (OML4Py)\n\n***Oracle Machine Learning for Python*** (OML4Py) makes the open source Python scripting language and environment ready for the enterprise and big data. Designed for problems involving both large and small data volumes, OML4Py integrates Python with Oracle Autonomous Database, allowing users to run Python commands and scripts for statistical, machine learning, and visualization analyses on database tables and views using Python syntax. Many familiar Python functions are overloaded that translate Python behavior into SQL for running in-database, as well as new automatic machine learning capabilities.\n\nThis example contains the answers for the **Try it yourself** exercises in the OML4Py labs. Note, the code in the paragraphs are not runnable from this notebook. Refer to the lab notebooks for the location where the each exercise will be invoked.\n\nCopyright (c) 2021 Oracle Corporation                             \n###### [The Universal Permissive License (UPL), Version 1.0](https://oss.oracle.com/licenses/upl/)","user":"OMLUSER02","dateUpdated":"2021-03-02T19:58:06+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Oracle Machine Learning for Python (OML4Py)</h1>\n<p><strong><em>Oracle Machine Learning for Python</em></strong> (OML4Py) makes the open source Python scripting language and environment ready for the enterprise and big data. Designed for problems involving both large and small data volumes, OML4Py integrates Python with Oracle Autonomous Database, allowing users to run Python commands and scripts for statistical, machine learning, and visualization analyses on database tables and views using Python syntax. Many familiar Python functions are overloaded that translate Python behavior into SQL for running in-database, as well as new automatic machine learning capabilities.</p>\n<p>This example contains the answers for the <strong>Try it yourself</strong> exercises in the OML4Py labs. Note, the code in the paragraphs are not runnable from this notebook. Refer to the lab notebooks for the location where the each exercise will be invoked.</p>\n<p>Copyright (c) 2021 Oracle Corporation</p>\n<h6><a href=\"https://oss.oracle.com/licenses/upl/\">The Universal Permissive License (UPL), Version 1.0</a></h6>\n"}]},"interrupted":false,"jobName":"paragraph_1614644812059_-531582432","id":"20210302-002652_1049535274","dateCreated":"2021-01-21T01:27:37+0000","dateStarted":"2021-03-02T19:58:07+0000","dateFinished":"2021-03-02T19:58:07+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:40"},{"title":"Lab 1: Use markdown","text":"%md\n\n#### Oracle Machine Learning for Python Live Lab\nWelcome to the **OML4Py** Live Lab!\n","user":"OMLUSER02","dateUpdated":"2021-03-02T05:44:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":false,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1614644812059_-1296807791","id":"20210302-002652_16492558","dateCreated":"2021-01-21T01:28:17+0000","dateStarted":"2021-01-25T18:24:10+0000","dateFinished":"2021-01-25T18:24:10+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:41"},{"title":"Lab 2: Merge with outer join","text":"%python\n\nx.merge(other=y, left_on=\"id\", right_on=\"num\", how=\"right\")\n\nReturn value:\n\n   id_l val_l  num_r ch_r\n0   3.0     c    3.0    q\n1   4.0     d    4.0    p\n2   5.0     e    5.0    b\n3   NaN  None    6.7    r\n4   NaN  None    7.2    a","user":"OMLUSER02","dateUpdated":"2021-03-02T05:44:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":false,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1614644812059_-419908139","id":"20210302-002652_1961767121","dateCreated":"2021-01-25T18:26:54+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:42"},{"title":"Lab 2: Split the digit data set into four samples of 25% each","text":"%python\n\nsplits = DIGITS.split(ratio=(.25, .25, .25, .25), use_hash = False)\nprint(\"Split lengths: \", [len(split) for split in splits])\n\nReturn value:\n\nsplit lengths:  [432, 460, 451, 454]\n","user":"OMLUSER02","dateUpdated":"2021-03-02T05:44:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":false,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1614644812059_-878190289","id":"20210302-002652_394370909","dateCreated":"2021-01-21T01:29:12+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:43"},{"title":"Lab 3: Build an in-database RandomForest model ","text":"%python \n\n# Build an in-db RandomForest model and compare the RF model's attribute importance ranking with that from MLX.\n\nmodel = oml.algo.rf(ODMS_RANDOM_SEED=32).fit(X, y, case_id='CASE_ID')\n\"RF accuracy score = {:.2f}\".format(model.score(X_test, y_test))\n\ngfi = GlobalFeatureImportance(mining_function='classification', score_metric='f1_weighted', random_state=32, parallel=4)\n\nexplanation = gfi.explain(model, X, y, case_id='CASE_ID', n_iter=10)\nexplanation\n\nReturn value:\n\nGlobal Feature Importance: \n\t[0] petal length (cm): Value: 0.4858, Error: 0.0278\n\t[1] petal width (cm): Value: 0.1183, Error: 0.0276\n\t[2] sepal length (cm): Value: 0.0191, Error: 0.0115\n\t[3] sepal width (cm): Value: 0.0000, Error: 0.0000\n","user":"OMLUSER02","dateUpdated":"2021-03-02T05:44:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":false,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1614644812059_901474663","id":"20210302-002652_1558047092","dateCreated":"2021-01-21T01:29:27+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:44"},{"title":"Lab 4: Deleting datastores","text":"%python\n\n# Delete the IRIS table from datastore IRIS, then delete the entire datastore.\n\noml.ds.delete(name=\"IRIS\", objs=[\"IRIS\"])\noml.ds.delete(name=\"IRIS\")\noml.ds.dir()\n\nReturn value:\n\nEmpty DataFrame\nColumns: [datastore_name, object_count, size, date, description]\nIndex: []","user":"OMLUSER02","dateUpdated":"2021-03-02T05:44:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1614644812059_-693013591","id":"20210302-002652_29065529","dateCreated":"2021-01-21T01:29:41+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:45"},{"title":"Lab 5: Use group_apply","text":"%python\n\n# Use the group_apply function to count the number of each species in the data set.\n\ndef group_count(dat):\n  import pandas as pd\n  return pd.DataFrame([(dat[\"SPECIES\"][0], dat.shape[0])],\n                      columns = [\"SPECIES\", \"CNT\"])\n\nindex = oml.DataFrame(IRIS['SPECIES'])\nres = oml.group_apply(IRIS, index, func=group_count,\n                      oml_input_type=\"pandas.DataFrame\",\n                      func_value=pd.DataFrame([('a', 1)],\n                                              columns=[\"SPECIES\", \"CNT\"]))\nres\n\nReturn value:\n\n     SPECIES  CNT\n0   virginica   50\n1      setosa   50\n2  versicolor   50","user":"OMLUSER02","dateUpdated":"2021-03-02T05:44:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":false,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1614644812059_-1113425151","id":"20210302-002652_72761703","dateCreated":"2021-01-21T01:29:52+0000","dateStarted":"2021-01-21T01:57:34+0000","dateFinished":"2021-01-21T01:57:34+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:46"},{"title":"Lab 6: AutoML Algorithm Selection","text":"%python\n\nfs_wine_cl = automl.FeatureSelection(mining_function = 'classification', score_metric = 'accuracy', parallel=2)\n\nselected_wine_features_cl = fs_wine_cl.reduce('svm_linear', WINE_X_cl, WINE_y_cl)\n\nWINE_X_reduced_cl = WINE_X_cl[:,selected_wine_features_cl]\n\nprint(\"Selected columns:\", WINE_X_reduced_cl.columns)\nprint(\"Number of columns:\")\n\"{} reduced to {}\".format(len(WINE_X_cl.columns), len(selected_wine_features_cl))\n\n\nReturn value:\n\nSelected columns: ['alcohol', 'malic_acid', 'ash', 'alcalinity_of_ash', 'total_phenols', 'flavanoids', 'nonflavanoid_phenols', 'color_intensity', 'hue', 'od280/od315_of_diluted_wines', 'proline']\nNumber of columns:\n'13 reduced to 11'\n\n","user":"OMLUSER02","dateUpdated":"2021-03-02T05:44:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":false,"results":{},"editorSetting":{"language":"text","editOnDblClick":false},"editorMode":"ace/mode/undefined","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1614644812059_379364354","id":"20210302-002652_532041159","dateCreated":"2021-01-21T01:30:04+0000","dateStarted":"2021-01-21T04:47:55+0000","dateFinished":"2021-01-21T04:48:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:47"}],"name":"OML4Py: Try It Yourself Answers","id":"40628","noteParams":{},"noteForms":{},"angularObjects":{"ORA7A60DC9B32:shared_process":[],"MDW381939C745:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}